/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

if(!dojo._hasResource["com.ibm.btt.dijit.CellWidgetMixin"]){dojo._hasResource["com.ibm.btt.dijit.CellWidgetMixin"]=true;dojo.provide("com.ibm.btt.dijit.CellWidgetMixin");dojo.declare("com.ibm.btt.dijit.CellWidgetMixin",null,{cellWidgetId:"",cellWidgetDataName:""});}if(!dojo._hasResource["com.ibm.btt.util.I18nBundle"]){dojo._hasResource["com.ibm.btt.util.I18nBundle"]=true;dojo.provide("com.ibm.btt.util.I18nBundle");dojo.declare("com.ibm.btt.util.I18nBundle",null,{bundle:null,constructor:function(_1,_2,_3){try{dojo.requireLocalization(_1,_2,_3, "");this.bundle=dojo.i18n.getLocalization(_1,_2,_3);}catch(e){console.info("Can not load NLS resources. packageName="+_1+", bundleName="+_2+", locale="+_3);this.bundle=undefined;}},getMessage:function(_4,_5){if(typeof (this.bundle)!="undefined"&&typeof (_4)!="undefined"&&typeof (this.bundle[_4])!="undefined"){if((_5!==undefined)&&(dojo.isArray(_5))){var _6=this.bundle[_4];var i=0;_6=dojo.replace(_6,dojo.hitch(_5,function(_7,k){if(i<_5.length){if(_5[i]!==undefined&&_5[i++]!==null){return _5[i-1];}}return "{"+k+"}";}));return _6;}else{if(_5!==undefined&&_5!==null&&dojo.isObject(_5)){return dojo.replace(this.bundle[_4],dojo.hitch(_5,function(_8,k){var _9=dojo.getObject(k,false,_5);if(_9!==null&&_9!==undefined){return _9;}else{return "{"+k+"}";}}));}else{if(_5!==undefined&&_5!==null){var _a=[];for(var i=1;i<arguments.length;i++){_a.push(arguments[i]);}return arguments.callee.apply(this,[_4,_a]);}else{return this.bundle[_4];}}}}else{return undefined;}}});}if(!dojo._hasResource["com.ibm.btt.util.I18nUtil"]){dojo._hasResource["com.ibm.btt.util.I18nUtil"]=true;dojo.provide("com.ibm.btt.util.I18nUtil");(function(){I18nUtil={getI18nString:function(_b,_c){if((_b===null)||(_b===undefined)||(_b==="")){return _b;}var _d="%";var _e="/";_b=_b.toString();var _f=_b.substring(0,1);if(_b.substring(0,1)!=_d){return _b;}else{var _10=_b.replace(_d,"");var tmp=_10.split(_e);var _11=tmp[0].substring(0,tmp[0].lastIndexOf("."));var _12=tmp[0].substring(tmp[0].lastIndexOf(".")+1,tmp[0].length);var _13=tmp[1];if(typeof (_11)=="undefined"||typeof (_12)=="undefined"||_11==""||_12==""){return _b;}var _14=new com.ibm.btt.util.I18nBundle(_11,_12);var _15=_14.getMessage(_13,_c);if(_15==undefined||_15==null){return _b;}else{return _15;}}}};})();}if(!dojo._hasResource["com.ibm.btt.util.StringUtil"]){dojo._hasResource["com.ibm.btt.util.StringUtil"]=true;dojo.provide("com.ibm.btt.util.StringUtil");(function(){StringUtil={escapeHTML:function(_16){if(_16){var _17=_16.replace(new RegExp("\r\n","g"),"\n");_17=_17.replace(new RegExp("\n","g"),"<br/>");return StringUtil.replaceAll(_17," ","&nbsp;");}else{return _16;}},escapeEnterWrap:function(str){if(str){var _18=str.replace(new RegExp("\r\n","g"),"\n");_18=_18.replace(new RegExp("\n","g"),"<br/>");return _18;}else{return str;}},replaceAll:function(str,_19,_1a){if(str&&_19&&_1a){return str.replace(new RegExp(_19,"gm"),_1a);}else{return str;}},removeWarp:function(str){if(str){var _1b=str.replace(new RegExp("\r","g"),"");_1b=_1b.replace(new RegExp("\n","g"),"");return _1b;}else{return str;}}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractWidgetMixin");dojo.declare("com.ibm.btt.dijit.AbstractWidgetMixin",null,{visibility:"visible",accessKey:"",hint:"",postCreate:function(){this.applyAccessKey();this.inherited(arguments);},getI18NString:function(key,_1c){return I18nUtil.getI18nString(key,_1c);},replaceWrap:function(){},_setHintAttr:function(_1d){this.hint=_1d;var _1e=this.textbox||this.focusNode||this.domNode;_1e.title=StringUtil.removeWarp(this.getI18NString(_1d));},_setVisibilityAttr:function(_1f){var d="";var v="inherit";switch(_1f){case "gone":d="none";v="inherit";break;case "hidden":d="";v="hidden";break;default:d="";v="inherit";}this.visibility=_1f;dojo.style(this.domNode,"display",d);dojo.style(this.domNode,"visibility",v);},_getVisibilityAttr:function(){var v=this.visibility;if(v!="gone"){if(this.domNode.offsetWidth<1||this.domNode.offsetHeight<1){v="gone";}else{v=dojo.style(this.domNode,"visibility")=="hidden"?"hidden":"visible";}}return v;},isVisible:function(){var isV=false;switch(this.visibility){case "gone":case "hidden":isV=false;break;default:isV=this.domNode.offsetWidth>0&&this.domNode.offsetHeight>0&&dojo.style(this.domNode,"visibility")!="hidden";}return isV;},isFocusable:function(){if(this.isVisible()==false){return false;}else{if(this.disabled||this.readOnly){return false;}else{return this.inherited(arguments);}}},applyAccessKey:function(){if(this.focusNode&&this.accessKey){this.focusNode.setAttribute("accessKey",this.accessKey);}},handleLenUint:function(_20){var _21=function(src,_22){var reg=new RegExp(_22+"$");return reg.test(src);};if(_21(_20,"px")||_21(_20,"%")||_21(_20,"em")){return _20;}else{return _20+"px";}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Anchor"]){dojo._hasResource["com.ibm.btt.dijit.Anchor"]=true;dojo.provide("com.ibm.btt.dijit.Anchor");dojo.declare("com.ibm.btt.dijit.Anchor",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.CellWidgetMixin],{templateString:"<a class='dijitLabelBase' dojoAttachEvent='onclick:_onClick'></a>",action:"#",target:"_parent",bttParams:"",text:"",tabIndex:0,disabled:false,width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{target:{node:"domNode"},text:{node:"domNode",type:"innerHTML"},action:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);var ti=parseInt(this.tabIndex);if(isNaN(ti)){this.tabIndex=0;}else{this.tabIndex=ti;}this.disabled=(this.disabled===true||this.disabled==="true");this.domNode.disabled=this.disabled;if(this.disabled){this.domNode.tabIndex=-1;dojo.addClass(this.domNode,"bttDisabledLink");}else{this.domNode.tabIndex=this.tabIndex;dojo.removeClass(this.domNode,"bttDisabledLink");}},_parameterHandler:function(e){var _23="";var _24=dojo.fromJson(e);_24[AjaxUtil.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();for(var _25 in _24){if(typeof (_25)!="undefined"){var _26=_24[_25];if(_23==""){_23+=_25+"="+_26;}else{_23+="&"+_25+"="+_26;}}}return _23;},_setActionAttr:function(_27){this.action=_27;var _28="";if(this.bttParams!=""&&this.action!=""&&this.action!=="#"){_28=this.action;if(this.bttParams!=""){if(_28.indexOf("?")==-1){_28+="?";}if(this.bttParams!=""){var _29=this._parameterHandler(this.bttParams);if(_28.substring(_28.length-1)=="?"){_28+=_29;}else{_28+="&"+_29;}}}}else{if(this.action!=""&&this.action!=="#"){_28=this.action;}else{_28="javascript:void(0)";}}this.domNode.href=_28;},_setTextAttr:function(_2a){this.text=_2a;this.domNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_2a));},_setDisabledAttr:function(_2b){this.disabled=(_2b===true||_2b==="true");this.domNode.disabled=this.disabled;if(this.disabled){this.domNode.tabIndex=-1;dojo.addClass(this.domNode,"bttDisabledLink");}else{this.domNode.tabIndex=this.tabIndex;dojo.removeClass(this.domNode,"bttDisabledLink");}},focus:function(){this.domNode.focus();},applyAccessKey:function(){if(this.accessKey){this.domNode.setAttribute("accessKey",this.accessKey);}},_onClick:function(e){if(this.disabled||this.onClick(e)===false){e.preventDefault();}},onClick:function(e){},_setTextWrapAttr:function(_2c){this.textWrap=_2c;if(this.textWrap){dojo.addClass(this.domNode,"dijitLabelWrap");}else{dojo.removeClass(this.domNode,"dijitLabelWrap");}},_setWidthAttr:function(_2d){if(this.width!=""){this.width=_2d;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_2e){if(this.height!=""){this.height=_2e;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Button"]){dojo._hasResource["com.ibm.btt.dijit.Button"]=true;dojo.provide("com.ibm.btt.dijit.Button");dojo.declare("com.ibm.btt.dijit.Button",[dijit.form.Button,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.CellWidgetMixin],{bttParams:"",icon:"",text:"",inValid:false,width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.Button.prototype.attributeMap,{text:{node:"textNode",type:"innerHTML"},icon:{node:"iconImageNode",type:"attribute",attribute:"src"},width:{node:"domNode"},height:{node:"domNode"}}),buildRendering:function(){this.inherited(arguments);this.iconImageNode=dojo.create("img",{"style":"display:none;"},this.containerNode,"last");this.textNode=dojo.create("span",{"class":"dijitLabelBase"},this.containerNode,"last");dojo.style(this.focusNode,"overflow","hidden");dojo.addClass(this.focusNode.parentNode,"dijitLabelBase");if(dojo.isIE&&dojo.isIE>8){dojo.style(this.focusNode.parentNode,"overflow","visible");}},postCreate:function(){this.inherited(arguments);this._setIconAttr(this.icon);},_setTextAttr:function(_2f){this.text=_2f;this.textNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_2f));},_setTextWrapAttr:function(_30){this.textWrap=_30;if(this.textWrap){dojo.addClass(this.textNode,"dijitLabelWrap");}else{dojo.removeClass(this.textNode,"dijitLabelWrap");}},_setIconAttr:function(_31){this.icon=_31;if(_31){this.iconImageNode.src=_31;dojo.style(this.iconImageNode,"display","");}else{dojo.style(this.iconImageNode,"display","none");}},_setWidthAttr:function(_32){if(_32!=""){this.width=_32;dojo.style(this.focusNode.parentNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_33){if(_33!=""){this.height=_33;dojo.style(this.focusNode.parentNode,"height",this.handleLenUint(this.height));}},_setInValidAttr:function(_34){this.inValid=_34;if(this.type=="submit"){var _35=this._getParentForm();if(_35&&_35.setSubmitButtonState){_35.setSubmitButtonState();}else{this.set("disabled",_34);}}else{this.set("disabled",_34);}},_onButtonClick:function(e){var _36=this._getParentForm();if(_36){if(this.get("disabled")==false&&(this.type=="submit"||this.type=="cancel"||this.type=="save")){_36._clickedButton=this;}else{_36._clickedButton=null;}}if(_36&&this.get("disabled")==false&&this.type=="cancel"){this._onClick(e);this._doCancelAction(_36);e.preventDefault();}else{if(_36&&this.get("disabled")==false&&this.type=="save"){this._onClick(e);this._doSaveAction(_36);e.preventDefault();}else{if(_36){_36._lastClickedButton=this;}this.inherited(arguments);}}},_getParentForm:function(){for(var _37=this.domNode;_37.parentNode;_37=_37.parentNode){var _38=dijit.byNode(_37);if(_38&&typeof _38._onSubmit=="function"){return _38;}}},_doCancelAction:function(_39){var _39=this._createHiddenForm(_39,typeof this.bttParams=="string"?dojo.fromJson(this.bttParams):this.bttParams);_39.submit();},_doSaveAction:function(_3a){var _3a=this._getParentForm();if(_3a.onFormSubmit){_3a.onFormSubmit();}var _3b=_3a.get("validValue");var _3a=this._createHiddenForm(_3a,dojo.mixin(_3b,typeof this.bttParams=="string"?dojo.fromJson(this.bttParams):this.bttParams));_3a.submit();},_createHiddenForm:function(_3c,_3d){var _3c=dojo.create("form",{"style":"display:none;","action":_3c.get("action"),"method":_3c.get("method")},dojo.body(),"last");var _3e=[];for(var _3f in _3d){if(_3f!=undefined&&_3f!=null&&_3f!=""){_3e=_3e.concat(this._convertToKeyValuePair(_3f,_3d[_3f]));}}for(var i=0;i<_3e.length;i++){dojo.create("input",{"type":"hidden","name":_3e[i].key,"value":_3e[i].value},_3c,"last");}return _3c;},_convertToKeyValuePair:function(_40,_41){var res=[];if(dojo.isObject(_41)){for(var key in _41){if(key!=undefined&&key!=null&&key!=""){res=res.concat(this._convertToKeyValuePair(_40+"."+key,_41[key]));}}}else{if(dojo.isArray(_41)){for(var i=0;i<_41.length;i++){res=res.concat(this._convertToKeyValuePair(_40+"."+i,_41[i]));}}else{res.push({"key":_40,"value":_41});}}return res;}});}if(!dojo._hasResource["com.ibm.btt.dijit.CheckBox"]){dojo._hasResource["com.ibm.btt.dijit.CheckBox"]=true;dojo.provide("com.ibm.btt.dijit.CheckBox");dojo.declare("com.ibm.btt.dijit.CheckBox",[dijit.form.CheckBox,com.ibm.btt.dijit.AbstractWidgetMixin],{text:"",uncheckedField:null,checkedValue:"true",unCheckedValue:"false",isChecked:false,checked:"",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.CheckBox.prototype.attributeMap,{isChecked:{node:"domNode",type:"attribute"},style:{node:"labelNode",type:"attribute"},text:{node:"labelNode",type:"innerHTML"}}),postMixInProperties:function(){if(this.isChecked==true){this.checked="checked";this.params.checked="checked";}this.inherited(arguments);},create:function(){this.labelNode=dojo.create("label",{"class":"dijitLabelBase"},this.domNode,"after");this.inherited(arguments);this.labelNode.htmlFor=this.id;dojo.place(this.labelNode,this.domNode,"after");this.set("visibility",this.visibility);},postCreate:function(){this.inherited(arguments);this._setSubmitValue();this.set("value",this.checkedValue);if(this.width&&this.width!=""){this.set("width",this.width);}if(this.height&&this.height!=""){this.set("height",this.height);}},setUncheckedValue:function(arg){if(!this.get("name")){return;}if(arg==true){if(this.uncheckedField==null){this.uncheckedField=dojo.create("input",{type:"hidden",value:this.unCheckedValue,name:this.get("name")});}dojo.place(this.uncheckedField,this.focusNode,"after");}else{if(this.uncheckedField!=null){dojo.destroy(this.uncheckedField);}}},_onFocus:function(){this.inherited(arguments);if(!this.text||this.text===""||this.text===null){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}},_setSubmitValue:function(){if(this.get("isChecked")){this.setUncheckedValue(false);}else{this.setUncheckedValue(true);}},_setIsCheckedAttr:function(_42){this.set("checked",_42);},_setCheckedAttr:function(_43){if(_43==false||_43=="false"||_43==""){this.isChecked=false;}else{this.isChecked=true;}this._setSubmitValue();this.inherited(arguments);},_setTextAttr:function(_44){this.text=_44;this.labelNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_44));},_setStyleAttr:function(_45){dojo.attr(this.labelNode,"style",_45);},_setClassAttr:function(_46){dojo.attr(this.labelNode,"class",_46);},_setHintAttr:function(_47){this.hint=_47;var _48=StringUtil.removeWarp(this.getI18NString(_47));var _49=this.textbox||this.focusNode||this.domNode;_49.title=_48;this.labelNode.title=_48;},_setVisibilityAttr:function(_4a){var d="";var v="inherit";switch(_4a){case "gone":d="none";v="inherit";break;case "hidden":d="";v="hidden";break;default:d="";v="inherit";}this.visibility=_4a;dojo.style(this.domNode,"display",d);dojo.style(this.domNode,"visibility",v);dojo.style(this.labelNode,"display",d);dojo.style(this.labelNode,"visibility",v);},_setReadOnlyAttr:function(_4b){this.inherited(arguments);if(_4b==="true"||_4b===true){this.labelNode.htmlFor="";}else{this.labelNode.htmlFor=this.id;}},_setDisabledAttr:function(_4c){this.inherited(arguments);if(this.uncheckedField!=null){dojo.attr(this.uncheckedField,"disabled",_4c);}},_getValueAttr:function(){if(this.isChecked){return this.checkedValue;}else{return this.unCheckedValue;}},_setTextWrapAttr:function(_4d){this.textWrap=_4d;if(this.textWrap){dojo.addClass(this.labelNode,"dijitLabelWrap");}else{dojo.removeClass(this.labelNode,"dijitLabelWrap");}},_setWidthAttr:function(_4e){if(this.width!=""){this.width=_4e;var _4f=_4e.replace(new RegExp("px","gm"),"");try{_4f=Number(_4f);}catch(e){console.error("Illegal input argument. Can not convert input width:"+_4e+" to number.");return;}var box=dojo.marginBox(this.domNode);var _50=_4f-box.w;if(_50<0){_50=0;}dojo.style(this.labelNode,"width",_50+"px");}},_setHeightAttr:function(_51){if(this.height!=""){this.height=_51;var _52=_51.replace(new RegExp("px","gm"),"");dojo.style(this.labelNode,"height",_52+"px");}},destroy:function(){this.inherited(arguments);dojo.destroy(this.labelNode);this.labelNode=null;}});}if(!dojo._hasResource["com.ibm.btt.dijit.ValidationTextBox"]){dojo._hasResource["com.ibm.btt.dijit.ValidationTextBox"]=true;dojo.provide("com.ibm.btt.dijit.ValidationTextBox");dojo.requireLocalization("com.ibm.btt.dijit","TextBox", null, "ROOT");dojo.declare("com.ibm.btt.dijit.ValidationTextBox",[dijit.form.ValidationTextBox,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"",errorDisplayer:null,singleFieldErrorMessage:"",isMandatory:false,attributeMap:dojo.delegate(dijit.form.ValidationTextBox.prototype.attributeMap,{width:{node:"domNode"}}),postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");if(this.placeHolder){this.placeHolder=this.getI18NString(this.placeHolder);this.watch("readOnly",this._updatePlaceHolder);this.watch("disabled",this._updatePlaceHolder);}},_updatePlaceHolder:function(){if(this._phspan&&(this.disabled||this.readOnly)){this._phspan.style.display="none";}else{this.inherited(arguments);}},acceptedCharReg:"",postCreate:function(){this.inherited(arguments);if(this.acceptedCharReg){this.acceptedCharReg=new RegExp(this.acceptedCharReg);if(!this.acceptedCharReg){return;}this.connect(this.textbox,"onkeypress",function(evt){if(evt.keyChar&&!this.acceptedCharReg.test(evt.keyChar)){return dojo.stopEvent(evt);}});}},validator:function(_53,_54){var _55=typeof (this.regExpGen(_54))!="undefined"&&this.testRegularExpression(this.regExpGen(_54),_53);if(!_55){this.invalidMessage=this.bundle.getMessage("regularExpressionMessage");return false;}else{var res=(!this.required||!this._isEmpty(_53))&&(this._isEmpty(_53)||this.parse(_53,_54)!==undefined);if(res){return true;}else{this.invalidMessage=this.bundle.getMessage("invalidMessage");return false;}}},testRegularExpression:function(reg,_56){return (new RegExp("^(?:"+reg+")"+(this.required?"":"?")+"$")).test(_56);},_setWidthAttr:function(_57){if(_57!=""){this.width=_57;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setIsMandatoryAttr:function(_58){this.isMandatory=_58;},isErasable:function(){if(this.isMandatory||this.textbox.value!=""){return false;}var _59=this.required;this.required=false;var isE=this.validator("",this.constraints);this.required=_59;return isE;},_onFocus:function(by){this.onShowErrorFlag=false;if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}this.inherited(arguments);},onShowErrorFlag:false,showErrorMessage:function(_5a){if(dojo.isArray(_5a)){var _5b=[];for(var i=0;i<_5a.length;i++){var _5c=this.getI18NString(_5a[i]);if(_5c==null){_5c=_5a[i];}_5b.push(_5c);}if(_5b.length!=0){var _5d=_5b.join(" ");}else{var _5d="";}}else{var _5e=[];var _5f=[];if(arguments.length==0){arguments[0]="";_5a="";}for(var i=1;i<arguments.length;i++){_5f[i-1]=arguments[i];}_5e[0]=arguments[0];_5e[1]=_5f;_5e[2]=true;var _5d=this.getI18NString.apply(this,_5e);if(_5d==null){_5d=_5a;}}if(_5a!=""){this._message=_5a;dijit.hideTooltip(this.domNode);dojo.window.scrollIntoView(this.focusNode);this.onShowErrorFlag=true;if(!this.errorDisplayer){this.errorDisplayer=new dijit._MasterTooltip();}this.errorDisplayer.show(_5d,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{this.onShowErrorFlag=false;if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}}this._refreshState();},validate:function(_60){if(this.onShowErrorFlag){this._set("state","Error");this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",false?"false":"true");if(_60){if(this.state=="Error"){message=this.getErrorMessage(true);}else{message=this.getPromptMessage(true);}this._maskValidSubsetError=true;}return false;}else{return this.inherited(arguments);}},destroy:function(){this.displayMessage("");if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}this.inherited(arguments);if(this.errorDisplayer){this.errorDisplayer.destroy();this.errorDisplayer=undefined;}}});dojo.declare("com.ibm.btt.dijit.MappedTextBox",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.MappedTextBox],{});dojo.declare("com.ibm.btt.dijit.RangeBoundTextBox",[com.ibm.btt.dijit.MappedTextBox,dijit.form.RangeBoundTextBox],{postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},rangeCheck:function(_61,_62){if("min" in _62&&this.compare(_61,_62.min)<0){this.rangeMessage=this.bundle.getMessage("rangeMinMessage",{value:_62.min});return false;}if("max" in _62&&this.compare(_61,_62.max)>0){this.rangeMessage=this.bundle.getMessage("rangeMaxMessage",{value:_62.max});return false;}return true;}});}if(!dojo._hasResource["com.ibm.btt.dijit.ComboBox"]){dojo._hasResource["com.ibm.btt.dijit.ComboBox"]=true;dojo.provide("com.ibm.btt.dijit.ComboBox");dojo.declare("com.ibm.btt.dijit.ComboBox",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.ComboBox,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",storeData:"",storeURL:"",labelField:"label",valueField:"value",asyncStatus:0,asyncErrorMessage:"",typeAhead:true,inputFlag:0,comboValue:"",_eventsHandler:[],constructor:function(){this.storeDataFormat={itemLabel:"label",itemValue:"value"};this.searchAttr=this.storeDataFormat.itemLabel;this._eventsHandler=[];},attributeMap:dojo.delegate(dijit.form.ComboBox.prototype.attributeMap,{}),postMixInProperties:function(){this.storeDataFormat.itemLabel=this.labelField?this.labelField:"label";this.storeDataFormat.itemValue=this.valueField?this.valueField:"value";this.searchAttr=this.storeDataFormat.itemLabel;var _63=this.srcNodeRef;var _64={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};var _65=this.storeDataFormat.itemLabel;var _66=this;dojo.query("> option",_63).forEach(dojo.hitch(this,function(_67,i){var _68={};_68[_65]=_66.getI18NString(dojo.trim(_67.innerHTML));var _69=dojo.attr(_67,"value");if(_69==""){}_68[this.storeDataFormat.itemValue]=_69;_64.items.push(_68);}));if(_64.items.length==0){if(this.storeData){var _6a=dojo.fromJson(this.storeData);_64=this._formatStoreData(_6a);}}this.store=new dojo.data.ItemFileReadStore({data:_64});this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(!this.storeDataName&&this.storeURL){this.loadStoreFromURL(this.storeURL);}if(this.typeAhead!=undefined&&this.typeAhead==false){this.textbox.readOnly=true;}else{if(this.readOnly!=undefined&&this.readOnly==true){this.textbox.readOnly=true;}else{this.textbox.readOnly=false;}}dojo.connect(this.focusNode,"onclick",dojo.hitch(this,function(){if(!this.typeAhead){if(this._opened){this.closeDropDown();}else{this.loadDropDown();}}}));if(this.typeAhead==false){if(this.comboValue!=null&&this.comboValue!=""){var _6b=this.store.data;if(_6b==null){_6b=this.store._jsonData;}var _6c=_6b.items;for(var i=0;_6c!=null&&i<_6c.length;i++){if(_6c[i][this.storeDataFormat.itemValue]==this.comboValue){this.textbox.value=_6c[i][this.storeDataFormat.itemLabel];break;}}}}},setStoreData:function(_6d){var _6d=this._formatStoreData(_6d);this.store.clearOnClose=true;this.store.data=_6d;this.store._jsonData=null;this.store.close();},_formatStoreData:function(_6e){var _6f={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};if(_6e instanceof Array){for(var i=0;i<_6e.length;i++){if(_6e[i]!=null){var _70={};if(dojo.isObject(_6e[i])){if(_6e[i][_6f.label]!=null){_70[_6f.label]=this.getI18NString(_6e[i][_6f.label]);if(_6e[i][this.valueField]){_70[_6f.identifier]=_6e[i][this.valueField];}else{_70[_6f.identifier]=this.getI18NString(_6e[i][_6f.label]);}}}else{if(dojo.isString(_6e[i])){_70[_6f.label]=this.getI18NString(_6e[i]);_70[_6f.identifier]=this.getI18NString(_6e[i]);}else{_70[_6f.label]=_6e[i].toString();_70[_6f.identifier]=_6e[i].toString();}}if(_70[_6f.label]){_6f.items.push(_70);}}}}else{if(_6e instanceof Object){for(var p in _6e){var _70={};_70[_6f.label]=this.getI18NString(p);_70[_6f.identifier]=_6e[p];_6f.items.push(_70);}}}return _6f;},_handleStoreLoadingError:function(err){if(err.status!==undefined){this.asyncStatus=err.status;this.asyncErrorMessage=err.message;this.onAsyncError();}},onAsyncOK:function(){},onAsyncError:function(){},loadStoreFromURL:function(url){this.storeURL=url;var _71={url:this.storeURL,handleAs:"json",sync:true,load:dojo.hitch(this,"_handleStoreLoadingResponse"),error:dojo.hitch(this,"_handleStoreLoadingError")};this.asyncStatus=0;this.asyncErrorMessage="";dojo.xhrGet(_71);},_handleStoreLoadingResponse:function(_72){this.setStoreData(_72);this.onAsyncOK();},_setItemAttr:function(_73,_74,_75){if(!_75){_75=this.store.getValue(_73,this.searchAttr);}this.inputFlag=1;if(this.valueField!=null&&this.valueField!=""){this.comboValue=this.store.getValue(_73,this.valueField);}else{this.comboValue=this.store.getValue(_73,this.storeDataFormat.itemValue);}this._set("item",_73);dijit.form.ComboBox.superclass._setValueAttr.call(this,this.comboValue,_74,_75);},_getValueAttr:function(){var _76=this.inherited(arguments);if(this.inputFlag==0){return _76;}else{return this.comboValue;}},_setDisplayedValueAttr:function(_77){if(this.typeAhead==true){this.textbox.value=_77;this.comboValue=_77;this.inputFlag=0;}else{this.comboValue=_77;this.inputFlag=1;}},destroy:function(){if(window[this.id]){window[this.id]=undefined;}while(this._eventsHandler.length>0){try{dojo.disconnect(this._eventsHandler.pop());}catch(e){}}this._eventsHandler=undefined;this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.NumberTextBox"]){dojo._hasResource["com.ibm.btt.dijit.NumberTextBox"]=true;dojo.provide("com.ibm.btt.dijit.NumberTextBox");dojo.declare("com.ibm.btt.dijit.NumberTextBox",[com.ibm.btt.dijit.RangeBoundTextBox,dijit.form.NumberTextBox],{numberType:"",minimumNumber:NaN,maximumNumber:NaN,locale:dojo.locale,pattern:"",decimalPlaces:0,postMixInProperties:function(){this.inherited(arguments);if(this.numberType=="byte"||this.numberType=="int"||this.numberType=="short"||this.numberType=="integer"||this.numberType=="long"||this.numberType=="bigInteger"){this.fractional=false;}else{this.fractional=true;}if(!isNaN(this.minimumNumber)){if(this.fractional){this.constraints.min=Number(this.minimumNumber);}else{this.constraints.min=parseInt(this.minimumNumber);}}if(!isNaN(this.maximumNumber)){if(this.fractional){this.constraints.max=Number(this.maximumNumber);}else{this.constraints.max=parseInt(this.maximumNumber);}}this.constraints.locale=this.locale;if(this.pattern!=""){this.constraints.pattern=this.pattern;}this.constraints.fractional=this.fractional;if(!isNaN(this.decimalPlaces)){this.decimalPlaces=Number(this.decimalPlaces);}if(this.fractional&&this.decimalPlaces>0){this.constraints.places=this.decimalPlaces;}this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},isNumber:function(_78){return /^-?\d+(\.\d+)?$/.test(_78);},validator:function(_79,_7a){var _7b;if(this.isNumber(_79)){_7b=_79;}else{_7b=this.parse(_79,this.constraints);if(!this.isNumber(_7b)&&_79!=""){this.invalidMessage=this.bundle.getMessage("invalidMessage");return false;}else{if(new RegExp("^[+-]?\\d+$").test(_7b)&&this.decimalPlaces>0){var con={};con["max"]=this.constraints["max"];con["min"]=this.constraints["min"];con["places"]=this.constraints["places"];con["fractional"]=this.constraints["fractional"];con["locale"]=this.constraints["locale"];_7b+=".";for(var i=0;i<this.decimalPlaces;i++){_7b+="0";}}}}if(this.isNumber(_7b)&&this.fractional&&this.decimalPlaces>0&&!(new RegExp("^[+-]?.+[.,]\\d{"+this.decimalPlaces+"}$").test(_79))){this.invalidMessage=this.bundle.getMessage("decimalPlacesMessage",{value:this.decimalPlaces});return false;}if(this.isNumber(_7b)&&this.numberType=="byte"&&(_7b>127||_7b<-128)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:127,min:-128});return false;}if(this.isNumber(_7b)&&this.numberType=="short"&&(_7b>32767||_7b<-32768)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:32767,min:-32768});return false;}if(this.isNumber(_7b)&&this.numberType=="int"&&(_7b>2147483647||_7b<-2147483648)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:2147483647,min:-2147483648});return false;}if(this.isNumber(_7b)&&this.numberType=="integer"&&(_7b>2147483647||_7b<-2147483648)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:2147483647,min:-2147483648});return false;}if(this.isNumber(_7b)&&this.numberType=="long"&&(_7b>9223372036854776000||_7b<-9223372036854776000)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:9223372036854776000,min:-9223372036854776000});return false;}if(_7b.toString().replace(new RegExp(".","g"),"").length>16){this.invalidMessage=this.bundle.getMessage("numberOutOfRange");return false;}return this.inherited(arguments);},_setValueAttr:function(_7c,_7d,_7e){if(typeof _7c==="string"&&_7c!==""){var _7f=Number(_7c);if(isNaN(_7f)&&_7c&&_7c!=""){var _80={};if(this.constraints["pattern"]){_80["pattern"]=this.constraints["pattern"];}_7c=this.parse(_7c,_80);}else{_7c=_7f;}}this.inherited(arguments);},create:function(_81,_82){this.inherited(arguments);var _83=dojo.attr(_82,"value");if(_83&&_83!=""){var _84={};if(this.constraints["pattern"]){_84["pattern"]=this.constraints["pattern"];}_81.value=this.parse(_83,_84);if(isNaN(_81.value)){_81.value=Number(_83);}this.set("value",_81.value);}},serialize:function(val,_85){return this.format(val,_85);}});}if(!dojo._hasResource["com.ibm.btt.dijit.CurrencyTextBox"]){dojo._hasResource["com.ibm.btt.dijit.CurrencyTextBox"]=true;dojo.provide("com.ibm.btt.dijit.CurrencyTextBox");dojo.declare("com.ibm.btt.dijit.CurrencyTextBox",[com.ibm.btt.dijit.NumberTextBox,dijit.form.CurrencyTextBox],{decimalPlaces:0,postMixInProperties:function(){this.inherited(arguments);this.decimalPlaces=this.constraints.places;},serialize:function(val,_86){return isNaN(val)?"":(val.toString?val.toString():"");}});}if(!dojo._hasResource["com.ibm.btt.dijit.DateTextBox"]){dojo._hasResource["com.ibm.btt.dijit.DateTextBox"]=true;dojo.provide("com.ibm.btt.dijit.DateTextBox");dojo.declare("com.ibm.btt.dijit.DateTextBox",[com.ibm.btt.dijit.RangeBoundTextBox,dijit.form.DateTextBox],{maximumDate:"",minimumDate:"",locale:dojo.locale,pattern:"",postMixInProperties:function(){this.inherited(arguments);this.lang=this.locale;this.constraints.locale=this.locale;if(this.minimumDate!=""){if(this.isToday(this.minimumDate)){this.constraints.min=this.parseToday(this.minimumDate);}else{this.constraints.min=dojo.date.stamp.fromISOString(this.minimumDate);}}if(this.maximumDate!=""){if(this.isToday(this.maximumDate)){this.constraints.max=this.parseToday(this.maximumDate);}else{this.constraints.max=dojo.date.stamp.fromISOString(this.maximumDate);}}if(this.pattern!=""){this.constraints.datePattern=this.pattern;}},create:function(_87,_88){if(_87.value==null){var dv=dojo.attr(_88,"value")||_88.value;if(dv!=null&&dv!=""&&_87.pattern!=null&&_87.pattern!=""){try{var _89={selector:"date",datePattern:_87.pattern,fullYear:true};var val=dojo.date.locale.parse(dv,_89);_87.value=val;}catch(e){}}}this.inherited(arguments);},serialize:function(val,_8a){if(val.toGregorian){val=val.toGregorian();}if(this.pattern!=""){return this.format(val,_8a);}else{return dojo.date.stamp.toISOString(val,_8a);}},isToday:function(_8b){if(_8b.replace(" ","").toLowerCase().indexOf("today")>-1){return true;}else{return false;}},parseToday:function(_8c){var _8d=_8c.replace("today","");var _8e="";var _8f=0;var _90=0;var day=0;var _91=new Date();_91.setHours(0);_91.setMinutes(0);_91.setSeconds(0);_91.setMilliseconds(0);if(_8d.indexOf("+")>-1){_8e="plus";_8d=_8d.replace("+","#");}if(_8d.indexOf("-")>-1){_8e="sub";_8d=_8d.replace("-","#");}if(_8d.indexOf("y")>-1){_8f=_8d.substring(_8d.lastIndexOf("#")+1,_8d.indexOf("y"));_8d=_8d.replace("y","#");}if(_8d.indexOf("m")>-1){_90=_8d.substring(_8d.lastIndexOf("#")+1,_8d.indexOf("m"));_8d=_8d.replace("m","#");}if(_8d.indexOf("d")>-1){day=_8d.substring(_8d.lastIndexOf("#")+1,_8d.indexOf("d"));}if("plus"==_8e){_91=dojo.date.add(_91,"year",+_8f);_91=dojo.date.add(_91,"month",+_90);_91=dojo.date.add(_91,"day",+day);}else{_91=dojo.date.add(_91,"year",-_8f);_91=dojo.date.add(_91,"month",-_90);_91=dojo.date.add(_91,"day",-day);}return _91;},_setValueAttr:function(_92,_93,_94){if(typeof (_92)=="string"||_92 instanceof String){var val=null;if(this.pattern==""){_92=dojo.date.stamp.fromISOString(_92);}else{var _95={selector:"date",datePattern:this.pattern,fullYear:true};_92=dojo.date.locale.parse(_92,_95);}}this.inherited(arguments);},_getValueAttr:function(){if(this.textbox.value==""){return null;}else{return this.inherited(arguments);}},_handleOnChange:function(_96,_97){if(this._lastValueReported==undefined&&(_97===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_96;}this._pendingOnChange=this._pendingOnChange||(typeof _96!=typeof this._lastValueReported)||(this._lastValueReported!=null&&_96==null)||(this._lastValueReported==null&&_96!=null);var _98=this.compare(_96,this._lastValueReported)!=0;if(_96==null&&null==this._lastValueReported){_98=false;}this._pendingOnChange=this._pendingOnChange||_98;if((this.intermediateChanges||_97||_97===undefined)&&this._pendingOnChange){this._lastValueReported=_96;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);}this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(_96);}),0);}}}});}if(!dojo._hasResource["com.ibm.btt.util.AjaxUtil"]){dojo._hasResource["com.ibm.btt.util.AjaxUtil"]=true;dojo.provide("com.ibm.btt.util.AjaxUtil");(function(){AjaxUtil={ajaxOperationUrl:"Ajax",constants:{"BTT_OPERATIONNAME":"dse_operationName","BTT_PAGEID":"dse_pageId","BTT_SESSIONID":"dse_sessionId","BTT_ERRORPAGE":"dse_errorPage","BTT_PROCESSORID":"dse_processorId","BTT_TIMEZONE":"dse_timezone","BTT_AJAXINPUTMAP":"dse_ajaxInputMapping","BTT_AJAXOUTPUTMAP":"dse_ajaxOutputMapping","BTT_SUBMITFORMID":"dse_submitFormId"},xhrPost:function(_99,_9a){_99.postData=dojo.toJson(_9a);if(typeof _99.url=="undefined"){_99.url=this.ajaxOperationUrl;}if(typeof _99.handleAs=="undefined"){_99.handleAs="text";}if(typeof _99.success=="undefined"){_99.load=function(e){console.info("Ajax request response from ajax channel. "+e);};}else{_99.load=_99.success;delete _99.success;}if(typeof _99.error=="undefined"){_99.error=function(e){console.info("Ajax request error. "+e);};}dojo.xhrPost(_99);},getTimzone:function(){var d=new Date();return (-d.getTimezoneOffset()/60).toString();},prepareBTTParams:function(_9b){var obj={};if(_9b!=undefined){if(_9b[this.constants.BTT_ERRORPAGE]){obj[this.constants.BTT_ERRORPAGE]=_9b[this.constants.BTT_ERRORPAGE];}if(_9b[this.constants.BTT_OPERATIONNAME]){obj[this.constants.BTT_OPERATIONNAME]=_9b[this.constants.BTT_OPERATIONNAME];}if(_9b[this.constants.BTT_PAGEID]){obj[this.constants.BTT_PAGEID]=_9b[this.constants.BTT_PAGEID];}else{obj[this.constants.BTT_PAGEID]="-1";}if(_9b[this.constants.BTT_PROCESSORID]){obj[this.constants.BTT_PROCESSORID]=_9b[this.constants.BTT_PROCESSORID];}if(_9b[this.constants.BTT_SESSIONID]){obj[this.constants.BTT_SESSIONID]=_9b[this.constants.BTT_SESSIONID];}if(_9b[this.constants.BTT_TIMEZONE]){obj[this.constants.BTT_TIMEZONE]=_9b[this.constants.BTT_TIMEZONE];}else{obj[this.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();}if(_9b[this.constants.BTT_AJAXINPUTMAP]){obj[this.constants.BTT_AJAXINPUTMAP]=_9b[this.constants.BTT_AJAXINPUTMAP];}if(_9b[this.constants.BTT_AJAXOUTPUTMAP]){obj[this.constants.BTT_AJAXOUTPUTMAP]=_9b[this.constants.BTT_AJAXOUTPUTMAP];}}return obj;}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractAjaxMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractAjaxMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractAjaxMixin");dojo.declare("com.ibm.btt.dijit.AbstractAjaxMixin",null,{_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Form"),bttParams:"",asyncCode:"",asyncStatus:0,asyncErrorMessage:"",asyncOperation:"",callAsyncOperation:function(_9c,_9d,_9e,_9f,_a0){var _a1=this.get("value");var _a2={};if(this.bttParams){_a2=dojo.fromJson(this.bttParams);}_a2[AjaxUtil.constants.BTT_OPERATIONNAME]=_9c;_a2=AjaxUtil.prepareBTTParams(_a2);if(_9f===true||_9f==="true"){ScreenCover.getInstance().show();}AjaxUtil.xhrPost({success:dojo.hitch(this,"_handleOperationResponse",_9d,_a0),error:dojo.hitch(this,"_handleOperationError",_9d),"timeout":_9e},dojo.mixin(_a1,_a2));},callAsyncOpWithMapping:function(_a3,_a4,_a5,_a6,_a7,_a8,_a9){var _aa=this.get("value");var _ab={};if(this.bttParams){_ab=dojo.fromJson(this.bttParams);}_ab[AjaxUtil.constants.BTT_OPERATIONNAME]=_a3;_ab[AjaxUtil.constants.BTT_AJAXINPUTMAP]=_a6;_ab[AjaxUtil.constants.BTT_AJAXOUTPUTMAP]=_a7;_ab=AjaxUtil.prepareBTTParams(_ab);if(_a8===true||_a8==="true"){ScreenCover.getInstance().show();}AjaxUtil.xhrPost({success:dojo.hitch(this,"_handleOperationResponse",_a4,_a9),error:dojo.hitch(this,"_handleOperationError",_a4),"timeout":_a5},dojo.mixin(_aa,_ab));},_handleOperationResponse:function(_ac,_ad,_ae){try{var _af=dojo.fromJson(_ae||null);_ae=_af;}catch(e){this._handleHTMLResponse(_ae);return;}this.asyncCode=_ac;var _b0=null;var _b1=null;var _b2=null;if(dojo.isArray(_ae)){_b0=_ae[0].data;if(_ae[0].validationError){_b1=_ae[0].singleFieldErrors;_b2=_ae[0].crossFieldErrors;}}else{_b0=_ae;}if(_b0){if(_ad&&dijit.byId(_ad)){dijit.byId(_ad).set("value",_b0);}else{this.set("value",_b0);}}if((_b1&&_b1.length!=0)||(_b2&&_b2.length!=0)){var _b3=this._getWidgetMap();this._handleSingleFieldErrors(_b1,_b3);this._handleCrossFieldErrors(_b2,_b3);}ScreenCover.getInstance().hide();this.onAsyncOK();},_handleHTMLResponse:function(_b4){(new dijit.Dialog({title:this._bundle.getMessage("errorDialogTitle"),content:_b4})).show();},_getWidgetMap:function(){var map={};dojo.forEach(this.getDescendants(),function(_b5){if(!_b5.name){return;}var _b6=map[_b5.name]||(map[_b5.name]=[]);_b6.push(_b5);});return map;},_handleSingleFieldErrors:function(_b7,_b8){if(_b7!=null){for(var i=0;i<_b7.length;i++){if(_b8[_b7[i].id]){var _b9=_b8[_b7[i].id];if(_b9){for(var j=0;j<_b9.length;j++){if(_b9[j].showErrorMessage){_b9[j].showErrorMessage(_b7[i].msg);}}}}}}},_handleCrossFieldErrors:function(_ba,_bb){if(_ba!=null){var _bc=_bb["dse_errorMessages"];if(_bc){for(var j=0;j<_bc.length;j++){_bc[j].displayMessageArray(_ba);}}}},setStoreData:function(obj){var map={};dojo.forEach(this.getDescendants(),function(_bd){if(!_bd.name){return;}var _be=map[_bd.name]||(map[_bd.name]=[]);_be.push(_bd);});for(var _bf in map){if(!map.hasOwnProperty(_bf)){continue;}var _c0=map[_bf],_c1=dojo.getObject(_bf,false,obj);if(_c1===undefined){continue;}if(!dojo.isArray(_c1)){_c1=[_c1];}dojo.forEach(_c0,function(w,i){if(w.setStoreData){w.setStoreData(_c1[i]);}});}},_handleOperationError:function(_c2,_c3){if(_c3.dojoType==="timeout"){this.asyncCode=_c2;this.asyncStatus=0;this.asyncErrorMessage=_c3.message;this.onAsyncTimeOut();}else{if(_c3.status!==undefined){this.asyncCode=_c2;this.asyncStatus=_c3.status;this.asyncErrorMessage=_c3.message;this.onAsyncError();}}ScreenCover.getInstance().hide();},onAsyncTimeOut:function(){},onAsyncOK:function(){},onAsyncError:function(){},_getValueAttr:function(){var obj={};var _c4=this;dojo.forEach(this.getDescendants(),function(_c5){var _c6=_c5.name;if((!_c6||(_c5.disabled&&!(_c5 instanceof com.ibm.btt.dijit.RichTextEditor))||_c5.isNotSubmitted)&&(!_c5.storeDataName||!_c5.getEditableStroeData||((_c5 instanceof com.ibm.btt.dijit.Grid)&&_c5.readOnly))){return;}if(typeof (_c5.ajaxSubmit)!="undefined"&&_c5.ajaxSubmit==false){return;}if(_c5.storeDataName&&_c5.getEditableStroeData&&((_c5 instanceof com.ibm.btt.dijit.Grid)&&_c5.editable&&!_c5.readOnly)&&_c5.getEditableStroeData()){dojo.setObject(_c5.storeDataName,_c4._convertValueToString(_c5.getEditableStroeData()),obj);}var _c7=_c5.get("value");if(_c7===undefined){return;}if((_c5 instanceof com.ibm.btt.dijit.Grid)&&(_c7==null||_c7==undefined)){return;}if((_c5 instanceof com.ibm.btt.dijit.Grid)&&_c7!=null&&_c7!=undefined){if(!_c5.launchNew){_c6="dse_tableSelectedRows";}_c5.launchNew=false;}if(_c7==null){_c7="";}if(typeof _c5.checked!=="undefined"){if(/Radio/.test(_c5.declaredClass)){if(_c7!==false){dojo.setObject(_c6,_c4._convertValueToString(_c7),obj);}else{_c7=dojo.getObject(_c6,false,obj);if(_c7===undefined){dojo.setObject(_c6,null,obj);}}}else{if(_c7!==false){dojo.setObject(_c6,_c4._convertValueToString(_c7),obj);}}}else{if(typeof _c7=="number"&&_c5.serialize){_c7=_c5.serialize(_c7,_c5.constraints);}else{if(_c7!=null&&_c7 instanceof Date){if(_c5.serialize){_c7=_c5.serialize(_c7,_c5.constraints);}else{_c7=_c7.getFullYear()+"-"+(_c7.getMonth()+1)+"-"+_c7.getDate();}}}_c7=_c4._convertValueToString(_c7);var _c8=dojo.getObject(_c6,false,obj);if(typeof _c8!="undefined"){if(dojo.isArray(_c8)){_c8.push(_c7);}else{dojo.setObject(_c6,[_c8,_c7],obj);}}else{dojo.setObject(_c6,_c7,obj);}}});for(var p in obj){if(obj.hasOwnProperty(p)){if(p.indexOf("REMOVEBEFORESUBMIT_")>=0){delete obj[p];}}}return obj;},_convertValueToString:function(_c9){if(_c9===null){return null;}if(typeof _c9==="string"){return _c9;}else{if(typeof _c9==="number"||typeof _c9==="boolean"){return String(_c9);}else{if(typeof _c9==="object"){if(dojo.isArray(_c9)){for(var i=0;i<_c9.length;i++){_c9[i]=arguments.callee(_c9[i]);}}else{for(var p in _c9){if(p.indexOf("_")!=0){_c9[p]=arguments.callee(_c9[p]);}}}return _c9;}else{return null;}}}},_setValueAttr:function(obj){var map={};var _ca={};dojo.forEach(this.getDescendants(),function(_cb){if(_cb.storeDataName){var _cc=_ca[_cb.storeDataName]||(_ca[_cb.storeDataName]=[]);_cc.push(_cb);}if(!_cb.name){return;}var _cd=map[_cb.name]||(map[_cb.name]=[]);_cd.push(_cb);});for(var _ce in _ca){var _cf=_ca[_ce];var _d0=dojo.getObject(_ce,false,obj);if(_d0!==undefined){dojo.forEach(_cf,function(w,i){w.setStoreData(i==0?_d0:dojo.clone(_d0));});}}for(var _ce in map){if(!map.hasOwnProperty(_ce)){continue;}var _cf=map[_ce],_d1=dojo.getObject(_ce,false,obj);if(_d1===undefined){continue;}if(!dojo.isArray(_d1)){_d1=[_d1];}if(typeof _cf[0].checked!=="undefined"){dojo.forEach(_cf,function(w,i){w.set("value",dojo.indexOf(_d1,w.value)!=-1);});}else{if(_cf[0].multiple){_cf[0].set("value",_d1);}else{dojo.forEach(_cf,function(w,i){w.set("value",_d1[i]);});}}}},validValue:null,_getValidValueAttr:function(){var obj={};var _d2=this;dojo.forEach(this.getDescendants(),function(_d3){var _d4=_d3.name;if((!_d4||_d3.disabled||_d3.isNotSubmitted)&&(!_d3.storeDataName||!_d3.getEditableStroeData||((_d3 instanceof com.ibm.btt.dijit.Grid)&&_d3.readOnly&&!_d3.disabled))){return;}if(!_d3.isErasable||!_d3.isErasable()){if(_d3.state&&!(_d3.get("state")==""||_d3.get("state")=="Normal")){return;}}if(typeof (_d3.ajaxSubmit)!="undefined"&&_d3.ajaxSubmit==false){return;}if(_d3.storeDataName&&_d3.getEditableStroeData&&((_d3 instanceof com.ibm.btt.dijit.Grid)&&!_d3.readOnly)){var _d5=_d3.getEditableStroeData();if(_d5){dojo.setObject(_d3.storeDataName,_d2._convertValueToString(_d5),obj);}}var _d6=_d3.get("value");if(_d6===undefined){return;}if((_d3 instanceof com.ibm.btt.dijit.Grid)&&_d6!=null&&_d6!=undefined){if(!_d3.launchNew){_d4="dse_tableSelectedRows";}_d3.launchNew=false;}if(_d6==null){_d6="";}if(typeof _d3.checked!=="undefined"){if(/Radio/.test(_d3.declaredClass)){if(_d6!==false){dojo.setObject(_d4,_d2._convertValueToString(_d6),obj);}else{_d6=dojo.getObject(_d4,false,obj);if(_d6===undefined){dojo.setObject(_d4,null,obj);}}}else{if(_d6!==false){dojo.setObject(_d4,_d2._convertValueToString(_d6),obj);}}}else{if(typeof _d6=="number"&&_d3.serialize){_d6=_d3.serialize(_d6,_d3.constraints);}else{if(_d6!=null&&_d6 instanceof Date){if(_d3.serialize){_d6=_d3.serialize(_d6,_d3.constraints);}else{_d6=_d6.getFullYear()+"-"+(_d6.getMonth()+1)+"-"+_d6.getDate();}}}_d6=_d2._convertValueToString(_d6);if(_d3.type!=="hidden"&&((_d3.params.value&&_d3.params.value==_d6)||(!_d3.params.value&&""==_d6))){return;}var _d7=dojo.getObject(_d4,false,obj);if(typeof _d7!="undefined"){if(dojo.isArray(_d7)){_d7.push(_d6);}else{dojo.setObject(_d4,[_d7,_d6],obj);}}else{dojo.setObject(_d4,_d6,obj);}}});for(var p in obj){if(obj.hasOwnProperty(p)){if(p.indexOf("REMOVEBEFORESUBMIT_")>=0){delete obj[p];}}}return obj;}});}if(!dojo._hasResource["com.ibm.btt.dijit._FormXValidationMixin"]){dojo._hasResource["com.ibm.btt.dijit._FormXValidationMixin"]=true;dojo.provide("com.ibm.btt.dijit._FormXValidationMixin");dojo.declare("com.ibm.btt.dijit._FormXValidationMixin",null,{xValidations:[],xValid:true,_xHintWidget:null,idxPostfix:null,getPW:function(id,_d8){var obj=dijit.byId(id);if(!obj){console.error("xValitate: Failed to get property["+_d8+"] because cannot find the widget[id="+id+"]");return undefined;}return obj.get(_d8);},getW:function(id){return dijit.byId(id);},runWF:function(id,_d9,_da){var _db=dijit.byId(id);if(!_db){console.error("xValitate: Failed to run function["+_d9+"] because cannot find the widget[id="+id+"]");return undefined;}var _dc=[];for(var i=2;i<arguments.length;i++){_dc[i-2]=arguments[i];}var _dd=undefined;try{_dd=_db[_d9].apply(_db,_dc);}catch(e){console.error("xValitate: An error occured while running function["+_d9+"]. "+e.toString());}return _dd;},xValidate:function(_de){if(!_de||_de.length==0){return "";}var _df=null;for(var i=0;i<_de.length;i++){if(!_de[i].cond.call(this)){_df=_de[i];break;}}return _df;},_getActiveXValidationsForWidget:function(_e0){return this._getActiveXValidations(this._getXValidationRuleByWidget(_e0),_e0);},_getActiveXValidations:function(_e1,_e2){return dojo.filter(_e1,function(_e3){return dojo.every(_e3.widgets,function(id){return ((id==_e2)||(id!=_e2&&dijit.byId(id).get("value")!=""));});});},_getXValidationRuleByWidget:function(_e4){var _e5=dojo.filter(this.xValidations,function(_e6){return dojo.indexOf(_e6.widgets,_e4)>=0;});return _e5;},showXValidationMsg:function(_e7,_e8){if(_e8){this._hideXHint();this._xHintWidget=_e8;dijit.showTooltip(this.getI18NString(_e7),_e8.domNode);}},_hideXHint:function(){if(this._xHintWidget){dijit.hideTooltip(this._xHintWidget.domNode);this._xHintWidget=null;}},destroy:function(){this._hideXHint();this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Form"]){dojo._hasResource["com.ibm.btt.dijit.Form"]=true;dojo.provide("com.ibm.btt.dijit.Form");dojo.declare("com.ibm.btt.dijit.Form",[dijit.form.Form,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractAjaxMixin,com.ibm.btt.dijit._FormXValidationMixin],{bttErrorPage:"",validateOnSubmit:true,hiddenParamHandle:{},_isStarted:false,bttAction:"",_events:[],_clickedButton:null,attributeMap:dojo.delegate(dijit.form.Form.prototype.attributeMap,{}),create:function(){this.submitButton=new Array();this.submitButtonOS=new Array();this.inherited(arguments);this._events.push(dojo.connect(this.domNode,"onkeydown",this,"_onKey"));if(this._fastTab){this._events.push(dojo.connect(this.domNode,"onkeyup",this,"_focusNext"));}},onLoaded:function(){},onFormSubmit:function(){},_setXValidationsAttr:function(_e9){this.xValidations=_e9;if(this.xValidate(this.xValidations)){this.xValid=false;this.setSubmitButtonState();}},_xValidateByWidget:function(_ea){var _eb=this.xValidate(this._getActiveXValidationsForWidget(_ea.get("id")));var _ec=_ea;if(!_eb){_eb=this.xValidate(this._getActiveXValidations(this.xValidations));_ec=_eb?dijit.byId(_eb.widgets[0]):_ea;}if(_eb){this.showXValidationMsg(_eb.hint,_ec);}var _ed;if(_ed=this.xValidate(this.xValidations)){if(!_eb){this.showXValidationMsg(_ed.hint,dijit.byId(_ed.widgets[0]));}this.xValid=false;}else{this.xValid=true;this._hideXHint();}this.setSubmitButtonState();},fireWidgetBlurEvent:function(_ee){this._xValidateByWidget(_ee);},fireWidgetChangeEvent:function(_ef){this._xValidateByWidget(_ef);this.onWidgetChange();},onWidgetChange:function(){},connectChildren:function(_f0){this.inherited(arguments);var _f1=this._childConnections;var _f2=this;var _f3=this.getDescendants();dojo.forEach(dojo.filter(_f3,function(_f4){return _f4.onChange;}),function(_f5){_f1.push(_f2.connect(_f5,"onChange",dojo.hitch(_f2,"fireWidgetChangeEvent",_f5)));_f1.push(_f2.connect(_f5,"onBlur",dojo.hitch(_f2,"fireWidgetBlurEvent",_f5)));});},_onWidgetValidateStatesChange:function(_f6){if(this.isValid()&&!this.xValid){if((inValidRule=this.xValidate(this.xValidations))){this.xValid=false;this.showXValidationMsg(inValidRule.hint,dijit.byId(inValidRule.widgets[0]));}else{this.xValid=true;this._hideXHint();}}this.setSubmitButtonState();},onSubmit:function(e){var _f7=this._querySubmitButton(e);if(_f7&&_f7.bttParams){this.handleButtonSubmit(_f7);}else{this.parameterHandler(this.bttParams);}if(this.validateOnSubmit){if(!this.isValid()||!this.xValid){return false;}}dojo.forEach(this.getDescendants(),function(_f8){if(_f8.onFormSubmit){_f8.onFormSubmit();}});if(this.onFormSubmit){this.onFormSubmit();}return true;},_querySubmitButton:function(e){if(this._lastClickedButton){return this._lastClickedButton;}},setSubmitButtonState:function(){if(this.validateOnSubmit){if((this.get("state")==""||this.get("state")=="Normal")&&this.xValid){for(var i=0;i<this.submitButton.length;i++){var btn=this.submitButton[i];btn.set("disabled",btn.get("inValid"));}}else{for(var i=0;i<this.submitButton.length;i++){this.submitButton[i].set("disabled",true);}}}},handleButtonSubmit:function(_f9){if(_f9&&_f9.bttParams&&_f9.bttParams!=""){this.parameterHandler(_f9.bttParams);}},startup:function(){if(this._isStarted){return;}this._isStarted=true;this.inherited(arguments);var _fa=this;var _fb=this._childWatches;var _fc=this._childConnections;dojo.forEach(dojo.filter(this.getDescendants(),function(_fd){return _fd.get("type")&&_fd.get("type").toLowerCase()=="submit";}),function(_fe){_fa.submitButton.push(_fe);_fa.submitButtonOS.push(_fe.get("disabled"));_fb.push(_fe.watch("isValid",function(_ff,_100,_101){_fa.setSubmitButtonState();}));});if(this.bttParams!=null&&this.bttParams!=""){this.parameterHandler(this.bttParams);}if(this.bttErrorPage!=null&&this.bttErrorPage!=""){this.errorPageHandler();}this.watch("state",this._onWidgetValidateStatesChange);this.onWidgetChange();this.setSubmitButtonState();},parameterHandler:function(e){var _102=typeof e=="string"?dojo.fromJson(e):e;_102[AjaxUtil.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();if(_102["dse_nextEventName"]){var temp={};temp[AjaxUtil.constants.BTT_SUBMITFORMID]=this.get("id");_102=dojo.mixin(temp,_102);}this.destroyHiddenParams();for(var _103 in _102){if(typeof (_103)!="undefined"){var _104=_102[_103];this.hiddenParamHandle[_103]=dojo.create("input",{type:"hidden",name:_103,value:_104});dojo.place(this.hiddenParamHandle[_103],this.containerNode,"last");}}},destroyHiddenParams:function(){for(var _105 in this.hiddenParamHandle){dojo.destroy(this.hiddenParamHandle[_105]);}this.hiddenParamHandle={};},errorPageHandler:function(){var node=dojo.create("input",{type:"hidden",name:AjaxUtil.constants["BTT_ERRORPAGE"],value:this.bttErrorPage});dojo.place(node,this.containerNode,"last");},_findWidgetByNode:function(_106){var _107;for(var node=_106;node&&node!=this.domNode;node=node.parentNode){var id=node.getAttribute("widgetId");if(id){_107=dijit.byId(id);break;}}return _107;},_onKey:function(evt){this._clickedButton=null;if(evt.keyCode!=dojo.keys.ENTER){return evt.keyCode;}var _108=this._findWidgetByNode(evt.target);if(_108&&!_108.isInstanceOf(com.ibm.btt.dijit.Button)&&!_108.isInstanceOf(com.ibm.btt.dijit.Anchor)&&!_108.isInstanceOf(com.ibm.btt.dijit.TextArea)){if((evt.ctrlKey||evt.metaKey)&&this.bttAction!="NoAction"){dojo.stopEvent(evt);this.submit();}else{evt.preventDefault();}return false;}return evt.keyCode;},_computeFocusOrder:function(){var WS=[];function _109(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType!=1){continue;}var wid=node.getAttribute("widgetId");if(!wid){_109(node);continue;}var wgt=dijit.byId(wid);if(!wgt){continue;}if(wgt.isInstanceOf(com.ibm.btt.dijit.Group)){_109(wgt.containerNode);continue;}WS.push(wgt);}};_109(this.containerNode);WS=dojo.filter(WS,function(w){return (parseInt(w.tabIndex)>-1||w.tabIndex==""||w.tabIndex==undefined);});WS=WS.sort(function(wa,wb){var ta=parseInt(wa.tabIndex);var tb=parseInt(wb.tabIndex);ta=isNaN(ta)?0:ta;tb=isNaN(tb)?0:tb;return ta-tb;});return dojo.map(WS,function(w){return w.id;});},_fastTab:true,_focusNext:function(evt){if(!this._fastTab||evt.keyCode!=dojo.keys.ENTER){return evt.keyCode;}if(!this._focusWidgets){this._focusWidgets=this._computeFocusOrder();}var cw=this._findWidgetByNode(evt.target);if(cw&&cw.get("state")==""&&cw.grid==undefined&&cw.isInstanceOf(com.ibm.btt.dijit.ValidationTextBox)&&!cw.isInstanceOf(com.ibm.btt.dijit.TextArea)){var p=-1;for(var i=0;i<this._focusWidgets.length;i++){if(p<0){if(this._focusWidgets[i]==cw.id){p=i;continue;}}else{var w=dijit.byId(this._focusWidgets[i]);if(w&&w.isFocusable()){w.focus();break;}}}}},destroy:function(){if(window[this.id]){window[this.id]=undefined;}this.destroyHiddenParams();while(this._events.length>0){try{dojo.disconnect(this._events.pop());}catch(e){}}this._events=undefined;this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Image"]){dojo._hasResource["com.ibm.btt.dijit.Image"]=true;dojo.provide("com.ibm.btt.dijit.Image");dojo.declare("com.ibm.btt.dijit.Image",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.CellWidgetMixin],{templateString:"<img />",location:"/",alt:"",action:"#",target:"_parent",bttParams:"",tabIndex:0,disabled:false,width:"",height:"",url:"#",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{width:{node:"domNode",type:"attribute"},height:{node:"domNode",type:"attribute"},alt:{node:"domNode",type:"attribute"},action:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);var ti=parseInt(this.tabIndex);if(isNaN(ti)){this.tabIndex=0;}else{this.tabIndex=ti;}this.disabled=(this.disabled===true||this.disabled==="true");if(this.disabled){this.domNode.tabIndex=-1;}else{this.domNode.tabIndex=this.tabIndex;}},_parameterHandler:function(e){var _10a="";var _10b=dojo.fromJson(e);for(var _10c in _10b){if(typeof (_10c)!="undefined"){var _10d=_10b[_10c];if(_10a==""){_10a+=_10c+"="+_10d;}else{_10a+="&"+_10c+"="+_10d;}}}return _10a;},_setActionAttr:function(_10e){this.action=_10e;var _10f="";if(this.bttParams!=""&&this.action!=""&&this.action!=="#"){_10f=this.action;if(this.bttParams!=""){if(_10f.indexOf("?")==-1){_10f+="?";}if(this.bttParams!=""){var _110=this._parameterHandler(this.bttParams);if(_10f.substring(_10f.length-1)=="?"){_10f+=_110;}else{_10f+="&"+_110;}}}}else{_10f="javascript:void(0)";}this.connect(this.domNode,"ondijitclick",this._onClick);this.url=_10f;},_setDisabledAttr:function(_111){this.disabled=(_111===true||_111==="true");if(this.disabled){this.domNode.tabIndex=-1;}else{this.domNode.tabIndex=this.tabIndex;}},focus:function(){this.domNode.focus();},applyAccessKey:function(){if(this.accessKey){this.domNode.setAttribute("accessKey",this.accessKey);}},_setLocationAttr:function(_112){this.location=_112;if(typeof (_112)=="string"&&_112!=""){this.domNode.src=_112;}},_setAltAttr:function(_113){this.alt=_113;this.domNode.alt=StringUtil.removeWarp(this.getI18NString(_113));},_onClick:function(e){if(this.disabled||this.onClick(e)===false){e.preventDefault();}else{if(this.url!=="#"){window.open(this.url,this.target);}}},onClick:function(e){},_setWidthAttr:function(_114){if(_114!=""){this.width=_114;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_115){if(_115!=""){this.height=_115;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Label"]){dojo._hasResource["com.ibm.btt.dijit.Label"]=true;dojo.provide("com.ibm.btt.dijit.Label");dojo.declare("com.ibm.btt.dijit.Label",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.CellWidgetMixin],{templateString:"<label class='dijitLabelBase' dojoAttachPoint='labelContainer' ${nameAttrSetting} ></label>",text:"",name:"","for":"",width:"",height:"",textWrap:false,isNotSubmitted:true,fieldReference:"",postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{text:{node:"domNode",type:"innerHTML"},"for":{node:"domNode"}}),_setTextAttr:function(_116){this.text=_116;this.domNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_116));},_setTextWrapAttr:function(_117){this.textWrap=_117;if(this.textWrap){dojo.addClass(this.domNode,"dijitLabelWrap");}else{dojo.removeClass(this.domNode,"dijitLabelWrap");}},_setValueAttr:function(_118){this.set("text",_118);},_getValueArrt:function(name){return this.get("text");},_setForAttr:function(_119){this.domNode.htmlFor=_119;},_setWidthAttr:function(_11a){if(this.width!=""){this.width=_11a;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_11b){if(this.height!=""){this.height=_11b;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.RadioButton"]){dojo._hasResource["com.ibm.btt.dijit.RadioButton"]=true;dojo.provide("com.ibm.btt.dijit.RadioButton");dojo.declare("com.ibm.btt.dijit.RadioButton",[dijit.form.RadioButton,com.ibm.btt.dijit.AbstractWidgetMixin],{isChecked:false,text:"",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.RadioButton.prototype.attributeMap,{text:{node:"labelNode"},isChecked:{node:"domNode"}}),postMixInProperties:function(){if(this.isChecked==true){this.checked="checked";this.params.checked="checked";}this.inherited(arguments);},create:function(){this.labelNode=dojo.create("label",{"class":"dijitLabelBase"},this.domNode,"after");this.inherited(arguments);this.labelNode.htmlFor=this.id;dojo.place(this.labelNode,this.domNode,"after");if(this.width&&this.width!=""){this.set("width",this.width);}if(this.height&&this.height!=""){this.set("height",this.height);}if(this.visibility&&this.visibility!=""){this.set("visibility",this.visibility);}},_setIsCheckedAttr:function(_11c){this.set("checked",_11c);},_setCheckedAttr:function(_11d){if(_11d==false||_11d=="false"||_11d==""){this.isChecked=false;}else{this.isChecked=true;}this.inherited(arguments);},_setTextAttr:function(_11e){this.text=_11e;this.labelNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_11e));},_setStyleAttr:function(_11f){dojo.attr(this.labelNode,"style",_11f);},_setClassAttr:function(_120){dojo.attr(this.labelNode,"class",_120);},_setHintAttr:function(_121){this.hint=_121;var _122=StringUtil.removeWarp(this.getI18NString(_121));var node=this.textbox||this.focusNode||this.domNode;node.title=_122;this.labelNode.title=_122;},_setVisibilityAttr:function(_123){var d="";var v="inherit";switch(_123){case "gone":d="none";v="inherit";break;case "hidden":d="";v="hidden";break;default:d="";v="inherit";}this.visibility=_123;dojo.style(this.domNode,"display",d);dojo.style(this.domNode,"visibility",v);dojo.style(this.labelNode,"display",d);dojo.style(this.labelNode,"visibility",v);},_setReadOnlyAttr:function(_124){this.inherited(arguments);if(_124==="true"||_124===true){this.labelNode.htmlFor="";}else{this.labelNode.htmlFor=this.id;}},_onClick:function(e){this.inherited(arguments);if(dojo.isIE&&this.readOnly&&this.focusNode.form){dojo.stopEvent(e);dojo.query("INPUT[type=radio]",this.focusNode.form).forEach(dojo.hitch(this,function(_125){if(_125.name==this.name&&_125.form==this.focusNode.form){var _126=dijit.getEnclosingWidget(_125);if(_126&&"checked" in _126){_126.set("checked",_126.checked);}}}));}},_setTextWrapAttr:function(_127){this.textWrap=_127;if(this.textWrap){dojo.addClass(this.labelNode,"dijitLabelWrap");}else{dojo.removeClass(this.labelNode,"dijitLabelWrap");}},_setWidthAttr:function(_128){if(this.width!=""){this.width=_128;var _129=_128.replace(new RegExp("px","gm"),"");try{_129=Number(_129);}catch(e){console.error("Illegal input argument. Can not convert input width:"+_128+" to number.");return;}var box=dojo.marginBox(this.domNode);var _12a=_129-box.w;if(_12a<0){_12a=0;}dojo.style(this.labelNode,"width",_12a+"px");}},_setHeightAttr:function(_12b){if(this.height!=""){this.height=_12b;var _12c=_12b.replace(new RegExp("px","gm"),"");dojo.style(this.labelNode,"height",_12c+"px");}},_onFocus:function(){this.inherited(arguments);if(!this.text||this.text===""||this.text===null){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}},destroy:function(){this.inherited(arguments);dojo.destroy(this.labelNode);this.labelNode=null;}});}if(!dojo._hasResource["com.ibm.btt.dijit.RichTextEditor"]){dojo._hasResource["com.ibm.btt.dijit.RichTextEditor"]=true;dojo.provide("com.ibm.btt.dijit.RichTextEditor");dojo.declare("com.ibm.btt.dijit.RichTextEditor",[dijit.Editor,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"",readOnly:false,attributeMap:dojo.delegate(dijit.Editor.prototype.attributeMap,{width:{node:"domNode"},readOnly:{node:"domNode"}}),_setReadOnlyAttr:function(_12d){this.set("disabled",_12d);},_getReadOnlyAttr:function(){return this.get("disabled");},postCreate:function(){var _12e=this.name;this.inherited(arguments);this._setWidthAttr(this.width);this._setHintAttr(this.hint);this._setVisibilityAttr(this.visibility);this.resetContent=this.get("savedContent");if(_12e==""||_12e==null||_12e==undefined){this.name=null;}var _12f=this.value;var _130=this;setTimeout(function(){_130._setValueAttr(_12f);},0);},_setWidthAttr:function(_131){if(_131!=""){this.width=_131;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHintAttr:function(_132){this.hint=_132;if(typeof (this.editingArea)!="undefined"&&this.editingArea!=null){this.editingArea.parentNode.title=StringUtil.removeWarp(this.getI18NString(_132));}},_getValueAttr:function(){var _133=this.inherited(arguments);if(dojo.isFF&&(_133=="<br _moz_editor_bogus_node=\"TRUE\" />"||_133=="<br />")){return "";}else{return _133;}},reset:function(e){this.set("value",this.resetContent);},onFormSubmit:function(){if(this.name){var _134=this.get("value");this._tmpInput=dojo.create("input",{"type":"hidden","name":this.name,"value":_134},this.domNode,"after");}},destroy:function(){if(this.resetContent){delete this.resetContent;}if(this._tmpInput){dojo.destroy(this._tmpInput);delete this._tmpInput;}this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Select"]){dojo._hasResource["com.ibm.btt.dijit.Select"]=true;dojo.provide("com.ibm.btt.dijit.Select");dojo.declare("com.ibm.btt.dijit.Select",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.FilteringSelect,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",storeData:"",width:"",storeURL:"",labelField:"label",valueField:"value",asyncStatus:0,asyncErrorMessage:"",_handlers:[],typeAhead:false,constructor:function(){this.storeDataFormat={itemLabel:"label",itemValue:"value"};this.searchAttr=this.storeDataFormat.itemLabel;this._handlers=[];},attributeMap:dojo.delegate(dijit.form.FilteringSelect.prototype.attributeMap,{width:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);if(!this.storeDataName&&this.storeURL){if(this.params.value){this.value=this.params.value;this._lastValueReported=this.params.value;this._resetValue=this.params.value;}this.loadStoreFromURL(this.storeURL);}this._setWidthAttr(this.width);if(com.ibm.btt.util.GlobalConfigurationUtil&&com.ibm.btt.util.GlobalConfigurationUtil.getValue("selectList.clickModeForDropDown")=="OnWholeWidget"){this.typeAhead=false;}if(this.typeAhead){}else{this._handlers.push(dojo.connect(this.focusNode,"onclick",dojo.hitch(this,function(){if(this._opened){this.closeDropDown();}else{this.loadDropDown();}})));}if((this.typeAhead!=undefined&&this.typeAhead==false)||(this.readOnly!=undefined&&this.readOnly==true)){this.textbox.readOnly=true;}},postMixInProperties:function(){var root=this.srcNodeRef;var _135={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};var _136=this;dojo.query("> option",root).forEach(dojo.hitch(this,function(node,i){var item={};item[this.storeDataFormat.itemLabel]=_136.getI18NString(dojo.trim(node.innerHTML));var _137=dojo.attr(node,"value");if(_137==""){_137="#";}item[this.storeDataFormat.itemValue]=_137;_135.items.push(item);}));if(_135.items.length==0&&this.storeData){if(typeof this.storeData=="string"){this.storeData=dojo.fromJson(this.storeData);}_135=this._formatStoreData(this.storeData);}_135=this.prepareStoreData(_135);this.item=null;if(this.params.value){for(var i=0;i<_135.items.length;i++){if(this.params.value==_135.items[i].value){this.item=_135.items[i];}}}if(_135.items.length==0){var item={};item[this.storeDataFormat.itemValue]="#";item[this.storeDataFormat.itemLabel]="";_135.items.push(item);this._lastValueReported="#";this.value="#";}if(!this.item){this.item=_135.items[0];this.value=this.item.value;this._lastValueReported=this.item.value;}this.store=new dojo.data.ItemFileReadStore({data:_135});this.inherited(arguments);},_setStoreDataAttr:function(_138){if(typeof _138=="string"){_138=dojo.fromJson(_138);}this.storeData=_138;},setStoreData:function(data){this._onChangeActive=false;var _139=this.prepareStoreData(this._formatStoreData(data));this.store.clearOnClose=true;this.store.data=_139;this.searchAttr=_139.label;this.store.close();this.set("value",this.value);this._setBlurValue();this._onChangeActive=true;},prepareStoreData:function(data){return data;},_formatStoreData:function(data){var _13a={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};if(data instanceof Array){for(var i=0;i<data.length;i++){if(data[i]!=null&&data[i][this.valueField]!=null&&data[i][this.labelField]!=null){var item={};item[this.storeDataFormat.itemValue]=data[i][this.valueField];item[this.storeDataFormat.itemLabel]=this.getI18NString(data[i][this.labelField]);if(item[this.storeDataFormat.itemValue]==""&&item[this.storeDataFormat.itemLabel]==""){item[this.storeDataFormat.itemValue]="#";}_13a.items.push(item);}}}else{if(data instanceof Object){for(var p in data){if(data[p]!=null){var item={};item[this.storeDataFormat.itemValue]=data[p];item[this.storeDataFormat.itemLabel]=this.getI18NString(p);if(item[this.storeDataFormat.itemValue]==""&&item[this.storeDataFormat.itemLabel]==""){item[this.storeDataFormat.itemValue]="#";}_13a.items.push(item);}}}}return _13a;},_handleStoreLoadingError:function(err){if(err.status!==undefined){this.asyncStatus=err.status;this.asyncErrorMessage=err.message;this.onAsyncError();}},onAsyncOK:function(){},onAsyncError:function(){},loadStoreFromURL:function(url){this.storeURL=url;var _13b={url:this.storeURL,handleAs:"json",sync:true,load:dojo.hitch(this,"_handleStoreLoadingResponse"),error:dojo.hitch(this,"_handleStoreLoadingError")};this.asyncStatus=0;this.asyncErrorMessage="";dojo.xhrGet(_13b);},_handleStoreLoadingResponse:function(data){this.setStoreData(data);this.onAsyncOK();},_setWidthAttr:function(_13c){if(_13c!=""){this.width=_13c;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setValueAttr:function(_13d){var _13e=false;this.store.fetchItemByIdentity({identity:_13d,onItem:function(item){}});var _13f=this.store._getItemsArray();if(_13f){dojo.some(_13f,function(item){if(item.value&&item.value[0]&&item.value[0]==_13d){_13e=true;return false;}});}if(!_13e){var _13f=this.store._getItemsArray();if(_13f.length==0){_13d="";}else{var id=this.store.getIdentity(_13f[0]);this.store.fetchItemByIdentity({identity:id,onItem:dojo.hitch(this,function(item){if(item){_13e=true;_13d=item.value&&item.value[0]?item.value[0]:null;this.set("item",item);}})});}this.value=_13d;this._lastValueReported=_13d;}this.inherited(arguments);},_getValueAttr:function(){var _140=this.inherited(arguments);if(_140==null||_140=="#"){return "";}else{return _140;}},_setItemAttr:function(){this.inherited(arguments);this.valueNode.value=this.get("value");},destroy:function(){while(this._handlers.length>0){try{dojo.disconnect(this._handlers.pop());}catch(e){}}this._handlers=undefined;this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.StringTextBox"]){dojo._hasResource["com.ibm.btt.dijit.StringTextBox"]=true;dojo.provide("com.ibm.btt.dijit.StringTextBox");dojo.requireLocalization("com.ibm.btt.dijit","TextBox", null, "ROOT");dojo.declare("com.ibm.btt.dijit.StringTextBox",[com.ibm.btt.dijit.ValidationTextBox],{maximumLength:NaN,minimumLength:NaN,validCharacters:"",password:false,postMixInProperties:function(){this.inherited(arguments);if(this.password){this.type="password";}},postCreate:function(){this.inherited(arguments);this.set("value",this.get("value"));var gcu=com.ibm.btt.util.GlobalConfigurationUtil;var _141=gcu&&(gcu.getValue("com.ibm.btt.stringtextbox.maxlength")=="auto");var max=65535;var mlc=parseInt(this.maximumLength)||max;var mli=parseInt(this.maxLength)||max;var ml=mlc>mli?mli:mlc;if(ml>0&&ml<max){this.maximumLength=ml;if(_141){this.maxLength=ml;dojo.attr(this.focusNode,"maxLength",ml);}}},validator:function(_142,_143){var _144=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");if(!isNaN(this.minimumLength)&&this.attr("value").length<this.minimumLength){this.invalidMessage=_144.getMessage("stringMinMessage",{value:this.minimumLength});return false;}else{if(!isNaN(this.maximumLength)&&this.attr("value").length>this.maximumLength){this.invalidMessage=_144.getMessage("stringMaxMessage",{value:this.maximumLength});return false;}else{return this.inherited(arguments);}}},_setValueAttr:function(_145){if(_145!=null&&_145!=undefined){_145=this.getI18NString(_145);_145=_145.replace(/&amp;/g,"&").replace(/&lt;/g,"<");}else{_145="";}this.value=_145;this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.TextArea"]){dojo._hasResource["com.ibm.btt.dijit.TextArea"]=true;dojo.provide("com.ibm.btt.dijit.TextArea");dojo.declare("com.ibm.btt.dijit.TextArea",[com.ibm.btt.dijit.StringTextBox,dijit.form.SimpleTextarea],{width:"",height:"",regExp:"[\\s\\S]*",attributeMap:dojo.delegate(dijit.form.SimpleTextarea.prototype.attributeMap,{width:{node:"domNode"},height:{node:"domNode"}}),_isValidSubset:function(){return false;},_setWidthAttr:function(_146){if(_146!=""){this.width=_146;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_147){if(_147!=""){this.height=_147;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},_setIsMandatoryAttr:function(_148){this.isMandatory=_148;this.required=_148;}});}if(!dojo._hasResource["com.ibm.btt.dijit.Tree"]){dojo._hasResource["com.ibm.btt.dijit.Tree"]=true;dojo.provide("com.ibm.btt.dijit.Tree");dojo.declare("com.ibm.btt.dijit.Tree",[dijit.Tree,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",name:"",storeData:null,showRoot:false,value:"",_selectedItem:null,width:"",height:"",persist:false,templateString:dojo.cache("com.ibm.btt.dijit","templates/Tree.html","<div class=\"dijitTree dijitTreeContainer\" waiRole=\"tree\" style=\"overflow:auto\"\r\n\tdojoAttachEvent=\"onkeypress:_onKeyPress\">\r\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" dojoAttachPoint=\"indentDetector\"></div>\r\n\t<input type=\"hidden\" dojoAttachPoint=\"formNode\"/>\r\n</div>\r\n"),attributeMap:dojo.delegate(dijit.Tree.prototype.attributeMap,{name:{node:"formNode"},value:{node:"formNode"},width:{node:"formNode"},height:{node:"formNode"}}),postMixInProperties:function(){this.inherited(arguments);this.loadStoreData();},postCreate:function(){this.inherited(arguments);this.treeEvents=[];var _149=this;this.treeEvents.push(dojo.connect(this,"onClick",this,function(item){_149.set("value",item.id[0]);}));this._lastValue=this.value;},onLoad:function(){this.inherited(arguments);this._expandNode(this.tree.rootNode.getChildren()[0],false);this.reset();if(this.value!=""){var _14a=this.value.split(".");var _14b=_14a[0];for(var i=1;i<_14a.length;i++){var n=this._itemNodesMap[_14b];if(n){this._expandNode(n[0],false);}_14b+="."+_14a[i];}var _14c=this._itemNodesMap[this.value];this._expandNode(_14c[0],false);_14c[0].setSelected(true);}},_parseStoreData:function(_14d,data){this.firstSelectedItem=null;var _14e=[];for(var name in data){var item={};if(_14d!=null&&typeof (_14d.id)!="undefined"){item.id=_14d.id+"."+name;}else{item.id=name;}item.label=data[name]["label"];item.value=data[name]["value"];if(data[name]["children"]){item.children=this._parseStoreData(item,data[name]["children"]);}_14e.push(item);}return _14e;},getLabel:function(item){return I18nUtil.getI18nString(this.inherited(arguments));},loadStoreData:function(){var _14f=this._parseStoreData(null,this.storeData);if(!this.model){var data={"identifier":"id","label":"label","items":_14f};var _150=new dojo.data.ItemFileWriteStore({"data":data});this.model=new dijit.tree.ForestStoreModel({"store":_150});}else{var tree=this;var _150=this.model.store;this.model.store.fetch({queryOptions:{deep:true},onComplete:function(_151,_152){for(var i=_151.length-1;i>=0;i--){_150.deleteItem(_151[i]);}}});_150.save();(function(_153,_154){for(var i=0;i<_153.length;i++){var _155;if(_153[i].children&&_153[i].children.length){_155=_153[i].children;_153[i].children=[];}else{_155=null;}if(_154){var _156=_150.newItem(_153[i],{parent:_154,attribute:"children"});}else{var _156=_150.newItem(_153[i]);}if(_155){arguments.callee(_155,_156);}}})(_14f);_150.save();}},setStoreData:function(data){var _157={};_157[this.storeDataName]=data;this.storeData=_157;this.loadStoreData();if(this.dndController){this.dndController.destroy();var _158={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_158[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController.constructor(this,_158);}this.set("paths",[]);},destroy:function(){while(this.treeEvents.length>0){dojo.disconnect(this.treeEvents.pop());}this.treeEvents=undefined;this.inherited(arguments);},_setValueAttr:function(_159){dojo.forEach(this.get("selectedNodes"),function(_15a){_15a.setSelected(false);});if(this._lastValue){var node=this._itemNodesMap[this._lastValue];if(node){node[0].setSelected(false);}}this.set("paths",[]);var _15b=this._itemNodesMap[_159];this.value=_159;this.formNode.value=_159;if(_15b){this.set("selectedNodes",_15b);this._selectedItem=_15b[0].item;}},getSelectedLabel:function(){if(this._selectedItem){return this._selectedItem.label[0];}else{return undefined;}},getSelectedLabelNLS:function(){if(this._selectedItem){return I18nUtil.getI18nString(this._selectedItem.label[0]);}else{return undefined;}},getSelectedValue:function(){if(this._selectedItem){return this._selectedItem.value[0];}else{return undefined;}},reset:function(){this.inherited(arguments);if(this.params.value){this.set("value",this.params.value);}else{this.set("value","");}},getTooltip:function(item){var tip=this.getI18NString(this.hint);if(tip==undefined){tip="";}this.hint=tip;return tip;},_setHintAttr:function(_15c){this.hint=_15c;var _15d=StringUtil.removeWarp(this.getI18NString(_15c));this.domNode.title=_15d;if(this.rootNode){this._setHintForAllChild(this.rootNode,_15d);}},_setHintForAllChild:function(root,hint){var _15e=this;root.set("tooltip",hint);root.set("hint",hint);if(root.hasChildren()){dojo.forEach(root.getChildren(),function(_15f,idx){_15e._setHintForAllChild(_15f,hint);});}},_setWidthAttr:function(_160){if(_160!=""){this.width=_160;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_161){if(_161!=""){this.height=_161;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},_setVisibilityAttr:function(_162){this.inherited(arguments);this.resize();}});}if(!dojo._hasResource["com.ibm.btt.dijit.GridDijit"]){dojo._hasResource["com.ibm.btt.dijit.GridDijit"]=true;dojo.provide("com.ibm.btt.dijit.GridDijit");dojo.declare("dojox.btt.grid.cells.BaseCellWidget",dojox.grid.cells._Widget,{widgetClass:null,rowCSS:null,defaultValue:" ",constructor:function(c){if(!this.widget&&this.widgetClass){this.widget=this.createWidget(dojo.create("div"),"");}},createWidget:function(_163,_164,_165){var _166=this.inherited(arguments);if(!this.grid.cwsl){this.grid.cwsl=[];}this.grid.cwsl.push(_166);var _167=this;_166.watch("state",function(attr,_168,_169){_167.grid._set("state",_167.grid._getState());});return _166;},formatter:function(_16a,_16b,cell){if(this.hidden){return "";}var ccss=cell.grid.computeCCSS(_16b,cell,_16b%2<1?"E":"O");for(var ci in ccss){this.customClasses.push(ccss[ci]);}try{return this.bttformatter(_16a,_16b,cell);}catch(e){console.error("failed to invoke bttformatter method to format cell content in grid.");return "";}},bttformatter:function(_16c,_16d,cell){return _16c;},setValue:function(_16e,_16f){if(this.widget&&this.widget.set){if(this.widget.onLoadDeferred){var self=this;this.widget.onLoadDeferred.addCallback(function(){self.widget._lastValueReported=_16f;self.widget.set("value",_16f===null?"":_16f);});}else{this.widget._lastValueReported=_16f;this.widget.set("value",_16f,_16f);}}else{this.inherited(arguments);}},getWidget:function(){return this.widget;},handleNewLine:function(data){if(typeof (data)=="string"){data=data.split("\\n").join("\n");data=data.split("\\r").join("\r");data=data.split("\n").join("<br/>");data=data.split("\r").join("<br/>");}return data;},sizeWidget:function(_170,_171,_172){var p=this.getNode(_172),box=dojo.contentBox(p);var w=this.width.replace(/px/g,"").replace(/\%/g,"");box.w=box.w>w?w:box.w;dojo.marginBox(this.widget.domNode,{w:box.w});}});dojo.declare("dojox.btt.grid.cells.Label",dojox.btt.grid.cells.BaseCellWidget,{bttformatter:function(_173){return this.handleNewLine(I18nUtil.getI18nString(_173));}});dojo.declare("dojox.btt.grid.cells.DateTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.DateTextBox,bttformatter:function(_174){if(_174==undefined||_174==null||_174==""||_174=="null"){return "";}var date;if(typeof _174=="string"){if(this.widget&&this.widget.pattern){date=this.widget.parse(_174,this.widget.constraints);}else{var _175=this.widget.constraints;_175["datePattern"]="yyyy-MM-dd";date=this.widget.parse(_174,_175);}}else{date=_174;}return this.widget.format(date,this.widget.constraints);},getWidgetProps:function(_176){return dojo.mixin(this.inherited(arguments),{value:new Date(_176)});},setValue:function(_177,_178){if(_178==undefined||_178==null||_178==""||_178=="null"){this.widget._lastValueReported=null;this.widget.set("value",null);return;}if(this.widget){if(typeof _178=="string"){if(this.widget&&this.widget.pattern){var date=this.widget.parse(_178,this.widget.constraints);this.widget._lastValueReported=date;this.widget.set("value",date);}else{this.widget._lastValueReported=new Date(_178);this.widget.set("value",new Date(_178));}}else{this.widget._lastValueReported=_178;this.widget.set("value",_178);}}else{this.inherited(arguments);}},getValue:function(_179){if(this.widget.isValid()){var _17a=this.widget.get("value");if(_17a){return _17a;}else{return "";}}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}}});dojo.declare("dojox.btt.grid.cells.CurrencyTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.CurrencyTextBox,bttformatter:function(_17b){if(_17b===null){return "";}if(typeof _17b=="string"){_17b=Number(_17b);}this.widget._lastValueReported=_17b;this.widget.set("value",_17b);return dojo.number.format(_17b,this.widget.constraints);},getWidgetProps:function(_17c){return dojo.mixin(this.inherited(arguments),{value:new Number(_17c)});},getValue:function(_17d){if(this.widget.isValid()){return this.widget.get("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}},setValue:function(_17e,_17f){if(_17f&&typeof _17f=="string"){inData=Number(_17f);}this.inherited(arguments);}});dojo.declare("dojox.btt.grid.cells.NumberTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.NumberTextBox,bttformatter:function(_180){if(_180===null||_180===""){return "";}this.widget.set("value",_180);if(typeof _180=="string"){var _181=this.widget.parse(_180,this.widget.constraints);if(isNaN(_181)){_181=Number(_180);}if(isNaN(_181)){return _180;}else{return this.widget.format(_181,this.widget.constraints);}}else{return this.widget.format(_180,this.widget.constraints);}},getWidgetProps:function(_182){return dojo.mixin(this.inherited(arguments),{value:new Number(_182)});},getValue:function(_183){if(this.widget.isValid()){var _184=this.widget.get("value");if(isNaN(_184)){return "";}else{return _184;}}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}}});dojo.declare("dojox.btt.grid.cells.CheckBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.CheckBox,getValue:function(){return this.widget.get("value");},setValue:function(_185,_186){if(this.widget){if((_186+"")==(this.widget.checkedValue+"")){this.widget._lastValueReported=true;this.widget.set("isChecked",true);}else{this.widget._lastValueReported=false;this.widget.set("isChecked",false);}}else{this.inherited(arguments);}},sizeWidget:function(_187,_188,_189){return;},formatEditing:function(_18a,_18b){if(!this.grid.colWidget){this.grid.colWidget=[];}var col=this.index;if(!this.grid.colWidget[col]){this.grid.colWidget[col]=this.widget;}if(this.alwaysEditing){return this._alwaysEditFormatNode(_18a,_18b);}else{return this.inherited(arguments);}},_alwaysEditFormat:function(_18c,_18d){this.whenIdle(this,"_alwaysEditFormatNode",_18c,_18d);return "<div></div>";},_alwaysEditFormatNode:function(_18e,_18f){if(!this.grid.aew){this.grid.aew=[];}var col=this.index;var row=_18f;if(!this.grid.aew[col]){this.grid.aew[col]=[];}var w=null;if(!this.grid.aew[col][row]){w=this.createWidget(this.getEditNode(_18f),_18e,_18f);this.grid.aew[col][row]=w;}else{w=this.grid.aew[col][row];}w.set("checked",_18e);w["col"]=col;w["row"]=row;w["field"]=this.field;var html=w.domNode.outerHTML;this._updateHeaderCheckBox(col);if(w.isChecked){}else{var temp=html.split("dijitCheckBoxChecked").join("");html=temp.split("dijitChecked").join("");temp=undefined;}return html;},_updateHeaderCheckBox:function(col){if(this.grid.aew&&this.grid.aew[col]){var _190=dojo.filter(this.grid.aew[col],function(box){return box.isChecked==false||box.isChecked=="false";});if(this.grid.aewh&&this.grid.aewh[col]){var hw=this.grid.aewh[col];hw["preserve"]=true;hw.set("checked",_190.length==0);}}},doclick:function(e){if(e.target.tagName=="INPUT"){if(this.alwaysEditing){this.applyStaticValue(e.rowIndex);dojo.stopEvent(e);}}},applyStaticValue:function(_191){var e=this.grid.edit;var col=this.index;var row=_191;var w=this.grid.aew&&this.grid.aew[col]&&this.grid.aew[col][row]?this.grid.aew[col][row]:undefined;if(w){this.widget=w;if(w.isChecked){w.set("checked",false);var _192=dojo.byId(w.id);_192.checked=false;var _193=_192.parentNode;dojo.removeClass(_193,"dijitCheckBoxChecked");dojo.removeClass(_193,"dijitChecked");}else{w.set("checked",true);}this._updateHeaderCheckBox(col);var v=w.get("value");e.applyCellEdit(v,this,_191);}}});dojo.declare("com.ibm.btt.dijit.GridRadioButton",[com.ibm.btt.dijit.RadioButton],{_getValueAttr:function(){if(this.isChecked){return this.checkedValue;}else{return this.unCheckedValue;}}});dojo.declare("dojox.btt.grid.cells.Radio",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.GridRadioButton,getValue:function(_194){var col=this.index;var row=_194;var w=this.grid.aew&&this.grid.aew[col]&&this.grid.aew[col][row]?this.grid.aew[col][row]:undefined;if(w){this.widget=w;}var v=this.widget.isChecked?this.widget.checkedValue:this.widget.unCheckedValue;this._uncheckOthers(col,_194);return v;},setValue:function(_195,_196){if(_196&&this.widget){if(_196.toString()==this.widget.checkedValue.toString()){this.widget._lastValueReported=true;this.widget.set("checked",true);this._uncheckOthers(rol,_195);}else{this.widget._lastValueReported=false;this.widget.set("checked",false);}}else{this.inherited(arguments);}},_uncheckOthers:function(col,row){var _197=this.field;var rows=this.grid.get("rowCount");for(var i=0;i<rows;i++){if(i!=row){var item=this.grid.getItem(i);if(item){this.grid.store.setValue(item,_197,this.widget.unCheckedValue);if(this.grid.aew&&this.grid.aew[col]&&this.grid.aew[col][i]){var w=this.grid.aew[col][i];var _198=dojo.byId(w.id);if(_198){var _199=_198.parentNode;if(_199){dojo.removeClass(_199,"dijitRadioChecked");dojo.removeClass(_199,"dijitChecked");}}}}}}},sizeWidget:function(_19a,_19b,_19c){return;},bttformatter:function(_19d){if(typeof _19d=="string"){return _19d;}else{if(typeof _19d=="boolean"){return _19d.toString();}else{this.inherited(arguments);}}},formatEditing:function(_19e,_19f){if(!this.grid.colWidget){this.grid.colWidget=[];}var col=this.index;if(!this.grid.colWidget[col]){this.grid.colWidget[col]=this.widget;}if(this.alwaysEditing){return this._alwaysEditFormatNode(_19e,_19f);}else{return this.inherited(arguments);}},_alwaysEditFormatNode:function(_1a0,_1a1){if(!this.grid.aew){this.grid.aew=[];}var col=this.index;var row=_1a1;if(!this.grid.aew[col]){this.grid.aew[col]=[];}var w=null;if(!this.grid.aew[col][row]){if(!this.widgetProps){this.widgetProps={};}this.widgetProps["name"]="REMOVEBEFORESUBMIT_"+this.grid.id+"_radio_"+col;w=this.createWidget(this.getEditNode(_1a1),_1a0,_1a1);this.grid.aew[col][row]=w;}else{w=this.grid.aew[col][row];}if(String(_1a0)==String(w.checkedValue)){if(!this.grid.currentCheckedRadio){this.grid.currentCheckedRadio=[];}if(this.grid.currentCheckedRadio[col]==undefined){this.grid.currentCheckedRadio[col]=w.id;w.set("checked",true);}else{w.set("checked",true);this.grid.currentCheckedRadio[col]==w.id;}this._uncheckOthers(col,row);}else{w.set("checked",false);}var html=w.domNode.outerHTML;if(w.isChecked){}else{var temp=html.split("dijitRadioChecked").join("");html=temp.split("dijitChecked").join("");temp=undefined;}return html;},doclick:function(e){if(e.target.tagName=="INPUT"){if(this.alwaysEditing){this.applyStaticValue(e.rowIndex);}}},applyStaticValue:function(_1a2){var e=this.grid.edit;var col=this.index;var row=_1a2;var w=this.grid.aew&&this.grid.aew[col]&&this.grid.aew[col][row]?this.grid.aew[col][row]:undefined;if(w){this.widget=w;w.set("checked",true);var v=w.get("value");e.applyCellEdit(v,this,_1a2);this._uncheckOthers(col,row);if(!this.grid.currentCheckedRadio){this.grid.currentCheckedRadio=[];}if(this.grid.currentCheckedRadio[col]!=undefined){if(w.id!=this.grid.currentCheckedRadio[col]){var _1a3=dojo.byId(this.grid.currentCheckedRadio[col]);var _1a4=_1a3.parentNode;dojo.removeClass(_1a4,"dijitRadioChecked");dojo.removeClass(_1a4,"dijitChecked");}}var _1a3=dojo.byId(w.id);var _1a4=_1a3.parentNode;dojo.addClass(_1a4,"dijitRadioChecked");dojo.addClass(_1a4,"dijitChecked");this.grid.currentCheckedRadio[col]=w.id;}}});dojo.declare("dojox.btt.grid.cells.StringTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.StringTextBox,getValue:function(_1a5){if(this.widget.isValid()){return this.widget.get("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}},bttformatter:function(_1a6){return this.handleNewLine(I18nUtil.getI18nString(_1a6));},formatEditing:function(_1a7,_1a8){_1a7=_1a7.replace(/\r/g,"\\r");_1a7=_1a7.replace(/\n/g,"\\n");return this.inherited(arguments);}});dojo.declare("dojox.btt.grid.cells.ComboBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.ComboBox,getValue:function(){var e=this.widget;e.attr("displayedValue",e.attr("displayedValue"));return e.attr("value");},bttformatter:function(_1a9){return this.handleNewLine(_1a9);}});dojo.declare("dojox.btt.grid.cells.Select",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.Select,comparator:function(_1aa,_1ab){var _1ac=this.widget.store;var _1ad=_1ac._itemsByIdentity[_1aa];var v1=_1ad?_1ad.label[0]:_1aa;var _1ae=_1ac._itemsByIdentity[_1ab];var v2=_1ae?_1ae.label[0]:_1ab;if(v1>v2){return 1;}else{if(v1<v2){return -1;}else{return 0;}}},bttformatter:function(_1af){if((_1af===null)||(_1af==="")){return "";}var _1b0=this.widget.store;var item=_1b0._itemsByIdentity[_1af];if(item){return this.handleNewLine(item.label[0]);}else{return this.handleNewLine(_1af);}}});dojo.declare("dojox.btt.grid.cells.Image",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.Image,bttformatter:function(_1b1){if(_1b1){var html="<img src=\""+_1b1+"\"";}else{var html="<img ";}if(this.widgetProps&&this.widgetProps.imageWidth){html+=" width=\""+this.grid.handleLenUint(this.widgetProps.imageWidth)+"\"";}if(this.widgetProps&&this.widgetProps.imageHeight){html+=" height=\""+this.grid.handleLenUint(this.widgetProps.imageHeight)+"\"";}html+="/>";return html;}});dojo.declare("dojox.btt.grid.cells.LabelFromList",dojox.btt.grid.cells.BaseCellWidget,{constructor:function(prop){var _1b2=this;if(prop.storeData){_1b2.storeData=prop.storeData;}else{var _1b3=prop.storeURL?prop.storeURL:prop.widgetProps.storeURL;if(_1b3){var _1b4={url:_1b3,handleAs:"json",sync:true,load:function(arg){_1b2.storeData=arg;},error:function(e){console.error("dojox.btt.grid.cells.LabelFromList: Failed to get the list file from "+_1b3);}};dojo.xhrGet(_1b4);}else{_1b2.storeData={};}}if(_1b2.storeData){var _1b5={};for(var key in _1b2.storeData){if(_1b2.storeData[key]!=null&&typeof (_1b2.storeData[key])!="undefined"){_1b5[_1b2.storeData[key]]=key;}}_1b2.storeData=_1b5;}},bttformatter:function(_1b6){if(this.storeData&&this.storeData[_1b6]){return "<label>"+this.handleNewLine(I18nUtil.getI18nString(this.storeData[_1b6]))+"</label>";}else{if(_1b6&&_1b6===null&&_1b6==="null"){return "";}else{return "<label>"+this.handleNewLine(_1b6)+"</label>";}}}});dojo.declare("dojox.btt.grid.cells._LinkMixin",null,{_onClick:function(e){if(!e.target.tagName||(!this._tagartTagName[e.target.tagName.toUpperCase()])){return;}e.defaultPrevented=true;dojo.stopEvent(e);var rowd=this.grid.getItem(e.rowIndex);var _1b7=false;if(this.widgetProps){if((!this.widgetProps.dataNameForClickable||this.grid.store.getValue(rowd,this.widgetProps.dataNameForClickable))&&((this.widgetProps.dataNameForLink&&this.grid.store.getValue(rowd,this.widgetProps.dataNameForLink))||this.widgetProps.flowEvent)){_1b7=true;}}if(!_1b7){return;}if(this.onClick(e)===false){return;}if(this.grid.selectionMode==="single"||this.grid.selectionMode==="extended"){if(!this.grid.selection.isSelected(e.rowIndex)){this.grid.selection.setSelected(e.rowIndex,true);}}var _1b8={};for(var key in rowd){if(key.charAt(0)!="_"&&rowd[key]){_1b8[key]=rowd[key][0];}}if(this.widgetProps&&this.widgetProps.dataNameForLink){var url=this.grid.store.getValue(rowd,this.widgetProps.dataNameForLink);if(url&&url!=""){return this._openLink(url,_1b8);}}if(this.widgetProps&&this.widgetProps.href){var url=this.widgetProps.href;if(url&&url!=""){return this._openLink(url,_1b8);}}if(this.widgetProps&&this.widgetProps.flowEvent&&this.widgetProps.flowEvent!=""){var form=this.grid._getParentForm();if(!form){console.error("can't find form to submit");return;}var pd=dojo.fromJson(this.grid.bttParam4Link);pd["dse_nextEventName"]=this.widgetProps.flowEvent;if(this.widgetProps.dataNameForRow){pd[this.widgetProps.dataNameForRow]=e.rowIndex;}if(this.widgetProps.dataNameForColumn){pd[this.widgetProps.dataNameForColumn]=this.field;}form.bttParams=dojo.toJson(pd);form.submit();return;}console.error("find nothing, something is wrong!");},_openLink:function(url,_1b9){var _1ba=[];for(var key in _1b9){if(_1b9[key]!=null){_1ba.push(key);_1ba.push("=");_1ba.push(_1b9[key]);_1ba.push("&");}}if(this.widgetProps.dataNameForRow){_1ba.push(this.widgetProps.dataNameForRow+"="+this.index);_1ba.push("&");}if(this.widgetProps.dataNameForColumn){_1ba.push(this.widgetProps.dataNameForColumn+"="+this.field);_1ba.push("&");}_1ba.pop();if(url.toString().indexOf("?")>0){url+="&"+_1ba.join("");}else{url+="?"+_1ba.join("");}var _1bb;if(this.widgetProps&&this.widgetProps.target){_1bb=this.widgetProps.target;}else{if(this.widgetProps&&this.widgetProps.newWindow){if(this.widgetProps.newWindow.toString()=="true"){_1bb="_blank";}}}if(_1bb){window.open(url,_1bb);}else{window.open(url,"_self");}},onClick:function(e){return true;}});dojo.declare("dojox.btt.grid.cells.Link",[dojox.btt.grid.cells.BaseCellWidget,dojox.btt.grid.cells._LinkMixin],{_tagartTagName:{"A":true,"IMG":true},bttformatter:function(_1bc,_1bd){var rowd=this.grid.getItem(_1bd);if(rowd){}else{return "";}var atag={"tn":"a","attr":{},ih:""};atag.ih="";var text;if(this.field&&_1bc){text=_1bc;}else{if(this.widgetProps&&this.widgetProps.linkText){text=this.widgetProps.linkText;}}atag.ih=text?I18nUtil.getI18nString(text):atag.ih;if(this.widgetProps&&this.widgetProps.target){atag.attr.target=this.widgetProps.target;}else{if(this.widgetProps&&this.widgetProps.newWindow){if(this.widgetProps.newWindow.toString()=="true"){atag.attr.target="_blank";}}}if(this.widgetProps){var _1be;if(this.widgetProps.dataNameForTooltip){_1be=this.grid.store.getValue(rowd,this.widgetProps.dataNameForTooltip);}if(!_1be){_1be=this.widgetProps.tooltip;}if(_1be){_1be=I18nUtil.getI18nString(_1be);atag.attr.title=_1be;}}atag.attr.href="#";var _1bf=false;if(this.widgetProps){if((!this.widgetProps.dataNameForClickable||this.grid.store.getValue(rowd,this.widgetProps.dataNameForClickable))&&((this.widgetProps.dataNameForLink&&this.grid.store.getValue(rowd,this.widgetProps.dataNameForLink))||this.widgetProps.flowEvent)){_1bf=true;}}if(this.widgetProps.renderMode=="image"){var _1c0=_1be?"title=\""+_1be+"\"":"";if(_1bc){var _1c1=_1bc?"src=\""+_1bc+"\"":"";var _1c2=this.id?" cellWidgetId"+"=\""+this.id+"\" ":"";return "<img "+_1c1+(_1bf?"":" style = \"filter:Alpha(opacity=10);-moz-opacity:.1;opacity:0.1;\" ")+_1c0+_1c2+" />";}else{return "";}}else{if(_1bf){atag.tn="a";}else{atag.tn="span";}var os="<"+atag.tn+" ";for(var key in atag.attr){os+=key+"=\""+atag.attr[key]+"\" ";}if(this.id){os+="cellWidgetId"+"=\""+this.id+"\"";}os+=">"+this.handleNewLine(atag.ih)+"</"+atag.tn+">";return os;}}});dojo.declare("dojox.btt.grid.cells.Button",[dojox.btt.grid.cells.BaseCellWidget,dojox.btt.grid.cells._LinkMixin],{_tagartTagName:"SPAN",_tagartTagName:{"SPAN":true},bttformatter:function(_1c3,_1c4){var rowd=this.grid.getItem(_1c4);if(rowd){}else{return "";}var text;if(this.field&&_1c3){text=_1c3;}else{if(this.widgetProps&&this.widgetProps.linkText){text=this.widgetProps.linkText;}}text=text?I18nUtil.getI18nString(text):"";var _1c5;if(this.widgetProps){var _1c5;if(this.widgetProps.dataNameForTooltip){_1c5=this.grid.store.getValue(rowd,this.widgetProps.dataNameForTooltip);}if(!_1c5){_1c5=this.widgetProps.tooltip;}if(_1c5){_1c5=I18nUtil.getI18nString(_1c5);}}var _1c6=false;if(this.widgetProps){if((!this.widgetProps.dataNameForClickable||this.grid.store.getValue(rowd,this.widgetProps.dataNameForClickable))&&((this.widgetProps.dataNameForLink&&this.grid.store.getValue(rowd,this.widgetProps.dataNameForLink))||this.widgetProps.flowEvent)){_1c6=true;}}var _1c7=_1c5?"title=\""+_1c5+"\"":"";var _1c8=_1c6?"":" dijitButtonDisabled dijitDisabled ";var _1c9=this.id?" cellWidgetId"+"=\""+this.id+"\" ":"";if(text){return "<span tabIndex=\"0\" class=\"dijit dijitReset dijitInline dijitButton"+_1c8+"\""+_1c7+_1c9+" ><span class=\"dijitReset dijitInline dijitButtonNode\">"+"<div style=\"background: none repeat scroll 0% 0% transparent; -moz-user-select: none;\" class=\"dijitReset dijitStretch dijitButtonContents focusNode\">"+"<span class=\"dijitReset dijitInline dijitButtonText\">"+this.handleNewLine(text)+"</span></div></span></span>";}else{return "";}}});dojo.declare("dojox.btt.grid.cells.Content",[dojox.btt.grid.cells.BaseCellWidget],{bttformatter:function(_1ca,idx){if(this.widgetProps){if(this.widgetProps.formatterStr){if(this._getBTTParamsStrForFmt==null){this._getBTTParamsStrForFmt=dojo.hitch(this,this._getBTTParamsStr);}if(this._addEventForFmt==null){this._addEventForFmt=dojo.hitch(this,function(_1cb,wId,_1cc,func){var item=this.grid.getItem(_1cb);var _1cd=this.grid.store.getIdentity(item);var _1ce=_1cd!=null?_1cd:_1cb;this.grid.eventArray[_1ce]=this.grid.eventArray[_1ce]||{};this.grid.eventArray[_1ce][wId]=this.grid.eventArray[_1ce][wId]||{};this.grid.eventArray[_1ce][wId][_1cc]=func;});}if(this._setStateForFmt==null){this._setStateForFmt=dojo.hitch(this,function(_1cf,wId,key,_1d0){var item=this.grid.getItem(_1cf);var _1d1=this.grid.store.getIdentity(item);var _1d2=_1d1!=null?_1d1:_1cf;this.grid.stateArray[_1d2]=this.grid.stateArray[_1d2]||{};this.grid.stateArray[_1d2][wId]=this.grid.stateArray[_1d2][wId]||{};this.grid.stateArray[_1d2][wId]["state"]=this.grid.stateArray[_1d2][wId]["state"]||{};this.grid.stateArray[_1d2][wId]["state"][key]=_1d0;});}if(this._addStateInitForFmt==null){this._addStateInitForFmt=dojo.hitch(this,function(_1d3,wId,func){var item=this.grid.getItem(_1d3);var _1d4=this.grid.store.getIdentity(item);var _1d5=_1d4!=null?_1d4:_1d3;this.grid.stateArray[_1d5]=this.grid.stateArray[_1d5]||{};this.grid.stateArray[_1d5][wId]=this.grid.stateArray[_1d5][wId]||{};this.grid.stateArray[_1d5][wId]["state"]=this.grid.stateArray[_1d5][wId]["state"]||{};this.grid.stateArray[_1d5][wId]["stateInit"]=func;});}eval("var getBTTParamsStr = this._getBTTParamsStrForFmt;"+"var addEvent = this._addEventForFmt;"+"var setState = this._setStateForFmt;"+"var addStateInit = this._addStateInitForFmt;"+"var f = "+this.widgetProps.formatterStr);var v;try{v=f(_1ca,idx,this.grid);}catch(e){console.error("Exception caught when running formatter, please check your formatter content of column \""+this.id+"\" in table \""+this.grid.id+"\"."+" Detail message:\n"+e);v="";}delete getBTTParamsStr;delete addEvent;delete setState;delete addStateInit;delete f;return v;}else{if(this.widgetProps.content){if(typeof this.widgetProps.content=="object"){var _1d6="";for(var j=0;j<this.widgetProps.content.length;j++){var _1d7=this.widgetProps.content[j];var _1d8="<div ";for(var p in _1d7){_1d8+=p+"=\""+_1d7[p]+"\" ";}_1d8+="></div>";_1d6+=_1d8;}return _1d6;}else{if(_1ca){return this.widgetProps.content.replace("{value}",I18nUtil.getI18nString(_1ca));}else{return this.widgetProps.content;}}}}}return "";},_getBTTParams:function(_1d9){if(_1d9.type=="submit"||_1d9.type=="save"||_1d9.type=="cancel"||_1d9.type=="linkin"){var _1da=dojo.fromJson(this.grid.bttParam4Link);if(_1d9.flowId){_1da["dse_nextEventName"]=_1d9.flowEvent?_1d9.flowEvent:"start";_1da["dse_operationName"]=_1d9.flowId;_1da["dse_processorState"]="initial";delete _1da["dse_processorId"];}else{if(_1d9.flowEvent){_1da["dse_nextEventName"]=_1d9.flowEvent;}else{if(_1d9.operationId){_1da["dse_operationName"]=_1d9.operationId;_1da["dse_processorState"]="initial";delete _1da["dse_processorId"];delete _1da["dse_nextEventName"];}}}return _1da;}},_getBTTParamsStr:function(_1db){var _1dc=this._getBTTParams(_1db);var pStr=dojo.toJson(_1dc);return pStr.replace(/\"/g,"&#039;");},_onClick:function(e){},_getBTTParamsStrForFmt:null,_addEventForFmt:null,_setStateForFmt:null,_addStateInitForFmt:null});dojo.declare("dojox.btt.grid.cells.MultiCellWidget",null,{widgetClass:null,constructor:function(){if(!dojox.btt.grid.cells.MultiCellWidget.classMap){dojox.btt.grid.cells.MultiCellWidget.classMap={};}if(this.widgetClass){dojox.btt.grid.cells.MultiCellWidget.classMap[this.widgetClass.prototype.declaredClass]=dojo.hitch(this,this.init);}},init:function(){}});new dojox.btt.grid.cells.MultiCellWidget();dojo.declare("dojox.btt.grid.cells.MultiCellLabel",dojox.btt.grid.cells.MultiCellWidget,{widgetClass:com.ibm.btt.dijit.Label,init:function(_1dd,_1de,item){if(item&&_1dd["cellWidgetDataName"]){var _1df=_1de.getValue(item,_1dd["cellWidgetDataName"]);if(_1df){_1dd.set("text",_1df);}}}});new dojox.btt.grid.cells.MultiCellLabel();dojo.declare("dojox.btt.grid.cells.MultiCellImage",dojox.btt.grid.cells.MultiCellWidget,{widgetClass:com.ibm.btt.dijit.Image,init:function(_1e0,_1e1,item){if(item&&_1e0["cellWidgetDataName"]){var _1e2=_1e1.getValue(item,_1e0["cellWidgetDataName"]);if(_1e2){_1e0.set("location",_1e2);}}}});new dojox.btt.grid.cells.MultiCellImage();}if(!dojo._hasResource["com.ibm.btt.dijit.QueryReadStore"]){dojo._hasResource["com.ibm.btt.dijit.QueryReadStore"]=true;dojo.provide("com.ibm.btt.dijit.QueryReadStore");dojo.declare("com.ibm.btt.dijit.QueryReadStore",dojox.data.QueryReadStore,{bttParams:{},_fetchItems:function(_1e3,_1e4,_1e5){var _1e6=_1e3.serverQuery||_1e3.query||{};if(!this.doClientPaging){_1e6.start=(_1e3.start||0).toString();if(_1e3.count){_1e6.count=_1e3.count.toString();}}if(!this.doClientSorting&&_1e3.sort){var _1e7=[];dojo.forEach(_1e3.sort,function(sort){if(sort&&sort.attribute){_1e7.push((sort.descending?"-":"")+sort.attribute);}});_1e6.sort=_1e7.join(",");}if(this.doClientPaging&&this._lastServerQuery!==null&&dojo.toJson(_1e6)==dojo.toJson(this._lastServerQuery)){this._numRows=(this._numRows===-1)?this._items.length:this._numRows;_1e4(this._items,_1e3,this._numRows);}else{var _1e8=dojo.xhrPost;dojo.safeMixin(_1e6,this.bttParams);var _1e9=_1e8({url:this.url,handleAs:"text",postData:dojo.toJson(_1e6),failOk:true});_1e3.abort=function(){_1e9.cancel();};_1e9.addCallback(dojo.hitch(this,function(_1ea){try{data=dojo.fromJson(_1ea||null);this._xhrFetchHandler(data,_1e3,_1e4,_1e5);}catch(err){console.error(err);}}));_1e9.addErrback(function(_1eb){_1e5(_1eb,_1e3);});this.lastRequestHash=new Date().getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=dojo.mixin({},_1e6);}}});}if(!dojo._hasResource["com.ibm.btt.util.BTTTooltip"]){dojo._hasResource["com.ibm.btt.util.BTTTooltip"]=true;dojo.provide("com.ibm.btt.util.BTTTooltip");dojo.getObject("com.ibm.btt.util.BTTTooltip",true);dojo.declare("com.ibm.btt.util.BTTTooltip",[dijit._MasterTooltip],{show:function(_1ec,_1ed,_1ee,rtl,e){if(this.aroundNode&&this.aroundNode===_1ed){return;}this.domNode.width="auto";if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_1ec;var _1ef=dojo.position(_1ed,true);if(dojo.isIE<9&&("mousePoint"==_1ee||"textEnd"==_1ee)){_1ee=dijit.Tooltip.defaultPosition;}if("mousePoint"==_1ee){dijit._placeOnScreenAroundRect(this.domNode,e.clientX,_1ef.y,0,_1ef.h,dijit.getPopupAroundAlignment(dijit.Tooltip.defaultPosition,!rtl),dojo.hitch(this,"orient"));}else{if("textEnd"==_1ee){var _1f0=_1ef.x+_1ef.w/2;var _1f1=_1ed.childNodes[0].offsetWidth;if(dojo.query(".dojoxEllipsis",_1ed)[0]){_1f1=dojo.query(".dojoxEllipsis",_1ed)[0].childNodes[0].offsetWidth;}if(_1f1<_1ef.w&&_1f1!=0){if(_1f1<_1ef.w){_1f0=_1ef.x+_1f1;}}dijit._placeOnScreenAroundRect(this.domNode,_1f0,_1ef.y,0,_1ef.h,dijit.getPopupAroundAlignment(dijit.Tooltip.defaultPosition,!rtl),dojo.hitch(this,"orient"));}else{dijit.placeOnScreenAroundElement(this.domNode,_1ed,dijit.getPopupAroundAlignment((_1ee&&_1ee.length)?_1ee:dijit.Tooltip.defaultPosition,!rtl),dojo.hitch(this,"orient"));}}dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_1ed;}});dijit.showBTTTooltip=function(_1f2,_1f3,_1f4,rtl,e){if(!dijit._masterTT_BTT){dijit._masterTT_BTT=new com.ibm.btt.util.BTTTooltip();}return dijit._masterTT_BTT.show(_1f2,_1f3,_1f4,rtl,e);};dijit.hiddenBTTTooltip=function(_1f5){if(dijit._masterTT_BTT){return dijit._masterTT_BTT.hide(_1f5);}};}if(!dojo._hasResource["com.ibm.btt.dijit.Grid"]){dojo._hasResource["com.ibm.btt.dijit.Grid"]=true;dojo.provide("com.ibm.btt.dijit.Grid");dojo.declare("com.ibm.btt.dijit.CloseMenuItem",dijit.MenuItem,{templateString:dojo.cache("com.ibm.btt.dijit","templates/CloseMenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" waiRole=\"menuitem\" tabIndex=\"-1\"\r\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\r\n\t<td class=\"dijitReset dijitMenuItemIconCell\" waiRole=\"presentation\">\r\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" dojoAttachPoint=\"iconNode\"/>\r\n\t</td>\r\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode\"></td>\r\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\r\n\t<td class=\"dijitReset dijitMenuArrowCell\" waiRole=\"presentation\">\r\n\t\t<div dojoAttachPoint=\"closeButton\" dojoAttachEvent=\"onclick:_onCloseButtonClick\" >X</div>\r\n\t</td>\r\n</tr>\r\n"),_onCloseButtonClick:function(evt){this.getParent()._onBlur();dojo.stopEvent(evt);}});dojo.declare("com.ibm.btt.dijit.Menu",dijit.Menu,{position:"",grid:null,_scheduleOpen:function(_1f6,_1f7,_1f8){if(_1f8!=null&&(_1f8.x==0||_1f8.y==0)){return;}else{this.inherited(arguments);}},_openMyself:function(args){var _1f9=args.target,_1fa=args.iframe,_1fb=args.coords;var _1fc=_1f9;while(!(_1fc.tagName&&_1fc.tagName.toLowerCase()=="div")||!dojo.hasClass(_1fc,"dojoxGridRow")){_1fc=_1fc.parentNode;}var temp=_1f9;if(!_1fa){while(!dojo.attr(temp,"cellWidgetId")&&!dojo.attr(temp,"widgetId")){temp=temp.parentNode;}}_1f9=temp;var _1fd=dojo.position(_1fc,true).h;if(this.position=="below"){_1fb=null;_1fb=dojo.position(_1f9,true);var _1fe=dijit.popup._createWrapper(this);dojo.style(_1fe,"display","block");menuCoords=dojo.position(_1fe,true);dojo.style(_1fe,"display","none");_1fb.y+=_1fb.h+5;_1fb.x=_1fb.x-(menuCoords.w-_1fb.w)/2;}else{if(_1fb){if(_1fa){var od=_1f9.ownerDocument,ifc=dojo.position(_1fa,true),win=this._iframeContentWindow(_1fa),_1ff=dojo.withGlobal(win,"_docScroll",dojo);var cs=dojo.getComputedStyle(_1fa),tp=dojo._toPixelValue,left=(dojo.isIE&&dojo.isQuirks?0:tp(_1fa,cs.paddingLeft))+(dojo.isIE&&dojo.isQuirks?tp(_1fa,cs.borderLeftWidth):0),top=(dojo.isIE&&dojo.isQuirks?0:tp(_1fa,cs.paddingTop))+(dojo.isIE&&dojo.isQuirks?tp(_1fa,cs.borderTopWidth):0);_1fb.x+=ifc.x+left-_1ff.x;_1fb.y+=ifc.y+top-_1ff.y;}}else{_1fb=dojo.position(_1f9,true);_1fb.x+=10;_1fb.y+=10;}}if(this.grid&&this.grid.edit){this.grid.edit.apply();}var _200=dojo.position(_1fc,true).h;if(this.position=="below"){_1fb.y+=(_200-_1fd)/2;}var self=this;var _201=dijit.getFocus(this);function _202(){if(self.refocus){dijit.focus(_201);}dijit.popup.close(self);};dijit.popup.open({popup:this,x:_1fb.x,y:_1fb.y,onExecute:_202,onCancel:_202,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this);};}});dojo.declare("com.ibm.btt.dijit.Grid",[dojox.grid.EnhancedGrid,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",templateString:dojo.cache("com.ibm.btt.dijit","templates/Grid.html","<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\r\n\t\r\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridErroressages\" style=\"display: none;\" dojoAttachPoint=\"errorMessageNode\"></div>\r\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\r\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\r\n\t\r\n</div>\r\n"),name:"",width:"",storeData:"",comparatorMap:"",height:"300",sortEnabled:false,rows_append:false,_firstTimeLoaded:true,SELECTION_VALID_STATE:true,selectionMode:"none",selectionRequired:false,selectable:false,launchNew:false,_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Grid"),readOnly:false,disabled:false,isActionable:false,bttParams:"",bttParam4Link:"",columnIndex:-1,rowIndex:-1,noDataMessage:"",clickedMenuItemId:"",clickedWidgetId:"",contextMenus:{},_bindingMenuMap:{},_submitButtonForContextMenu:null,_saveCancelButtonForContextMenu:null,summary:"",cellOverflow:"ellipsis",eventArray:{},stateArray:{},create:function(){this._eventHandlers=[];this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.selectable){this._eventHandlers.push(dojo.connect(this,"postrender",this,function(){if(this.aew!=undefined){for(var i=0;i<this.aew.length;i++){if(this.aew[i]){var _203=dojo.filter(this.aew[i],function(cell){return cell.get("isChecked")==false;});if(_203.length==0){if(this.aewh!=undefined&&this.aewh[i]){this.aewh[i].set("isChecked",true);}}}}}if(this.pagination){this._eventHandlers.push(dojo.connect(this.pagination.plugin,"gotoPage",this,function(){console.debug("the selection before",this.selection);this.selection.deselectAll();console.debug("the selection after",this.selection);}));}}));this._eventHandlers.push(dojo.connect(this,"onSelectionChanged",this,this.checkSelectionNum));}this._eventHandlers.push(dojo.connect(this,"onHeaderCellClick",this,function(e){if(dojo.hasClass(e.target,"dojoxGridSortBtnSingle")||dojo.hasClass(e.target,"dojoxGridSortBtnNested")){console.debug("the selection before",this.selection);this.selection.deselectAll();console.debug("the selection after",this.selection);}}));this._eventHandlers.push(dojo.connect(this,"_onFetchComplete",this,function(){this.checkSelectionNum();}));this._eventHandlers.push(dojo.connect(this,"onKeyDown",this,function(e){if(e.cell){if(e.rowIndex<0){if(e.cell.alwaysEditing){if(e.keyCode==dojo.keys.SPACE){this.focus.currentArea("header",true);if(this.aewh&&this.aewh[e.cellIndex]){var w=this.aewh[e.cellIndex];if(w.get("checked")==true){w.set("checked",false);}else{w.set("checked",true);}w["preserve"]=false;}setTimeout(dojo.hitch(this,function(){this.focus.currentArea("header",true);this.focus._delayedHeaderFocus();e.cellNode.focus();}),500);dojo.stopEvent(e);}}}else{if(e.cell.alwaysEditing){if(e.keyCode==dojo.keys.SPACE){var fake={};fake.target={};fake.target.tagName="INPUT";fake.dispatch="doclick";fake.cell=e.cell;fake.rowIndex=e.rowIndex;this.edit.dispatchEvent(fake);this.edit.apply();this.focus.currentArea("content",true);dojo.stopEvent(e);}}else{if(e.shiftKey&&e.keyCode==dojo.keys.F9){var node=e.cell.getNode(e.rowIndex);var _204=dojo.query("[widgetId]",node);if(this.focusWidgetId){var _205=-1;for(var j=0;j<_204.length;j++){if(dojo.attr(_204[j],"widgetId")==this.focusWidgetId){_205=j;break;}}if(_205>=0){var _206=_205==_204.length-1?0:_205+1;dijit.byNode(_204[_206]).focus();this.focusWidgetId=dojo.attr(_204[_206],"widgetId");}}}}}}this._set("state",this._getState());}));this._eventHandlers.push(dojo.connect(this,"onCellFocus",this,function(_207,_208){var node=_207.getNode(_208);var _209=dojo.query("[cellWidgetId]",node);if(_209.length>0){_209[0].focus();}else{var _209=dojo.query("[widgetId]",node);if(_209.length>0){dijit.byNode(_209[0]).focus();this.focusWidgetId=dojo.attr(_209[0],"widgetId");}}}));this._eventHandlers.push(dojo.connect(this.domNode,"onkeyup",this,function(e){if(e.keyCode==dojo.keys.ESCAPE){this.selection.deselectAll();}}));if(this.selectionMode=="single"){this.selection.select=dojo.hitch(this.selection,function(_20a){if(this.isSelected(_20a)){this.deselect(_20a);}else{this.deselectAll(_20a);this.addToSelection(_20a);}});this.selection.clickSelectEvent=dojo.hitch(this.selection,function(e){if(e.type=="keydown"){return;}this.clickSelect(e.rowIndex,dojo.isCopyKey(e),e.shiftKey);});}this.errorMessageIcon=dojo.create("div",{"class":"errorMessageIcon","style":"display:none;"},this.viewsHeaderNode,"last");this._eventHandlers.push(dojo.connect(this,"onCellClick",this,this._onCellWidgetClick));this._setComparatorForColunm();this._eventHandlers.push(dojo.connect(this,"onRowDblClick",this,this._onRowDblClick));this._eventHandlers.push(dojo.connect(this,"onRowClick",this,this._onRowClick));this._eventHandlers.push(dojo.connect(this.domNode,"onkeydown",this,this._onKeyEvent));this._eventHandlers.push(dojo.connect(this.domNode,"onkeyup",this,this._onKeyEvent));this._eventHandlers.push(dojo.connect(this.edit,"setEditCell",this,this._onCellEdit));var _20b=this;dojo.forEach(this.views.views,function(view){_20b._eventHandlers.push(dojo.connect(view,"onAfterRow",function(idx,_20c,_20d){if(idx<0){var cols=_20c[0];for(var i=0;i<cols.length;i++){if(cols[i]&&cols[i].alwaysEditing&&cols[i].titleStyle){switch(cols[i].titleStyle){case "text":break;case "checkbox":var w=null;if(!_20b.aewh){_20b.aewh=[];}try{if(_20b.aewh[i]){if(_20b.aewh[i].destroy){_20b.aewh[i].destroy();}}_20b.aewh[i]=w=new com.ibm.btt.dijit.CheckBox({});w.placeAt(_20d.firstChild.rows[0].cells[i].firstChild,"only");}catch(e){}w.set("text"," ");w["col"]=i;_20b._eventHandlers.push(dojo.connect(w,"onChange",w,function(_20e){if(this.preserve!=undefined&&this.preserve==true){return;}dojo.forEach(_20b.aew[w.col],function(_20f){_20f.set("isChecked",_20e);_20b.setCellValueByName(_20f.field,_20f.row,_20e);});}));_20b._eventHandlers.push(dojo.connect(w,"onClick",w,function(_210){this["preserve"]=false;}));break;case "both":var w=null;if(!_20b.aewh){_20b.aewh=[];}try{if(_20b.aewh[i]){if(_20b.aewh[i].destroy){_20b.aewh[i].destroy();}}_20b.aewh[i]=w=new com.ibm.btt.dijit.CheckBox({});w.placeAt(_20d.firstChild.rows[0].cells[i].firstChild,"only");}catch(e){}w.set("text",cols[i].name);dojo.place(w.labelNode,w.domNode,"after");w["col"]=i;_20b._eventHandlers.push(dojo.connect(w,"onChange",w,function(_211){if(this.preserve!=undefined&&this.preserve==true){return;}dojo.forEach(_20b.aew[w.col],function(_212){_212.set("isChecked",_211);_20b.setCellValueByName(_212.field,_212.row,_211);});}));_20b._eventHandlers.push(dojo.connect(w,"onClick",w,function(_213){this["preserve"]=false;}));break;}}}}}));});this._eventHandlers.push(dojo.connect(this,"_onSet",this,function(item,_214,_215,_216){var cols=dojo.filter(this.layout.cells,function(col){return col.field==_214;});var col=cols.length>0?cols[0]:undefined;if(col&&col.alwaysEditing){if(col&&col.widget&&col.widget instanceof com.ibm.btt.dijit.RadioButton){if(String(_216)==col.widget.checkedValue){var idx=this.getItemIndex(item);if(idx>-1){var _217=this.get("rowCount");for(var i=0;i<_217;i++){if(i!=idx){var item=this.getItem(i);if(item){this.store.setValue(item,_214,col.widget.unCheckedValue);}}}}}if(String(_215)!=String(_216)){if(this.colWidget&&this.colWidget[col.index]){this.colWidget[col.index].onChange(_216);}}if(this.invalidated!=undefined){this.invalidated.all=true;}}else{if(col&&col.widget&&col.widget instanceof com.ibm.btt.dijit.CheckBox){if(String(_215)!=String(_216)){if(this.colWidget&&this.colWidget[col.index]){this.colWidget[col.index].onChange(_216);}}if(this.invalidated!=undefined){this.invalidated.all=true;}}}}}));this._eventHandlers.push(dojo.connect(this,"onCellMouseOver",this,this._onCellMouseOver));this._eventHandlers.push(dojo.connect(this,"onCellMouseOut",this,this._onCellMouseOut));if(dojo.isIE&&dojo.isIE<8){var ps=this.plugin("nestedSorting");if(ps){ps._doSort_IE7=ps._doSort;ps._doSort=dojo.hitch(ps,function(_218){this._doSort_IE7(_218);this.grid._render();});}}var _219=dojo.connect(this,"render",this,function(){var v=this.views.views[0];if(v){var _21a=v.getRowNode(0);if(_21a){var _21b=this;dojo.query("img:first-of-type",_21a).forEach(function(node){var _21c=dojo.attr(node,"src");if(_21c){var _21d={};if(_21c&&_21c!="/"){if(_21c.indexOf("?")<0){_21d.url=_21c+"?"+"randomId="+Math.random();}else{_21d.url=_21c+"&"+"randomId="+Math.random();}_21d.load=function(){_21b.resize();};dojo.xhrGet(_21d);}}});}}dojo.disconnect(_219);});this._eventHandlers.push(_219);var _21e=this;function _21f(menu,_220,_221){for(var j=0;j<_220.length;j++){if(_220[j].menuItems){var _222=new dijit.Menu({parentMenu:menu});menu.addChild(new dijit.PopupMenuItem({label:StringUtil.escapeEnterWrap(_21e.getI18NString(_220[j].text)),popup:_222}));_21f(_222,_220[j].menuItems,false);}else{if(_221&&j==0){var _223=new com.ibm.btt.dijit.CloseMenuItem({label:StringUtil.escapeEnterWrap(_21e.getI18NString(_220[j].text))});}else{var _223=new dijit.MenuItem({label:StringUtil.escapeEnterWrap(_21e.getI18NString(_220[j].text))});}menu.addChild(_223);if(_220[j].id){_223.itemId=_220[j].id;}if(_220[j].type){_223.type=_220[j].type;}if(_220[j].flowEvent){_223.flowEvent=_220[j].flowEvent;}if(_220[j].flowId){_223.flowId=_220[j].flowId;}if(_220[j].operationId){_223.operationId=_220[j].operationId;}if(_220[j].newWindow=="true"||_220[j].newWindow===true){_223.newWindow=true;}else{_223.newWindow=false;}if(_220[j].url){_223.url=_220[j].url;}dojo.connect(_223,"onClick",dojo.hitch(_21e,_21e._onMenuItemClick,_223));}}};for(var i=0;i<this.contextMenus.length;i++){var mn=new com.ibm.btt.dijit.Menu({contextMenuForWindow:false,leftClickToOpen:this.contextMenus[i].leftClickToOpen=="true",position:this.contextMenus[i].position,grid:this});_21f(mn,this.contextMenus[i].menuItems,this.contextMenus[i].hasCloseButton=="true");var _224=this.contextMenus[i].bindingCellWidgetId;if(_224){if(!this._bindingMenuMap[_224]){this._bindingMenuMap[_224]=[];}this._bindingMenuMap[_224].push(mn);}}if(this.contextMenus.length){this._submitButtonForContextMenu=new com.ibm.btt.dijit.Button({type:"submit",bttParams:{},visibility:"gone"});this._submitButtonForContextMenu.placeAt(this.domNode);this._saveCancelButtonForContextMenu=new com.ibm.btt.dijit.Button({type:"save",bttParams:{},visibility:"gone"});this._saveCancelButtonForContextMenu.placeAt(this.domNode);}var gcu=com.ibm.btt.util.GlobalConfigurationUtil;if(gcu&&(gcu.getValue("kwcag.grid.role.presentation")===false||gcu.getValue("kwcag.grid.th.scope"))){this._eventHandlers.push(dojo.connect(this,"postrender",this,function(){if(gcu&&gcu.getValue("kwcag.grid.role.presentation")===false){console.warn("kwcag.grid.role.presentation===false");console.warn("remove the role=presentation in data grid for KWCAG");dojo.query("[role=presentation]",this.domNode).forEach(function(node,_225,arr){dojo.removeAttr(node,"role");});}if(gcu&&gcu.getValue("kwcag.grid.th.scope")){console.warn("kwcag.grid.th.scope===col");console.warn("add the scope=col in the <th> of data grid for KWCAG");dojo.query("th[role=columnheader]",this.headerNodeContainer).forEach(function(node,_226,arr){dojo.attr(node,"scope","col");});}}));}},sizeChange:function(){this.inherited(arguments);if(this.isVisible()==false){dojo.query("a.dojoxGridSortBtn",this.headerNodeContainer).forEach(function(node,_227,_228){dojo.style(node,"visibility","hidden");});}},_onMenuItemClick:function(_229,ev){this.clickedMenuItemId=_229.itemId;this.onMenuItemClick();if(_229.type=="submit"||_229.type=="save"||_229.type=="cancel"){var _22a;if(_229.type=="submit"){_22a=this._submitButtonForContextMenu;}else{_22a=this._saveCancelButtonForContextMenu;}_22a.set("type",_229.type);var _22b=dojo.fromJson(this.bttParam4Link);if(_229.flowId){_22b["dse_nextEventName"]=_229.flowEvent?_229.flowEvent:"start";_22b["dse_operationName"]=_229.flowId;_22b["dse_processorState"]="initial";delete _22b["dse_processorId"];}else{if(_229.flowEvent){_22b["dse_nextEventName"]=_229.flowEvent;}else{if(_229.operationId){_22b["dse_operationName"]=_229.operationId;_22b["dse_processorState"]="initial";delete _22b["dse_processorId"];delete _22b["dse_nextEventName"];}}}_22a.bttParams=_22b;_22a._onButtonClick(ev);}else{if(_229.type=="link"){var _22c=this.getItem(this.rowIndex);var _22d=this.store.getAttributes(_22c);var _22e=[];for(var i=0;i<_22d.length;i++){var _22f=this.store.getValue(_22c,_22d[i]);if(_22f){if(_22e.length>0){_22e.push("&");}_22e.push(_22d[i]);_22e.push("=");_22e.push(_22f);}}var url=_229.url;if(url.toString().indexOf("?")>0){url+="&"+_22e.join("");}else{url+="?"+_22e.join("");}var _230="_self";if(_229.newWindow){_230="_blank";}window.open(url,_230);}}},_onOneCellWidgetClick:function(_231){this.onCellWidgetClick();},onMenuItemClick:function(){},onCellWidgetClick:function(){},updateRow:function(_232){_232=Number(_232);if(this.updating){this.invalidated[_232]=true;}else{this.views.updateRow(_232);var _233=[];for(var i=0,v;v=this.views.views[i];i++){var _234=v.getRowNode(_232);if(_234){_233.push(_234);}}this.bindWidgetAndContextMenu(_232,_233);this.scroller.rowHeightChanged(_232);}},bindWidgetAndContextMenu:function(_235,_236){if(!(this.edit&&this.edit.info&&this.edit.info.rowIndex&&this.edit.info.rowIndex==_235&&this.edit.info.cell&&this.edit.info.cell.editable==true)){if(this.cellOverflow=="ellipsis"){for(var i=0,n;n=_236[i];i++){dojo.query(".dojoxGridCell",n).forEach(function(node,_237,arr){if(node.innerHTML.indexOf("<input")<0&&node.innerHTML.indexOf("cellwidgetid")<0&&dojo.query("> div.dijitCheckBox",node)==0&&dojo.query("> div.dijitRadio",node)==0){if("TD"===node.tagName){var _238=dojo.query(".dojoxEllipsis",node);if(!_238||_238.length==0){var _239=node.innerHTML;node.innerHTML="";var _23a=dojo.create("div",{innerHTML:"<span>"+_239+"</span>"},node);dojo.addClass(_23a,"dojoxEllipsis");}}}});}}else{for(var i=0,n;n=_236[i];i++){dojo.query(".dojoxGridCell",n).forEach(function(node,_23b,arr){if(node.innerHTML.indexOf("<input")<0&&node.innerHTML.indexOf("cellwidgetid")<0&&dojo.query("> div.dijitCheckBox",node)==0&&dojo.query("> div.dijitRadio",node)==0){if(!(node.innerHTML.indexOf("<span>")>=0)){if("TD"===node.tagName){node.innerHTML="<span>"+node.innerHTML+"</span>";}}}});}}}for(var i=0,n;n=_236[i];i++){dojo.parser.parse(n);}for(var k=0;k<_236.length;k++){var _23c=dojo.query("[cellWidgetId]",_236[k]);for(var j=0;j<_23c.length;j++){var cwId=dojo.attr(_23c[j],"cellWidgetId");if(cwId){if(!this._eventHandlers){this._eventHandlers=[];}var _23d=dojo.hitch(this,function(_23e,_23f){this.rowIndex=_23e;this.clickedWidgetId=_23f;},_235,cwId);this._eventHandlers.push(dojo.connect(_23c[j],"click",_23d));this._eventHandlers.push(dojo.connect(_23c[j],"contextmenu",_23d));if(this._bindingMenuMap[cwId]){for(var m=0;m<this._bindingMenuMap[cwId].length;m++){this._bindingMenuMap[cwId][m].bindDomNode(_23c[j]);}}}}var _240=dojo.query("[widgetId]",_236[k]).map(dijit.byNode);for(var j=0;j<_240.length;j++){var cwId=_240[j].get("cellWidgetId");var _241=_240[j];if(cwId){if(dojox.btt.grid.cells.MultiCellWidget.classMap[_241.declaredClass]){dojox.btt.grid.cells.MultiCellWidget.classMap[_241.declaredClass](_241,this.store,this.getItem(_235));}var _242=this.getItem(_235);var _243=null;if(_242){_243=this.store.getIdentity(_242);}_243=_243!=null?_243:_235;if(this.stateArray[_243]&&this.stateArray[_243][cwId]&&this.stateArray[_243][cwId]["stateInit"]){this.stateArray[_243][cwId]["stateInit"](_235,cwId,_241,_240,this.stateArray[_243][cwId]["state"]);}if(!this._eventHandlers){this._eventHandlers=[];}if(Engine.getInstance() instanceof com.ibm.btt.event.NavigationEngine){if(_241.type!="undefined"&&(_241.type=="save"||_241.type=="cancel")){var _244=_241._onButtonClick;_241._onButtonClick=dojo.hitch(Engine.getInstance(),Engine.getInstance()._onButtonClick,_241,_244);_241.hasEventBundle=true;}if(_241.domNode.nodeName==="A"){_241.hasEventBundle=true;var _245=_241.onClick;_241.onClick=dojo.hitch(this,function(_246,_247,e){this.rowIndex=_246;this.launchNew=true;var _248=!_247.bttParams?null:(typeof _247.bttParams=="string"?dojo.fromJson(_247.bttParams):_247.bttParams);this.launchNew=_248&&_248["dse_processorId"]?false:true;var _249=this._getSelectedValue(false,true);var _24a=_247.bttParams;_247.domNode.href=_247.targetURL?_247.targetURL:_247.domNode.href;if(_247.domNode.href&&dojo.trim(_247.domNode.href)&&(!_248||this.name)&&_249){var _24b=dojo.isArray(_249);tempObj=_24b?_249[0]:_249;href=_247.domNode.href;var _24c=0;for(var p in tempObj){if(p){var _24d=(_248&&this.name?(_24b?this.name+".0."+p:(this.launchNew?this.name:"dse_tableSelectedRows")+"."+p):p)+"="+tempObj[p];href+=(_24c==0&&href.indexOf("?")<0?"?":"&")+_24d;_24c++;}}_247.targetURL=_247.domNode.href;_247.domNode.href=href;}if(_248&&this.name&&_249){var obj={};var _24e=function(vobj){if(vobj===null){return null;}if(typeof vobj==="string"){return vobj;}else{if(typeof vobj==="number"||typeof vobj==="boolean"){return String(vobj);}else{if(typeof vobj==="object"){if(dojo.isArray(vobj)){for(var i=0;i<vobj.length;i++){vobj[i]=arguments.callee(vobj[i]);}}else{for(var p in vobj){if(p.indexOf("_")!=0){vobj[p]=arguments.callee(vobj[p]);}}}return vobj;}else{return null;}}}};if(this.launchNew){obj[this.name]=_24e(_249);}else{obj["dse_tableSelectedRows"]=_24e(_249);}dojo.mixin(obj,_248);_247.bttParams=obj;}Engine.getInstance()._onLinkClick(_247,_245,e);_247.bttParams=_24a;},_235,_241);}}this._eventHandlers.push(dojo.connect(_241,"onClick",dojo.hitch(this,function(_24f,_250,_251,_252){var _253=this.store.getIdentity(this.getItem(_24f));_253=_253!=null?_253:_24f;if(this.eventArray[_253]&&this.eventArray[_253][_250]&&this.eventArray[_253][_250]["onClick"]){this.eventArray[_253][_250]["onClick"](_24f,_250,_241,_252);}this.rowIndex=_24f;this.clickedWidgetId=_250;this._onOneCellWidgetClick(_251);},_235,cwId,_241,_240)));this._eventHandlers.push(dojo.connect(_241.domNode,"contextmenu",dojo.hitch(this,function(_254,_255,_256){this.rowIndex=_254;this.clickedWidgetId=_255;},_235,cwId)));if(this._bindingMenuMap[cwId]){for(var m=0;m<this._bindingMenuMap[cwId].length;m++){this._bindingMenuMap[cwId][m].bindDomNode(_241.domNode);}}}}}},renderRow:function(_257,_258){this.inherited(arguments);var _259=[];var _25a=[];for(var i=0,n;n=_258[i];i++){if(dojo.query("[cellWidgetId]",n.lastChild).length!=0){_259.push(n.lastChild);}else{_25a.push(n.lastChild);}}if(_259.length>0){this.bindWidgetAndContextMenu(_257,_259);}if(_25a.length>0){setTimeout(dojo.hitch(this,this.bindWidgetAndContextMenu,_257,_25a),10);}},_setStructureAttr:function(_25b){var s=_25b;if(s&&dojo.isString(s)){dojo.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0");s=dojo.getObject(s);}this.structure=s;if(this.structure){for(var i=0;i<_25b.length;i++){for(var j=0;j<_25b[i].length;j++){if(_25b[i][j].formatter){_25b[i][j].formatter=function(data){if(!dojo.isString(data)){return data;}data=data.split("\n").join("<br/>");data=data.split("\r").join("<br/>");return data;};}}}}this.inherited(arguments);},_onCellWidgetClick:function(e){if(e.cell.isRowSelector){return;}if(e.cell._onClick){e.cell._onClick(e);}},_onKeyEvent:function(e){this._isCtrlPressed=e.ctrlKey;if(e.cell&&e.cell._props&&e.cell._props.isShowTooltip){if(e.keyCode==dojo.keys.CTRL&&e.type=="keydown"){var _25c=e.cell._props.tooltip;var _25d=e.cell._props.position;var _25e=this.getCellValueByName(_25c,e.rowIndex);var _25f=_25d.split(";");dijit.showBTTTooltip(_25e,e.cellNode,_25f,false,e);}else{if(e.keyCode==dojo.keys.CTRL&&e.type=="keyup"){dijit.hiddenBTTTooltip(e.cellNode);if(dijit._masterTT_BTT){dijit._masterTT_BTT._onDeck=null;}}}}},_onCellEdit:function(_260,_261){for(var i=0;i<this.layout.cells.length;i++){if(this.layout.cells[i]==_260){this.columnIndex=i;break;}}this.rowIndex=_261;this.onCellEdit(this.columnIndex,this.rowIndex);},onCellEdit:function(){},_onCellMouseOver:function(e){var _262=e.cell._props.isShowTooltip;if(_262){var _263=e.cell._props.tooltip;var _264=e.cell._props.position;var _265=this.getCellValueByName(_263,e.rowIndex);var _266=_264.split(";");dijit.showBTTTooltip(_265,e.cellNode,_266,false,e);}},_onCellMouseOut:function(e){var _267=dojo.position(e.cellNode,true);if(e.clientX>_267.x&&e.clientX<_267.x+_267.w&&e.clientY>_267.y&&e.clientY<_267.y+_267.h){return;}var _268=e.cell._props.isShowTooltip;if(_268){dijit.hiddenBTTTooltip(e.cellNode);if(dijit._masterTT_BTT){dijit._masterTT_BTT._onDeck=null;}}},_onRowDblClick:function(e){for(var i=0;i<this.layout.cells.length;i++){if(this.layout.cells[i]==e.cell){this.columnIndex=i;break;}}this.rowIndex=e.rowIndex;if(this.selectionMode==="single"){if(!this.selection.isSelected(e.rowIndex)){this.selection.setSelected(e.rowIndex,true);}}else{if(this.selectionMode==="extended"){if(dojo.isIE<=8&&this._isCtrlPressed){this.selection.toggleSelect(e.rowIndex);}}else{}}if(this.isActionable){if(this.readOnly===true||e.cell.editable===false){var form=this._getParentForm();if(this.bttParams!=""&&form){form.bttParams=this.bttParams;form.submit();}}}},_onRowClick:function(e){for(var i=0;i<this.layout.cells.length;i++){if(this.layout.cells[i]==e.cell){this.columnIndex=i;break;}}this.rowIndex=e.rowIndex;if((e.keyCode==dojo.keys.ENTER||e.keyCode==dojo.keys.SPACE)&&e.cell._onClick){if(dojo.attr(e.target,"cellWidgetId")!=null){e.target.click();return;}else{dojo.query("[cellWidgetId]",e.target).forEach(function(node,_269,arr){node.click();return;});var node=e.target;while(node&&!dojo.hasClass(node,"dojoxGridCell")){var id=node.getAttribute&&node.getAttribute("widgetId");if(id){e.target.click();return;}node=node.parentNode;}}}},setCellValueByIndex:function(_26a,_26b,_26c){console.warn("setCellValueByIndex() has been deprecated, please use setCellValueByName() instead!");var cell=this.layout.cells[_26a];var _26d;if(cell&&cell.field){_26d=cell.field;}else{return;}if(this.edit&&this.edit.apply){this.edit.apply();}this.store.fetchItemByIdentity({identity:this._by_idx[_26b].idty,onItem:dojo.hitch(this,function(item){var _26e=this.store.getValue(item,_26d);if(typeof _26e=="number"){_26c=isNaN(_26c)?_26c:parseFloat(_26c);}else{if(typeof _26e=="boolean"){_26c=_26c=="true"?true:_26c=="false"?false:_26c;}else{if(_26e instanceof Date){var _26f=new Date(_26c);_26c=isNaN(_26f.getTime())?_26c:_26f;}}}this.store.setValue(item,_26d,_26c);var _270=this;setTimeout(function(){_270.focus.findAndFocusGridCell();},50);})});},getCellValueByIndex:function(_271,_272){console.warn("getCellValueByIndex() has been deprecated, please use getCellValueByName() instead!");var cell=this.layout.cells[_271];var _273;if(cell&&cell.field){_273=cell.field;}else{return undefined;}var _274;this.store.fetchItemByIdentity({identity:this._by_idx[_272].idty,onItem:dojo.hitch(this,function(item){_274=this.store.getValue(item,_273);})});return _274;},setCellValueByName:function(name,_275,_276){if(this.edit&&this.edit.apply){this.edit.apply();}var item=this.getItem(_275);if(!item){return;}var cell=null;for(var i=0;i<this.layout.cells.length;i++){if(name==this.layout.cells[i].field){cell=this.layout.cells[i];break;}}if(cell&&!cell.widget){_276=this._toString_CellValue(name,_276);}this.store.setValue(item,name,_276);var _277=this;setTimeout(function(){_277.focus.findAndFocusGridCell();},50);},getCellValueByName:function(name,_278){var _279=this.store.getValue(this.getItem(_278),name);return this._toString_CellValue(name,_279);},getCellObjectByName:function(name,_27a){var _27b=this.store.getValue(this.getItem(_27a),name);return this._parseObject_CellValue(name,_27b);},_getParentForm:function(){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _27c=dijit.byNode(node);if(_27c&&typeof _27c._onSubmit=="function"){return _27c;}}},_setIsActionableAttr:function(_27d){if(_27d=="true"){this.isActionable=true;}else{if(_27d=="false"){this.isActionable=false;}else{this.isActionable=_27d;}}},_getState:function(){var _27e=[];var _27f=this.layout.cells;for(var i=0;i<_27f.length;i++){if(_27f[i].editable&&_27f[i].widget&&(dojo.isIE?_27f[i].widget.domNode.parentElement:_27f[i].widget.domNode.parentNode)){_27e.push(_27f[i].widget);}}var _280=dojo.map(_27e,function(w){return w.get("state")||"";});return dojo.indexOf(_280,"Error")>=0||!this.SELECTION_VALID_STATE?"Error":dojo.indexOf(_280,"Incomplete")>=0?"Incomplete":"";},postMixInProperties:function(){this.inherited(arguments);var _281=this;var _282=false;(function(obj){if(dojo.isArray(obj)){for(var i=0;i<obj.length;i++){arguments.callee(obj[i]);}}else{if(dojo.isObject(obj)){if(obj.type&&obj.type==dojox.btt.grid.cells.Content){_282=true;}if(obj.name){obj.name=_281.getI18NString(obj.name);}else{if(obj.cells){arguments.callee(obj.cells);}}}}})(this.structure);console.log(_282);if(this.params&&!this.params.rowsPerPage&&_282){if(this.params.storeData.length>5000){this.rowsPerPage=2*this.params.storeData.length;}else{this.rowsPerPage=10000;}}},setStoreData:function(_283){var _284=this.store;if(this.rows_append==true){var _285=this.store._getItemsArray();var len=_285.length;for(var i=0;i<_283.length;i++){_285[len+i]=_283[i];}_283=_285;this.rows_append=false;}this.setStore(new dojo.data.ItemFileWriteStore({data:{items:_283},hierarchical:false}));if(dojo.isIE&&dojo.isIE<9){setTimeout(dojo.hitch(this,function(){try{this._refresh(true);}catch(e){try{this._refresh();}catch(e){}}}),400);}if(_284){this._setComparatorForColunm();_284.close();_284=null;}},_setStoreDataAttr:function(_286){if(!this.store){this.store=new dojo.data.ItemFileWriteStore({data:{items:dojo.fromJson(_286)},hierarchical:false});}},_setComparatorForColunm:function(){var _287;if(this.comparatorMap!=""){_287=dojo.fromJson(this.comparatorMap);}else{_287={};}var _288=null;if(this.structure[0]){_288=this.structure[0];}else{if(this.structure.cells[0]){_288=this.structure.cells[0];}}for(var i=0;_288&&i<_288.length;i++){if(_288[i].type){var cell=this.getCellByField(_288[i].field);if(cell.comparator){_287[_288[i].field]=dojo.hitch(cell,cell.comparator);}}}this.store.comparatorMap=_287;},getEditableStroeData:function(){if(this.storeDataName){var _289=this.layout.cells;var _28a=this.store;var _28b=this.selectable;var _28c=[];this.store.fetch({onComplete:function(_28d,_28e){for(var m=0;m<_28d.length;m++){var _28f={};var flag=false;for(var i=0;i<_289.length;i++){if(_289[i].editable){var name=_289[i].field;var _290=_28a.getValue(_28d[m],_289[i].field);if(_290&&_290!==""&&typeof _290!="string"){if(_289[i].editable&&_289[i].widget&&_289[i].widget.serialize){_290=_289[i].widget.serialize(_290,_289[i].widget.constraints);}}_28f[name]=(_290===null||_290==="null"?"":_290);flag=true;}}if(flag){_28c.push(_28f);}}}});if(_28c.length>0){return _28c;}else{return;}}else{return;}},_createInputNodesForObj:function(_291,obj,_292){for(var p in obj){if(obj[p]!=null&&typeof obj[p]=="object"){this._createInputNodesForObj(_291,obj[p],_292+"."+p);}else{var _293=_292+"."+p;var _294=obj[p]===null||typeof obj[p]=="undefined"?"":obj[p];var _295=dojo.query("input[type='hidden',name='"+_293+"']",_291);if(_295.length>0){_295.attr("value",_294);}else{var _296={};_296.type="hidden";_296.name=_293;_296.value=_294;dojo.create("input",_296,_291,"last");}}}},onFormSubmit:function(){if(this.disabled){return;}if(this.edit&&this.edit.apply){this.edit.apply();}if(this.storeDataName){var _297=this.layout.cells;var _298=this.store;var _299=this.storeDataName;var node=this.domNode;var _29a=this.selectable;dojo.query("> input[type=hidden]",node).forEach(function(node,_29b,_29c){dojo.destroy(node);});var _29d=this;if(!(this.store instanceof dojox.data.QueryReadStore)){this.store.fetch({onComplete:function(_29e,_29f){for(var m=0;m<_29e.length;m++){for(var i=0;i<_297.length;i++){if(_298.getValue(_29e[m],_297[i].field)!=null){break;}}if(i==_297.length){continue;}for(var i=0;i<_297.length;i++){if(_297[i].editable){var _2a0={};_2a0.type="hidden";_2a0.name=_299+"."+m+"."+_297[i].field;_2a0.value=_298.getValue(_29e[m],_297[i].field);if(_2a0.value&&_2a0.value!==""&&typeof _2a0.value!="string"){if(_297[i].editable&&_297[i].widget&&_297[i].widget.serialize){_2a0.value=_297[i].widget.serialize(_2a0.value,_297[i].widget.constraints);}}if(_2a0.value!==null&&typeof _2a0.value=="object"){_29d._createInputNodesForObj(node,_2a0.value,_2a0.name);}else{_2a0.value=_2a0.value===null?"":_2a0.value;dojo.create("input",_2a0,node,"last");}}}}}});}var _2a1=this._submitButtonForContextMenu&&(this._getParentForm()._clickedButton==this._submitButtonForContextMenu||this._getParentForm()._clickedButton==this._saveCancelButtonForContextMenu);var _2a2=!!(this._getParentForm()._clickedButton&&this._getParentForm()._clickedButton.get("cellWidgetId"));if(this.name&&(this.selectable||_2a1||_2a2)){var _297=this.layout.cells;var name=this.name;var _298=this.store;var node=this.domNode;if(_2a1||_2a2){var _2a3=[];_2a3.push(this.getItem(this.rowIndex));}else{var _2a3=this.selection.getSelected();}var _2a4=[];var _2a5=this.selectionMode=="single"||(!this.selectable&&this.selectionMode=="none"&&(_2a1||_2a2));for(var m=0;m<_2a3.length;m++){if((_2a5||_2a1||_2a2)&&m==1){break;}var _2a6=_2a3[m];if(this.launchNew){dojo.forEach(_298.getAttributes(_2a6),function(_2a7){var _2a8={};_2a8.type="hidden";if(_2a5){_2a8.name=name+"."+_2a7;}else{_2a8.name=name+"."+m+"."+_2a7;}_2a8.value=_298.getValue(_2a6,_2a7);for(var i=0;i<_297.length;i++){if(_297[i].field==_2a7){if(_2a8.value&&_2a8.value!==""&&typeof _2a8.value!="string"){if(_297[i].editable&&_297[i].widget&&_297[i].widget.serialize){_2a8.value=_297[i].widget.serialize(_2a8.value,_297[i].widget.constraints);}}if(_2a8.value!==null&typeof _2a8.value=="object"){_29d._createInputNodesForObj(node,_2a8.value,_2a8.name);}else{_2a8.value=_2a8.value===null?"":_2a8.value;dojo.create("input",_2a8,node,"last");}break;}}console.debug("tempObj",_2a8);});}_2a4[m]=_298.getIdentity(_2a6);if(_2a5){break;}}var _2a9={};_2a9.type="hidden";_2a9.name="dse_tableSelectedRows.isSingleSelect";_2a9.value=_2a5;dojo.create("input",_2a9,node,"last");var _2aa={};_2aa.type="hidden";_2aa.name="dse_tableSelectedRows.table_dataName";_2aa.value=this.name;dojo.create("input",_2aa,node,"last");var _2ab={};_2ab.type="hidden";_2ab.name="dse_tableSelectedRows.table_dataNameForList";_2ab.value=this.storeDataName;dojo.create("input",_2ab,node,"last");var _2ac={};_2ac.type="hidden";_2ac.name="dse_tableSelectedRows.tableId";_2ac.value=this.id;dojo.create("input",_2ac,node,"last");for(var i=0;i<_2a4.length;i++){var _2ad={};_2ad.type="hidden";_2ad.name="dse_tableSelectedRows.rowsIndexes."+i;_2ad.value=_2a4[i];dojo.create("input",_2ad,node,"last");}}}},_getValueAttr:function(){var _2ae=this._submitButtonForContextMenu&&(this._getParentForm()._clickedButton==this._submitButtonForContextMenu||this._getParentForm()._clickedButton==this._saveCancelButtonForContextMenu);var _2af=!!this._getParentForm()._clickedButton&&!!this._getParentForm()._clickedButton.get("cellWidgetId");return this._getSelectedValue(_2ae,_2af);},_getSelectedValue:function(_2b0,_2b1){if(this.selectable||_2b0||_2b1){if(_2b0||_2b1){var _2b2=[];_2b2.push(this.getItem(this.rowIndex));}else{var _2b2=this.selection.getSelected();}var _2b3=this.layout.cells;var _2b4=this.store;var _2b5=[];var _2b6=[];if(_2b2.length>0){var _2b7=this.selectionMode=="single"||(!this.selectable&&this.selectionMode=="none"&&(_2b0||_2b1));for(var m=0;m<_2b2.length;m++){var _2b8=_2b2[m];if(this.launchNew){var _2b9={};dojo.forEach(_2b4.getAttributes(_2b8),function(_2ba){for(var i=0;i<_2b3.length;i++){if(_2b3[i].field==_2ba){_2b9[_2ba]=_2b4.getValue(_2b8,_2ba);if(_2b9[_2ba]&&_2b9[_2ba]!==""&&typeof _2b9[_2ba]!="string"){if(_2b3[i].editable&&_2b3[i].widget&&(_2b3[i].widget instanceof com.ibm.btt.dijit.DateTextBox||_2b3[i].widget instanceof com.ibm.btt.dijit.NumberTextBox)&&_2b3[i].formatter){_2b9[_2ba]=_2b3[i].widget.serialize(_2b9[_2ba],_2b3[i].widget.constraints);}}_2b9[_2ba]=_2b9[_2ba]===null?"":_2b9[_2ba];break;}}});console.debug("tempObj",_2b9);if(_2b7){return _2b9;}if(_2b9&&_2b9!==""){_2b5.push(_2b9);}if(_2b0||_2b1){return _2b5;}}_2b6[m]=_2b4.getIdentity(_2b8);if(_2b7){break;}}if(this.launchNew){return _2b5;}var _2bb={};_2bb.table_dataName=this.name;_2bb.table_dataNameForList=this.storeDataName;_2bb.rowsIndexes=_2b6;_2bb.isSingleSelect=_2b7;_2bb.tableId=this.id;console.debug("###########  dse_tableSelectedRows info :"+_2bb.toString());return _2bb;}else{return null;}}else{if(this._cellEventRowData){return this._cellEventRowData;}else{return undefined;}}},_setVisibilityAttr:function(_2bc){if(_2bc=="gone"){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}if(this._firstTimeLoaded){this._eventHandlers.push(dojo.connect(this,"startup",dojo.hitch(this,function(){dojo.style(this.domNode,"display","none");dojo.style(this.domNode,"visibility","inherit");})));}else{dojo.style(this.domNode,"display","none");dojo.style(this.domNode,"visibility","inherit");}}else{if(_2bc=="hidden"){dojo.query("a.dojoxGridSortBtn",this.headerNodeContainer).forEach(function(node,_2bd,_2be){dojo.style(node,"visibility","hidden");});dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","inherit");dojo.query("a.dojoxGridSortBtn",this.headerNodeContainer).forEach(function(node,_2bf,_2c0){dojo.style(node,"visibility","");});this.update();}}this.visibility=_2bc;this._firstTimeLoaded=false;},getValueInSelectedItem:function(_2c1){console.warn("getValueInSelectedItem() has been deprecated, please use getValueInFirstSelectedItem() instead!");return this.getValueInFirstSelectedItem(_2c1);},getValueInFirstSelectedItem:function(_2c2){var _2c3=this.selection.getFirstSelected();if(!_2c3){return null;}var _2c4=this.store.getValue(_2c3,_2c2);return this._toString_CellValue(_2c2,_2c4);},_toString_CellValue:function(_2c5,_2c6){if((typeof (_2c6)=="string")||(_2c6 instanceof String)){return _2c6;}var cell=null;for(var i=0;i<this.layout.cells.length;i++){if(_2c5==this.layout.cells[i].field){cell=this.layout.cells[i];break;}}if(cell==null){return _2c6;}if(cell.widget){return cell.widget.format(_2c6,cell.widget.constraints);}try{switch(cell.widgetProps.dataType){case "Date":_2c6=dojo.date.locale.format(_2c6,{selector:"date",datePattern:cell.widgetProps.pattern});break;case "Number":case "Currency":var cons={};if(cell.widgetProps.pattern){cons["pattern"]=cell.widgetProps.pattern;}var _2c7=parseInt(cell.widgetProps.decimalPlaces);if(!isNaN(_2c7)){cons["places"]=_2c7;}_2c6=dojo.number.format(_2c6,cons);break;}}catch(e){console.warn("Can't convert ["+_2c6+"] to String.");}return _2c6;},_parseObject_CellValue:function(_2c8,_2c9){if((typeof (_2c9)!="string")&&!(_2c9 instanceof String)){return _2c9;}var cell=null;for(var i=0;i<this.layout.cells.length;i++){if(_2c8==this.layout.cells[i].field){cell=this.layout.cells[i];break;}}if(cell==null){return _2c9;}try{switch(cell.widgetProps.dataType){case "Date":_2c9=dojo.date.locale.parse(_2c9,{selector:"date",datePattern:cell.widgetProps.pattern});break;case "Number":case "Currency":var cons={};if(cell.widgetProps.pattern){cons["pattern"]=cell.widgetProps.pattern;}_2c9=dojo.number.parse(_2c9,cons);break;}}catch(e){console.warn("Can't convert ["+_2c9+"] to "+cell.widgetProps.dataType);}return _2c9;},getObjectInFirstSelectedItem:function(_2ca){var _2cb=this.selection.getFirstSelected();if(!_2cb){return undefined;}if(this.edit&&this.edit.apply){this.edit.apply();}var _2cc=this.store.getValue(_2cb,_2ca);return this._parseObject_CellValue(_2ca,_2cc);},getLengthOfSelectedRows:function(){return this.selection.getSelected().length;},getSelectedItem:function(){return this.attr("value");},_setWidthAttr:function(_2cd){if(_2cd!=""){this.width=this.handleLenUint(_2cd);dojo.style(this.domNode,"width",this.width);}},_setHeightAttr:function(_2ce){if(_2ce!=""){this.height=this.handleLenUint(_2ce);}},_forceSort:false,canSort:function(_2cf,_2d0){var cell=this.layout.cells[_2cf];var _2d1=(this.disabled==false)&&cell&&((this.sortEnabled&&!(cell.canSort==false||cell.canSort=="false"))||(cell.canSort===true));if(this._forceSort||_2d1){return this.inherited(arguments);}else{return false;}},setSortableColumn:function(id,_2d2){var _2d3=this._findColumn(id);var cell=this.layout.cells[_2d3];if(cell.canSort!=_2d2&&this.plugins.nestedSorting){cell.canSort=_2d2;this.render();}},sortColumn:function(_2d4,_2d5){if(_2d4==undefined){return;}var _2d6=[];for(var i=0;i<arguments.length;i++){if(typeof (arguments[i])=="boolean"){continue;}var cs={attribute:arguments[i],descending:arguments[i+1]==false};_2d6.push(cs);}if(_2d6.length<1){return;}this._forceSort=true;this.setSortIndex(_2d6);this._forceSort=false;this.render();},validate:function(_2d7,_2d8,_2d9){},checkSelectionNum:function(){this.showErrorIcon("");var _2da=this.selection.getSelected().length;var msg="";console.debug("this.selectionRequired",this.selectionRequired);console.debug("selectNum",_2da);if(this.selectionRequired&&_2da<1){if(this.selectionMode==="single"){msg=this._bundle.getMessage("rangeSingleMessage");this.SELECTION_VALID_STATE=false;}else{if(this.selectionMode==="extended"){msg=this._bundle.getMessage("rangeMultiMessage");this.SELECTION_VALID_STATE=false;}else{this.SELECTION_VALID_STATE=true;}}}else{this.SELECTION_VALID_STATE=true;}this.showErrorIcon(msg);this._set("state",this._getState());},showErrorIcon:function(_2db){if(this.errorMessageIcon){if(_2db){this.errorMessageIcon.title=_2db;this.errorMessageIcon.style.display="";var hint=this.get("hint");if(hint!=undefined&&hint!=null&&hint!=""){this._hint=hint;this.set("hint",_2db);}}else{this.errorMessageIcon.title="";this.errorMessageIcon.style.display="none";if(this._hint){this.set("hint",this._hint);delete this._hint;}}}},isValid:function(){var _2dc=this._getState()=="";console.debug("isValid",_2dc);return _2dc;},reset:function(){if((this.readOnly===true)||(this.disabled===true)){this.removeSelectedRows();return;}if(this.store instanceof dojo.data.ItemFileReadStore){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}this.store.revert();}},_setReadOnlyAttr:function(_2dd){console.debug("_setReadOnlyAttr",_2dd);this.readOnly=_2dd;},_setDisabledAttr:function(_2de){console.debug("_setDisabledAttr",_2de);this.disabled=_2de;if(this.disabled){if(this.selectionMode!="none"){if(!this._disableCache){this._disableCache={};}this._disableCache.selectionMode=this.selectionMode;this.selectionMode="none";this.selection.setMode(this.selectionMode);}if(this.columnReordering){if(!this._disableCache){this._disableCache={};}this._disableCache.columnReordering=this.columnReordering;this.columnReordering=false;if(this._pending_requests){this._refresh(true);}else{setTimeout(dojo.hitch(this,function(){this._refresh(true);}),1000);}}if(!dojo.query(".disabledGrid",this.id).length){var mask=dojo.create("div",{"class":"disabledGrid"},this.domNode);mask.onclick=dojo.stopEvents;mask.onDblClick=dojo.stopEvents;mask.onmouseover=dojo.stopEvents;mask.onmousemove=dojo.stopEvents;mask.onmouseout=dojo.stopEvents;mask.onmouseleave=dojo.stopEvents;mask.onmouseenter=dojo.stopEvents;mask.onmouseup=dojo.stopEvents;mask.onmousedown=dojo.stopEvents;mask.onfocus=dojo.stopEvents;mask.onkeydown=dojo.stopEvents;mask.onkeyup=dojo.stopEvents;mask.onkeypress=dojo.stopEvents;mask.onblur=dojo.stopEvents;mask.onkeypress=dojo.stopEvents;}dojo.addClass(this.domNode,"dijitDisabled");}else{if(this._disableCache&&this._disableCache.selectionMode){this.selectionMode=this._disableCache.selectionMode;this.selection.setMode(this.selectionMode);delete this._disableCache.selectionMode;}if(this._disableCache&&this._disableCache.columnReordering){this.columnReordering=this._disableCache.columnReordering;delete this._disableCache.columnReordering;if(dojo.isIE&&dojo.isIE<9){var _2df=this;setTimeout(function(){try{_2df._refresh(true);_2df._refresh(true);}catch(e){_2df._refresh(true);}},10);}else{this._refresh(true);}}dojo.query(".disabledGrid",this.id).forEach(function(node){dojo.destroy(node);});if(this._disableCache){delete this._disableCache;}dojo.removeClass(this.domNode,"dijitDisabled");}this.checkSelectionNum();},focusOn:function(){if(!this.isFocusable()){console.info("can't focus on grid, because it's not focusable");return;}var _2e0=(this.rowCount===0);if(!_2e0){var _2e1=0;var cell=this.getCell(_2e1);if(cell.hidden){_2e1=this.focus.isNavHeader()?this.focus._colHeadFocusIdx:0;}this.focus.setFocusIndex(0,_2e1);}else{this.focus.focusHeader();}},canEdit:function(_2e2,_2e3){if((this.readOnly===true)||(this.disabled===true)){return false;}else{return this.inherited(arguments);}},rowCSS:null,computeCCSS:function(_2e4,cell,_2e5){var grid=cell.grid;var ccss=[];if(typeof (grid.rowCSS)=="string"){grid.rowCSS=dojo.fromJson(grid.rowCSS);}for(var ci in grid.rowCSS){var c=grid.rowCSS[ci];for(var ri in c.forr){if(c.forr[ri]==_2e4||c.forr[ri]==_2e5){ccss.push(c.name);break;}}}if(typeof (cell.rowCSS)=="string"){cell.rowCSS=dojo.fromJson(cell.rowCSS);}for(var ci in cell.rowCSS){var c=cell.rowCSS[ci];for(var ri in c.forr){if(c.forr[ri]==_2e4||c.forr[ri]==_2e5){ccss.push(c.name);break;}}}return ccss;},buildViews:function(){var _2e6=this.layout.cells;for(var i=0;i<_2e6.length;i++){_2e6[i].headerClasses=(_2e6[i].headerClasses||"")+" "+this.computeCCSS("H",_2e6[i]).join(" ");_2e6[i].cellClasses=(_2e6[i].cellClasses||"")+" "+this.computeCCSS("R",_2e6[i]).join(" ");_2e6[i].classes=(_2e6[i].classes||"")+" "+this.computeCCSS("A",_2e6[i]).join(" ");if(this.cellOverflow=="ellipsis"&&_2e6[i].styles.indexOf("white-space")<0){_2e6[i].styles+="white-space:nowrap;";}}var grid=this;for(var i=0,vs;(vs=this.layout.structure[i]);i++){vs.raw_onBeforeRow=vs.onBeforeRow;vs.onBeforeRow=dojo.hitch(vs,function(_2e7,_2e8){if(this.raw_onBeforeRow){this.raw_onBeforeRow(_2e7,_2e8);}if(_2e7<0){_2e8[0].hidden=false;return;}var item=grid.getItem(_2e7);if(!item){return;}var _2e9=grid.layout.cells;for(var i=0;i<_2e9.length;i++){if(_2e9[i].field&&grid.store.getValue(item,_2e9[i].field)!==null){_2e8[0].hidden=false;return;}}_2e8[0].hidden=true;});}this.inherited(arguments);},onFetchError:function(err,req){if(err.responseText){(new dijit.Dialog({title:this._bundle.getMessage("errorDialogTitle"),content:err.responseText})).show();}},getWidget:function(arg){var _2ea=this.layout.cells;for(var i=0;i<_2ea.length;i++){if(_2ea[i].id==arg&&_2ea[i].getWidget){return _2ea[i].getWidget();}}return undefined;},_findColumn:function(_2eb){var _2ec=-1;var _2ed=this.layout.cells;for(var i=0;i<_2ed.length;i++){if(_2ed[i].id==_2eb){_2ec=i;break;}}if(_2ec<0&&/^\d+$/.test(""+_2eb)){console.warn("Can't find any column by ID["+_2eb+"], try to use the ID as the column index");_2ec=parseInt(_2eb);}return _2ec;},showColumn:function(_2ee){var _2ef=this._findColumn(_2ee);if(_2ef>-1&&_2ef<this.layout.cells.length&&this.disabled===false){this.layout.setColumnVisibility(_2ef,true);if(dojo.isIE){var _2f0=this;setTimeout(function(){try{_2f0._refresh();_2f0._refresh();}catch(e){_2f0._refresh();}},0);}window.setTimeout(dojo.hitch(this,function(){this.focusOn();}),100);}else{console.error("showColumn(id) can't find any column by ID: '"+id+"'");}},hideColumn:function(_2f1){var _2f2=this._findColumn(_2f1);if(_2f2>-1&&_2f2<this.layout.cells.length&&this.disabled===false){this.layout.setColumnVisibility(_2f2,false);if(dojo.isIE){var _2f3=this;setTimeout(function(){try{_2f3._refresh();_2f3._refresh();}catch(e){_2f3._refresh();}},0);}window.setTimeout(dojo.hitch(this,function(){this.focusOn();}),100);}else{console.error("hideColumn(id) can't find any column by ID: '"+id+"'");}},isColumnVisible:function(_2f4){var _2f5=this._findColumn(_2f4);if(_2f5>-1&&_2f5<this.layout.cells.length){return !this.layout.cells[_2f5].hidden;}else{console.error("isColumnVisible(id) can't find any column by ID: '"+id+"'");return undefined;}},destroy:function(){if(window[this.id]){window[this.id]=undefined;}while(this._eventHandlers.length>0){try{dojo.disconnect(this._eventHandlers.pop());}catch(e){}}this._eventHandlers=undefined;this.inherited(arguments);while(this.cwsl&&this.cwsl.length>0){try{this.cwsl.pop().destroy();}catch(e){}}this.cwsl=undefined;if(this.aew){for(var i=0;i<this.aew.length;i++){if(this.aew[i]){for(var j=0;j<this.aew[i].length;j++){try{this.aew[i][j].destroy();}catch(e){}}}}this.aew=undefined;}if(this.aewh){for(var i=0;i<this.aewh.length;i++){try{this.cwsl[i].destroy();}catch(e){}}this.aewh=undefined;}if(this.store&&this.store.destroy){this.store.destroy();}},_setClassAttr:function(arg){if(this.disabled){return;}else{this.inherited(arguments);this.textSizeChanged();}},_setSummaryAttr:function(_2f6){this.summary=_2f6;dojo.attr(this.domNode,"summary",_2f6);},_setNoDataMessageAttr:function(msg){if(msg){this.noDataMessage="<span class=\"dojoxGridNoData\">"+msg+"</span>";}},onAsyncTimeOut:function(){},onAsyncOK:function(){},onAsyncError:function(){},dodblclick:function(e){if(e.cell&&e.cell.alwaysEditing!=undefined&&e.cell.alwaysEditing==true){return;}else{this.inherited(arguments);}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Message"]){dojo._hasResource["com.ibm.btt.dijit.Message"]=true;dojo.provide("com.ibm.btt.dijit.Message");dojo.requireLocalization("com.ibm.btt.dijit","Message", null, "ROOT,zh-cn");dojo.declare("com.ibm.btt.dijit.Message",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<div><div dojoAttachPoint='staticHolder'><span dojoAttachPoint='staticMessageHolder' class='dijitLabelBase' role='alert'></span><span role='button' dojoAttachPoint='closeHandler' style='margin:0 0 0 5px;text-decoration:underline;cursor:pointer' tabIndex='0'></span></div><div dojoAttachPoint='dialogHolder'><span dojoAttachPoint='popupMessageHolder' class='dijitLabelBase'></span></div></div>",level:"ERROR",text:"",styleClass:"",name:"",messageArray:"",_popupDialog:null,isNotSubmitted:true,displayMode:"STATIC",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{}),postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Message");},postCreate:function(){this._init();this._showHideCloseHandler(false);if(this.text){this.display(this.text,this.level);}else{if(this.messageArray){try{var _2f7=dojo.fromJson(this.messageArray);this.displayMessageArray(_2f7);}catch(e){}}}},_init:function(){this.closeHandler.innerHTML=this.bundle.getMessage("closeMessage");this.styleClass={"ERROR":"errorMessage","WARN":"warnMessage","INFO":"infoMessage"};this.connect(this.closeHandler,"ondijitclick","closeMessage");},display:function(text,_2f8){if((text==="")||(text===null)||(text===undefined)){console.info("[display] Need text message for displaying");this._showHideCloseHandler(false);return;}var _2f9=this._getMessageValue.apply(this,arguments);this.staticMessageHolder.innerHTML=_2f9;if(_2f8===undefined){_2f8=this.level;}this._switchModeAndStyles("STATIC",_2f8);this._showHideCloseHandler(true);this.set("visibility","inherit");},displayMessageArray:function(_2fa){if(_2fa.length>0){var _2fb=[];for(var i=0;i<_2fa.length;i++){_2fb.push((i+1)+" ");_2fb.push(this._getMessageValue(_2fa[i]));if(i!=_2fa.length-1){_2fb.push("<br>");}}var _2fc=_2fb.join("");if(this.displayMode==="STATIC"){this.display(_2fc);}else{this.displayPopup(_2fc);}}},_showHideCloseHandler:function(flag){if(flag){dojo.style(this.closeHandler,{"display":""});}else{dojo.style(this.closeHandler,{"display":"none"});}},displayPopup:function(text,_2fd){if((text==="")||(text===null)||(text===undefined)){console.info("[displayPopup] Need text message for displaying");return;}var _2fe=this._getMessageValue.apply(this,arguments);this.popupMessageHolder.innerHTML=_2fe;if(_2fd===undefined){_2fd=this.level;}this._switchModeAndStyles("POPUP",_2fd);if(this._popupDialog===null){var _2ff=this.id+"messagePopup";this._popupDialog=new dijit.Dialog({id:_2ff,style:"min-width:300px;",title:this.bundle.getMessage("popupTitle")},this.dialogHolder);}this.set("visibility","inherit");},closeMessage:function(){this.set("visibility","gone");},_setVisibilityAttr:function(_300){this.inherited(arguments);if(this.displayMode!=="STATIC"&&this._popupDialog){if(_300=="gone"||_300=="hidden"){if(this._popupDialog.open){this._popupDialog.hide();}}else{if(!this._popupDialog.open){this._popupDialog.show();}}}},_setTextWrapAttr:function(_301){this.textWrap=_301;this._setTextLabelStyle();},_setWidthAttr:function(_302){if(_302!=""&&_302!=null){this.width=_302;dojo.style(this.staticMessageHolder,"width",this.handleLenUint(this.width));dojo.style(this.popupMessageHolder,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_303){if(_303!=""&&_303!=null){this.height=_303;dojo.style(this.staticMessageHolder,"height",this.handleLenUint(this.height));dojo.style(this.popupMessageHolder,"height",this.handleLenUint(this.height));}},_switchModeAndStyles:function(mode,_304){this.displayMode=mode;if(this.displayMode==="STATIC"){dojo.style(this.staticHolder,{"display":""});dojo.style(this.dialogHolder,{"display":"none"});if(this._popupDialog!==null){this._popupDialog.hide();}dojo.removeClass(this.staticMessageHolder);dojo.addClass(this.staticMessageHolder,this.styleClass[_304]);}else{dojo.style(this.dialogHolder,{"display":""});dojo.style(this.staticHolder,{"display":"none"});dojo.removeClass(this.popupMessageHolder);dojo.addClass(this.popupMessageHolder,this.styleClass[_304]);}this._setTextLabelStyle();},_setTextLabelStyle:function(){dojo.addClass(this.popupMessageHolder,"dijitLabelBase");if(this.textWrap==true){dojo.addClass(this.popupMessageHolder,"dijitLabelWrap");}else{dojo.removeClass(this.popupMessageHolder,"dijitLabelWrap");}dojo.addClass(this.staticMessageHolder,"dijitLabelBase");if(this.textWrap==true){dojo.addClass(this.staticMessageHolder,"dijitLabelWrap");}else{dojo.removeClass(this.staticMessageHolder,"dijitLabelWrap");}},_getMessageValue:function(text,_305){var _306="";if(arguments.length===1){_306=StringUtil.escapeEnterWrap(this.getI18NString(text));}else{if(arguments.length===2){_306=StringUtil.escapeEnterWrap(this.getI18NString(text));}else{if(arguments.length>2){var _307=[];for(var i=2;i<arguments.length;i++){_307.push(arguments[i]);}console.debug("display,dynamic attributes values",_307);_306=StringUtil.escapeEnterWrap(this.getI18NString(text,_307,true));}}}return _306;},_setValueAttr:function(_308){this.text=_308;},destroy:function(){this.inherited(arguments);if(this._popupDialog!==null){this._popupDialog.destroyRecursive();}}});}if(!dojo._hasResource["com.ibm.btt.dijit.FileUpload"]){dojo._hasResource["com.ibm.btt.dijit.FileUpload"]=true;dojo.provide("com.ibm.btt.dijit.FileUpload");dojo.declare("com.ibm.btt.dijit.FileUpload",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:dojo.cache("com.ibm.btt.dijit","templates/FileUpload.html","<div dojoAttachPoint=\"fileuploader\" class = \"fileupload_pane\">\r\n<!--\r\n/* \r\n *------------------------------------------------------------------- \r\n * Licensed Materials - Property of IBM\r\n * Restricted Materials of IBM\r\n * 5724-H82\r\n * (C) Copyright IBM Corp.2010 All Rights Reserved.\r\n * US Government Users Restricted Rights - Use, duplication or disclosure\r\n * restricted by GSA ADP Schedule Contract with IBM Corp\r\n -------------------------------------------------------------------\r\n */\r\n-->\r\n\t<span dojoAttachPoint=\"inputBox\"></span>\r\n\t<span dojoAttachPoint=\"browseBtn\"></span>\r\n\t<div dojoAttachPoint=\"uploadBtn\"></div>\r\n\t<span dojoAttachPoint=\"statusMessage\" class=\"loadingMsg\"></span>\r\n\t<div dojoAttachPoint=\"clearBtn\"></div>\r\n\t<span dojoAttachPoint=\"errorMessage\" class=\"errorMsg\"></span>\r\n</div>\r\n\r\n\r\n"),state:"Incomplete",required:false,disabled:false,_visibilityHolder:[],_isDisabled_uploadButton:false,tabIndex:"-1",width:"",_browse_width:null,inputText:null,f0:null,uploadButton:null,cancelButton:null,_state:"none",value:"",currentFileInfo:null,fileExtension:"",uploadUrl:"",storeDataName:"",bttParams:"",_bttParamJSON:null,_accessByKey:false,_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","FileUpload"),_mods:[],_eventHandlers:[],postCreate:function(){this._bttParamJSON=dojo.fromJson(this.bttParams);this.createInsideWidgets();this.renderItems();this.connectEvents();this.onShow();this._tabSupport(true);this.inherited(arguments);},createInsideWidgets:function(){this.inputText=new dijit.form.TextBox({},this.inputBox);dojo.addClass(this.inputText.domNode,"inputBox");this.setReadOnly(this.inputText,true);this.inputText.reset=null;this.uploadButton=new dijit.form.Button({label:this._bundle.getMessage("UPLOAD_BUTTON_LABEL")},this.uploadBtn);this.cancelButton=new dijit.form.Button({label:this._bundle.getMessage("CANCEL_BUTTON_LABEL")},this.clearBtn);this.browseBtn.innerHTML=this._bundle.getMessage("BROWSE_BUTTON_LABEL");var _309=this._buildParameter();var _30a;if(dojo.isIE){dojo.addClass(this.uploadButton.domNode,"commonButton");dojo.addClass(this.cancelButton.domNode,"commonButton");}this.f0=new com.ibm.btt.dijit.FileUploader(dojo.mixin({force:"html",uploadUrl:this.uploadUrl+_309,showProgress:false,selectMultipleFiles:false,uploadOnChange:false,tabIndex:-1},_30a),this.browseBtn);dojo.style(this.f0.insideNode,{"width":"0px"});this._calculateWidth();},_buildParameter:function(){var _30b="?dataName="+this.storeDataName;if(this._bttParamJSON.dse_processorId){_30b+="&processId="+this._bttParamJSON.dse_processorId;}if(this._bttParamJSON.dse_sessionId){_30b+="&sessionId="+this._bttParamJSON.dse_sessionId;}return _30b;},_calculateWidth:function(){var _30c=dojo.style(this.inputText.domNode,"width");var _30d=dojo.style(this.uploadButton.domNode,"width");var _30e=dojo.style(this.f0.domNode,"width");var _30f=dojo.style(this.cancelButton.domNode,"width");var _310=35;var _311=_30d+_30e+_30f+_310;var _312=_30c+_311;if(this.width){var _313=this.width.substr(0,this.width.lastIndexOf("px"));if(_313&&_313>_312){if(this.width&&_313>_312){dojo.style(this.fileuploader,"width",this.width);dojo.style(this.inputText.domNode,"width",(_313-_311)+"px");}else{dojo.style(this.fileuploader,"width",_312+"px");}}}this._browse_width=dojo.style(this.f0.domNode,"width");},_tabSupport:function(_314){if(_314){this.inputText.set("tabIndex","-1");this.f0.domNode.setAttribute("wairole","presentation");this.f0.domNode.setAttribute("role","presentation");this.f0.insideNode.setAttribute("wairole","presentation");this.f0.insideNode.setAttribute("role","presentation");this.f0.domNode.setAttribute("tabIndex","0");this.f0._fileInput.setAttribute("tabIndex","-1");this._eventHandlers.push(dojo.connect(this.f0.domNode,"onkeyup",dojo.hitch(this,function(e){if(e.keyCode==dojo.keys.ENTER||e.keyCode==dojo.keys.SPACE){this.f0._fileInput.click(e);dojo.stopEvent(e);}})));this._eventHandlers.push(dojo.connect(this.f0.insideNode,"onclick",dojo.hitch(this,function(e){if(!this.disabled){this.f0._fileInput.click(e);}dojo.stopEvent(e);})));}},renderItems:function(){console.debug("this.value",this.value);if(this.value){this._state="done";this._set("state","");try{this.currentFileInfo=dojo.fromJson(this.value);}catch(e){console.debug("error occurs",e);this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.value="";}}else{this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}}this._initRenderItems();this._initUIProperties();},_initRenderItems:function(){this.inputText.set("value","");this._clearMessage();if(this._state=="done"){console.debug("this.currentFileInfo",this.currentFileInfo);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");dojo.style(this.f0.domNode,"width","0px");this.setVisibility(this.inputText.domNode,false,true);this.setVisibility(this.uploadButton.domNode,false,true);this.setVisibility(this.cancelButton.domNode,true);this.statusMessage.innerHTML=this.currentFileInfo.name;}else{dojo.style(this.f0.domNode,"visibility","inherit");dojo.style(this.f0.insideNode,"visibility","inherit");dojo.style(this.f0.domNode,"width",this._browse_width+"px");dojo.fadeIn({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.inputText.domNode,true);this.setVisibility(this.uploadButton.domNode,false,false);this.setVisibility(this.cancelButton.domNode,false,false);}},_initUIProperties:function(){this._visibilityHolder=[];if(this.visibility=="hidden"||this.visibility=="gone"){if(this._state=="none"){this._visibilityHolder.push({dijit:this.inputText.domNode,visibility:"inherit"});this._visibilityHolder.push({dijit:this.f0.domNode,visibility:"inherit"});this._visibilityHolder.push({dijit:this.f0.insideNode,visibility:"inherit"});this.setVisibility(this.inputText.domNode,false,false);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");}else{this._visibilityHolder.push({dijit:this.cancelButton.domNode,visibility:"inherit"});this.setVisibility(this.cancelButton.domNode,false,true);this._visibilityHolder.push({dijit:this.statusMessage,visibility:"inherit"});dojo.style(this.statusMessage,"visibility","hidden");}}},_clearMessage:function(){this.statusMessage.innerHTML="";this.errorMessage.innerHTML="";dojo.style(this.errorMessage,"display","none");this._showErrorInputBox(false);},connectEvents:function(){this._eventHandlers.push(dojo.connect(this.f0,"onChange",this,this._handleSelect));this._eventHandlers.push(dojo.connect(this.uploadButton,"onClick",this,this._handleUpload));this._eventHandlers.push(dojo.connect(this.f0,"onComplete",this,function(_315){var _316=_315[0];console.debug("response",_316);var _317=_316.name;var _318=_316.errorCode;if(_317=="TypeError"||_318){this.handleError(_318);}else{this.handleSuccess(_316);}}));this._eventHandlers.push(dojo.connect(this.f0,"onCancel",this,function(){if(this.required){if(this._state=="none"&&(!this.f0._fileInput.value)){this._showErrorInputBox(true);this.displayMessage(this._bundle.getMessage("UPLOAD_REQUIRED"));}}}));this._eventHandlers.push(dojo.connect(this.f0,"onError",this,function(){console.debug("onError",this._state);if(this._state=="canceling"){}else{this.handleError();}}));this._eventHandlers.push(dojo.connect(this.cancelButton,"onClick",this,function(){this.reset();}));},_handleSelect:function(data){this.setVisibility(this.cancelButton.domNode,true);this.setVisibility(this.uploadButton.domNode,true);this._clearMessage();var _319=data[0];this.inputText.set("value",_319.name);var mask=_319.name.substr(_319.name.lastIndexOf(".")+1).toLowerCase();if(this.fileExtension!=""&&this.fileExtension.indexOf(mask)==-1){this.setDisabled(this.uploadButton,true);this._isDisabled_uploadButton=true;this.displayMessage(this._bundle.getMessage("UPLOAD_ERRORFILEMASK",{value:this.fileExtension}));this._showErrorInputBox(true);this._state="error";this._set("state","Error");this.validate();}else{this.setDisabled(this.uploadButton,false);this._isDisabled_uploadButton=false;this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.validate();}},_handleUpload:function(){this._state="uploading";this._set("state","Incomplete");this.setVisibility(this.uploadButton.domNode,false,true);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.domNode,"width","0px");dojo.fadeOut({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.cancelButton.domNode,true);this.statusMessage.innerHTML="";var _31a=document.createElement("img");this._mods.push(_31a);var _31b=dojo.moduleUrl("com.ibm.btt.dijit","images/loading.gif");_31a.setAttribute("src",_31b.path);this.statusMessage.appendChild(_31a);var _31c=document.createElement("span");this._mods.push(_31c);_31c.innerHTML=" "+this._bundle.getMessage("UPLOAD_UPLOADING");this.statusMessage.appendChild(_31c);console.debug("before f0.upload");var uuid=this.getUUID();this.f0.fileUploadUUID=uuid;this.f0.upload();console.debug("after f0.upload");setTimeout(dojo.hitch(this,this._queryFileSizeFromServer),3000);this.onUpload();},getUUID:function(){return dojox.uuid.generateRandomUuid();},_queryFileSizeFromServer:function(){if(this._state=="uploading"&&this.f0.fileUploadUUID){var _31d={url:this.f0.uploadUrl+"&uuid="+this.f0.fileUploadUUID+"&fileUpLoadAction=querySize",handleAs:"json",load:dojo.hitch(this,function(data){if(data&&this._state=="uploading"){if(data.errorCode=="7"){this.f0.cancel();}}}),error:dojo.hitch(this,function(_31e){if(this._state=="uploading"){this.reset();}})};dojo.xhrGet(_31d);}},_clearFizeSizePendingOnServer:function(){if(this.f0.fileUploadUUID){var _31f={url:this.f0.uploadUrl+"&uuid="+this.f0.fileUploadUUID+"&fileUpLoadAction=cancelPending",handleAs:"json",load:dojo.hitch(this,function(data){console.debug("Cancel the file uploading pending on server successfully");}),error:dojo.hitch(this,function(_320){console.debug("Error when canceling the file uploading pending on server");})};dojo.xhrGet(_31f);}},reset:function(){if(this._state=="done"){this._handleDelete();}else{this._handleCancel();}},_handleCancel:function(){if(this._state=="none"||this._state=="error"){this._resetUIforCancel();this.onCancel();}else{if(this._state=="uploading"){this._state="canceling";this._set("state","Incomplete");this.f0.cancel();this._resetUIforCancel();this.setDisabled(this.f0,false);this.onCancel();var _321=function(_322,args){this._resetUIforCancel();this.setDisabled(this.f0,false);this.onCancel();};var _323=function(_324,args){this.displayMessage(this._bundle.getMessage("CANCEL_FAILSURE_MESSAGE"));this._state="error";this._set("state","Error");};this._clearFizeSizePendingOnServer();this._deleteFile(_321,_323);}}},_resetUIforCancel:function(){this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.f0._clearUserSelection();this._initRenderItems();},_handleDelete:function(){this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this._initRenderItems();var _325=function(_326,args){console.debug("sucess delete");this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this._initRenderItems();this.onDelete();};var _327=function(_328,args){console.debug("error delete");this.displayMessage(this._bundle.getMessage("DELETE_FAILSURE_MESSAGE"));this._state="error";this._set("state","Error");};this._deleteFile(_325,_327);},handleError:function(_329){this._state="error";this._set("state","Error");this.statusMessage.innerHTML="";this.setVisibility(this.inputText.domNode,true);this._showErrorInputBox(true);dojo.style(this.f0.domNode,"visibility","inherit");dojo.style(this.f0.domNode,"width",this._browse_width+"px");dojo.fadeIn({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.uploadButton.domNode,true);this.setDisabled(this.f0,false);this.setDisabled(this.uploadButton,true);this._isDisabled_uploadButton=true;this.setVisibility(this.cancelButton.domNode,true);if(_329=="7"){this.displayMessage(this._bundle.getMessage("UPLOAD_FAILSURE_MESSAGE_FILESIZE"));}else{this.displayMessage(this._bundle.getMessage("UPLOAD_FAILSURE_MESSAGE"));}this._clearFizeSizePendingOnServer();this.onError();},handleSuccess:function(_32a){this._state="done";this._set("state","");this.statusMessage.innerHTML=_32a.name;this.value=_32a.name;this.currentFileInfo=_32a;console.debug("currentFileInfo",this.currentFileInfo);this.setVisibility(this.inputText.domNode,false,true);this.onComplete();},_showErrorInputBox:function(_32b){if(_32b){dojo.removeClass(this.inputText.domNode,"inputBox");dojo.addClass(this.inputText.domNode,"errInputBox");}else{dojo.removeClass(this.inputText.domNode,"errInputBox");dojo.addClass(this.inputText.domNode,"inputBox");}},_deleteFile:function(_32c,_32d){if(this._bttParamJSON&&this.currentFileInfo){console.debug("currentFileInfo",this.currentFileInfo);var _32e=this._buildParameter();_32e+="&fileId="+this.currentFileInfo.fileId;dojo.xhrDelete({url:this.uploadUrl+_32e,preventCache:true,error:dojo.hitch(this,function(_32f,args){dojo.hitch(this,_32d)(_32f,args);}),load:dojo.hitch(this,function(_330,args){console.debug("response",_330);console.debug("args",args);console.debug("File is successfully deleted");if(_330.errorCode){dojo.hitch(this,_32d)(_330,args);}else{this.currentFileInfo=null;dojo.hitch(this,_32c)(_330,args);}})});}},onUpload:function(){this.validate();},onComplete:function(){this.validate();},onCancel:function(){this.validate();},onError:function(){this.validate();},onDelete:function(){this.validate();},validate:function(){},getFileInfo:function(){return this.currentFileInfo;},reload:function(){this.value="";this.currentFileInfo=null;this._resetUIforCancel();},_setVisibilityAttr:function(_331){if(_331=="gone"){this._allDisappear();dojo.style(this.domNode,"visibility","hidden");dojo.style(this.domNode,"display","none");}else{if(_331=="hidden"){this._allDisappear();dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{this._allShowUp();dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","inherit");_331="inherit";}}this.visibility=_331;},_allShowUp:function(){dojo.forEach(this._visibilityHolder,function(v){dojo.style(v.dijit,"visibility",v.visibility);});this._visibilityHolder=[];},_holdVisibilityFeatures:function(_332){this._visibilityHolder.push({dijit:_332,visibility:"inherit"});},_allDisappear:function(){if(this.inputText){if(this._isVisible(this.inputText.domNode)){this._holdVisibilityFeatures(this.inputText.domNode);}dojo.style(this.inputText.domNode,"visibility","hidden");}if(this.f0){if(this._isVisible(this.f0.domNode)){this._visibilityHolder.push({dijit:this.f0.domNode,visibility:"inherit"});this._visibilityHolder.push({dijit:this.f0.insideNode,visibility:"inherit"});}dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");}if(this.uploadButton){if(this._isVisible(this.uploadButton.domNode)){this._holdVisibilityFeatures(this.uploadButton.domNode);}dojo.style(this.uploadButton.domNode,"visibility","hidden");}if(this.cancelButton){if(this._isVisible(this.cancelButton.domNode)){this._holdVisibilityFeatures(this.cancelButton.domNode);}dojo.style(this.cancelButton.domNode,"visibility","hidden");}},displayMessage:function(_333){dojo.style(this.errorMessage,"display","");if(_333){this.errorMessage.innerHTML=_333;}},setVisibility:function(_334,_335,_336){if(_335){dojo.style(_334,"visibility","inherit");dojo.style(_334,"display","");}else{dojo.style(_334,"visibility","hidden");if(_336){dojo.style(_334,"display","none");}}},_isVisible:function(node){var isV=false;if(node.offsetWidth<1||node.offsetHeight<1||dojo.style(node,"display")=="none"){isV=false;}else{isV=dojo.style(node,"visibility")!="hidden";}return isV;},setDisabled:function(_337,_338){if(_337){_337.set("disabled",_338);}},setReadOnly:function(_339,_33a){if(_339){_339.set("readOnly",_33a);}},onFormSubmit:function(){if(dojo.isIE){this.f0._formNode.innerHTML="";}},_setDisabledAttr:function(_33b){this.disabled=_33b;this.inherited(arguments);this.setDisabled(this.f0,_33b);if(!_33b){this.setDisabled(this.uploadButton,this._isDisabled_uploadButton);}else{this.setDisabled(this.uploadButton,_33b);}this.setDisabled(this.cancelButton,_33b);},destroy:function(){if(window[this.id]){window[this.id]=undefined;}while(this._eventHandlers.length>0){try{dojo.disconnect(this._eventHandlers.pop());}catch(e){}}this._eventHandlers=undefined;if(this._mods){while(this._mods.length>0){try{dojo.destroy(this._mods.pop());}catch(e){}}this._mods=undefined;}if(this.inputText&&this.inputText.destroy){this.inputText.destroy();}if(this.uploadButton&&this.uploadButton.destroy){this.uploadButton.destroy();}if(this.cancelButton&&this.cancelButton.destroy){this.cancelButton.destroy();}if(this.browseBtn&&this.browseBtn.destroy){this.browseBtn.destroy();}if(this.f0&&this.f0.destroy){this.f0.destroy();}this.inherited(arguments);}});dojo.declare("com.ibm.btt.dijit.FileUploader",[dojox.form.FileUploader],{dfd:null,trueFocus:false,isShowDialog:false,fileUploadUUID:"",_cons:[],cancel:function(){if(this.dfd){this.dfd.cancel();if(dojo.isIE){dojo.io.iframe._frame.contentWindow.document.location.replace("about:blank");}else{dojo.io.iframe._frame.contentWindow.stop();}}},uploadHTML:function(){if(this.selectMultipleFiles){dojo.destroy(this._fileInput);}this._setHtmlPostData();if(this.showProgress){this._animateProgress();}if(this.dfd){dojo.destroy(this.dfd);}this.dfd=dojo.io.iframe.send({url:this.fileUploadUUID?(this.uploadUrl+"&uuid="+this.fileUploadUUID):this.uploadUrl,form:this._formNode,handleAs:"json",error:dojo.hitch(this,function(err){console.debug("error",err.message);this._error("HTML Upload Error:"+err.message);}),load:dojo.hitch(this,function(data,_33c,_33d){this._complete(data);})});console.debug("dfd",this.dfd);},_clearUserSelection:function(){this.fileInputs=[];if(dojo.isIE){if(this._fileInput){this._disconnect();this._formNode.removeChild(this._fileInput);}this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var nm=this.htmlFieldName;var _33e=this.id;if(this.selectMultipleFiles){nm+=this.fileCount;_33e+=this.fileCount;this.fileCount++;}dojo.attr(this._fileInput,{id:this.id,name:nm,type:"file",onKeyPress:function(){return !(window.event&&window.event.keyCode==13);}()});dojo.addClass(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);var real=dojo.marginBox(this._fileInput);dojo.style(this._fileInput,{position:"relative",left:(this.fhtml.nr.w-real.w)+"px",opacity:0});this._connectInput();}else{this._fileInput.value="";}},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{tabIndex:"insideNode"}),onFocusOnInputText:function(){},_connectInput:function(){this._disconnect();this._cons.push(dojo.connect(this._fileInput,"mouseover",this,function(evt){dojo.addClass(this.domNode,this.hoverClass);this.onMouseOver(evt);}));this._cons.push(dojo.connect(this._fileInput,"mouseout",this,function(evt){setTimeout(dojo.hitch(this,function(){dojo.removeClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,this.hoverClass);this.onMouseOut(evt);this._checkHtmlCancel("off");}),0);}));this._cons.push(dojo.connect(this._fileInput,"mousedown",this,function(evt){dojo.addClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,this.hoverClass);this.onMouseDown(evt);}));this._cons.push(dojo.connect(this._fileInput,"mouseup",this,function(evt){dojo.removeClass(this.domNode,this.activeClass);this.onMouseUp(evt);this.onClick(evt);this._checkHtmlCancel("up");}));this._cons.push(dojo.connect(this._fileInput,"change",this,function(){this._checkHtmlCancel("change");this._change([{name:this._fileInput.value,type:"",size:0}]);}));if(this.tabIndex>=0){dojo.attr(this.domNode,"tabIndex",this.tabIndex);}this._cons.push(dojo.connect(this._fileInput,"focus",this,function(){if(!dojo.isIE){dojo.addClass(this.domNode,this.activeClass);}else{this.trueFocus=true;}if(this.dialogIsOpen){if(dojo.isIE){dojo.addClass(this.domNode,this.activeClass);}this.onCancel();}this.dialogIsOpen=false;}));if(dojo.isIE){this._cons.push(dojo.connect(this._fileInput,"keypress",this,function(evt){if(evt.keyCode==dojo.keys.TAB&&this.trueFocus){dojo.addClass(this.domNode,this.activeClass);}else{if(evt.charCode==dojo.keys.SPACE&&this.trueFocus){this.dialogIsOpen=true;}else{if(evt.keyCode==dojo.keys.ENTER){dojo.stopEvent(evt);}}}}));}else{this._cons.push(dojo.connect(this._fileInput,"keypress",this,function(evt){if(evt.charCode==dojo.keys.SPACE){this.dialogIsOpen=true;}}));}this._cons.push(dojo.connect(this._fileInput,"blur",this,function(evt){dojo.removeClass(this.domNode,this.activeClass);if(dojo.isIE){this.trueFocus=false;}}));},applyAccessKey:function(){if(this.f0._fileInput&&this.accessKey){this.f0._fileInput.setAttribute("accessKey",this.accessKey);}},destroy:function(){if(window[this.id]){window[this.id]=undefined;}if(this._cons){while(this._cons.length>0){try{dojo.disconnect(this._cons.pop());}catch(e){}}this._cons=undefined;}this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Group"]){dojo._hasResource["com.ibm.btt.dijit.Group"]=true;dojo.provide("com.ibm.btt.dijit.Group");dojo.declare("com.ibm.btt.dijit.Group",[dijit._Widget,dijit._Templated,dijit._Container,dijit.layout._ContentPaneResizeMixin,com.ibm.btt.dijit.AbstractWidgetMixin],{text:"",parseOnLoad:true,isContainer:true,width:"",height:"",templateString:"<fieldset dojoAttachPoint='domNode' class='dijitGroupBase'><legend dojoAttachPoint='textNode'></legend><div dojoAttachPoint='containerNode'></div></fieldset>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{}),postCreate:function(){this.inherited(arguments);dojo.style(this.containerNode,"overflow","auto");},startup:function(){try{if(new RegExp("\\s*\\d+\\s*px\\s*","i").test(this.height)){var th=dojo.contentBox(this.textNode).h;var fh=parseInt(this.height);var ch=Math.ceil(fh-th/2);dojo.style(this.containerNode,"height",ch+"px");dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}catch(e){console.error("error @ Group.startup : "+e);}this.inherited(arguments);},_setTextAttr:function(_33f){this.text=_33f;this.textNode.innerHTML=StringUtil.escapeHTML(this.getI18NString(_33f));},_setWidthAttr:function(_340){if(_340!=""){this.width=_340;dojo.style(this.domNode,"width",this.handleLenUint(this.width));dojo.style(this.containerNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_341){if(_341!=""){this.height=_341;dojo.style(this.containerNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.TabbedPane"]){dojo._hasResource["com.ibm.btt.dijit.TabbedPane"]=true;dojo.provide("com.ibm.btt.dijit.TabbedPane");dojo.declare("com.ibm.btt.dijit.TabbedPane",[dijit.layout.TabContainer,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"800",height:"600",constructor:function(){this._disableWatch={};},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"com.ibm.btt.dijit.ScrollingTabController":"com.ibm.btt.dijit.TabController";},startup:function(){this.inherited(arguments);this.set("visibility",this.visibility);var _342=this.getChildren();dojo.forEach(_342,function(_343){this._disableWatch[_343.id]=_343.watch("disabled",dojo.hitch(this,this._checkDisabedPane,_343));},this);this._setInitialTabSelection();this.resize();},_setVisibilityAttr:function(_344){this.inherited(arguments);if(typeof (this.tablist)!=="undefined"){if(_344=="hidden"){dojo.style(this.tablist.domNode,"visibility","hidden");}else{dojo.style(this.tablist.domNode,"visibility","inherit");}}},closeChildByIndex:function(i){var _345=this.getChildren();this.closeChild(_345[i]);},closeChildById:function(id){var _346=this.getChildren();for(var i=0;i<_346.length;i++){if(id===_346[i].id){this.closeChild(_346[i]);}}},selectChildByIndex:function(i){var _347=this.getChildren();this.selectChild(_347[i]);},selectChildById:function(id){var _348=this.getChildren();for(var i=0;i<_348.length;i++){if(id===_348[i].id){this.selectChild(_348[i]);break;}}},closeChild:function(_349){if(_349.get("disabled")!=true){this.inherited(arguments);}},selectChild:function(_34a){if(_34a.get("disabled")!=true){this.inherited(arguments);dijit.registry.forEach(function(w){if(w._hideXHint){w._hideXHint();}});}},hideTabByIndex:function(_34b){var _34c=this.getChildren();if(_34b>-1&&_34b<_34c.length){var _34d=this._getCurrentVisibleTabs();if(_34d.length>1){var _34e=_34c[_34b];var _34f=this.tablist.pane2button[_34e.id];dojo.style(_34f.domNode,"display","none");_34f._displayMark="hidden";if(_34e.selected){var i;for(i=0;i<_34d.length;i++){if(_34d[i].id==_34e.id){break;}}if(i+1<_34d.length){this.selectChildById(_34d[i+1].id);}else{this.selectChildById(_34d[i-1].id);}}}}},showTabByIndex:function(_350){var _351=this.getChildren();if(_350>-1&&_350<_351.length){var _352=this.getChildren()[_350];this.showTabById(_352.id);}},hideTabById:function(id){var _353=this.getChildren();for(var i=0;i<_353.length;i++){if(id===_353[i].id){this.hideTabByIndex(i);break;}}},showTabById:function(id){var _354=this.tablist.pane2button[id];dojo.style(_354.domNode,"display","");_354._displayMark="visible";},removeChild:function(_355){this.inherited(arguments);this._disableWatch[_355.id].unwatch();delete this._disableWatch[_355.id];},addChild:function(_356,_357){this.inherited(arguments);this._disableWatch[_356.id]=_356.watch("disabled",dojo.hitch(this,this._checkDisabedPane,_356));},_checkDisabedPane:function(_358,name,_359,_35a){if(_35a==true){var _35b=this.tablist.pane2button[_358.id];_35b.set("disabled",true);}else{var _35b=this.tablist.pane2button[_358.id];_35b.set("disabled",false);if(dojo.isIE){dojo.removeAttr(_358.domNode,"disabled");}}this._setTabSelection();},_setInitialTabSelection:function(){var _35c=this._getCurrentVisibleTabs();var _35d=0;for(var i=0;i<_35c.length;i++){if(_35c[i].get("disbaled")==true){_35d++;}}if(_35c.length>0&&_35d==_35c.length){_35c[0].disable=false;this.selectChildByIndex(0);_35c[0].disable=true;}else{this._setTabSelection();}var _35e=this.getChildren();for(var i=0;i<_35e.length;i++){this._checkDisabedPane(_35e[i],_35e[i].title,null,_35e[i].disabled);}},_setTabSelection:function(){var _35f=this._getCurrentVisibleTabs();var _360=-1;for(var i=0;i<_35f.length;i++){if(_35f[i].selected){_360=i;break;}}if(_360>-1&&_35f[_360].get("disabled")==true){for(var m=_360+1;m<_35f.length;m++){if(_35f[m].get("disabled")==false){this.selectChildById(_35f[m].id);return;}}for(var m=_360-1;m>=0;m--){if(_35f[m].get("disabled")==false){this.selectChildById(_35f[m].id);return;}}}if(_360>-1&&_35f[_360].get("disabled")==false){var _361=this.tablist.pane2button[_35f[_360].id];dojo.attr(_361.focusNode,"tabIndex","0");}},_getCurrentVisibleTabs:function(){var _362=this.getChildren();var _363=[];for(var i=0;i<_362.length;i++){var _364=this.tablist.pane2button[_362[i].id];if(!_364._displayMark||_364._displayMark=="visible"){_363.push(_362[i]);}}return _363;},_setWidthAttr:function(_365){if(_365!=""){this.width=_365;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_366){if(_366!=""){this.height=_366;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});dojo.declare("com.ibm.btt.dijit.ScrollingTabController",[dijit.layout.ScrollingTabController,com.ibm.btt.dijit.AbstractWidgetMixin],{});dojo.declare("com.ibm.btt.dijit.TabController",[dijit.layout.TabController,com.ibm.btt.dijit.AbstractWidgetMixin],{});}if(!dojo._hasResource["com.ibm.btt.dijit.ContentPane"]){dojo._hasResource["com.ibm.btt.dijit.ContentPane"]=true;dojo.provide("com.ibm.btt.dijit.ContentPane");dojo.declare("com.ibm.btt.dijit.ContentPane",[dijit.layout.ContentPane,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractAjaxMixin],{disabled:false,isFlowContainer:false,postCreate:function(){this.inherited(arguments);if(dojo.isIE&&dojo.hasAttr(this.domNode,"disabled")){dojo.removeAttr(this.domNode,"disabled");}},_setDisabledAttr:function(_367){this._set("disabled",_367);},_setTitleAttr:function(_368){this.titleKey=_368;var _369=this.getI18NString(_368);this._set("title",_369);},_getTitleAttr:function(){return this.titleKey;},_setIsFlowContainer:function(_36a){this.isFlowContainer=_36a;if(_36a===true||_36a==="true"){dojo.addClass(this.containerNode,"divFlowContainer");}else{dojo.removeClass(this.containerNode,"divFlowContainer");}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Hidden"]){dojo._hasResource["com.ibm.btt.dijit.Hidden"]=true;dojo.provide("com.ibm.btt.dijit.Hidden");dojo.declare("com.ibm.btt.dijit.Hidden",[dijit._Widget,dijit._Templated],{value:"",name:"",state:"",type:"hidden",templateString:"<input type='${type}'/>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:{node:"domNode"},name:{node:"domNode"}}),_setValueAttr:function(_36b){this.value=_36b;this.domNode.value=_36b;}});}if(!dojo._hasResource["com.ibm.btt.dijit.GridComparer"]){dojo._hasResource["com.ibm.btt.dijit.GridComparer"]=true;dojo.provide("com.ibm.btt.dijit.GridComparer");dojo.declare("com.ibm.btt.dijit.GridComparer",null,{compareNumber:function(_36c){var cons={};if(_36c["pattern"]){cons["pattern"]=_36c["pattern"];}return function(str1,str2){var num1;if(typeof str1=="string"){num1=dojo.number.parse(str1,cons);}else{num1=str1;}if(isNaN(num1)){num1=Number(str1);}var num2;if(typeof str2=="string"){num2=dojo.number.parse(str2,cons);}else{num2=str2;}if(isNaN(num2)){num2=Number(str1);}if(num1>num2){return 1;}else{if(num1<num2){return -1;}else{return 0;}}};},compareCurrency:function(_36d){return function(str1,str2){var num1=parseFloat(str1);var num2=parseFloat(str2);if(num1>num2){return 1;}else{if(num1<num2){return -1;}else{return 0;}}};},compareString:function(_36e){return function(str1,str2){if(str1>str2){return 1;}else{if(str1<str2){return -1;}else{return 0;}}};},compareDate:function(_36f){return function(str1,str2){var _370="yyyy-MM-dd";if(_36f){var _371=_36f["pattern"];if(_371){_370=_371;}}var _372={selector:"date",datePattern:_370,fullYear:true};var _373;var _374;if(typeof str1=="string"){_373=dojo.date.locale.parse(str1,_372);}else{_373=str1;}if(typeof str2=="string"){_374=dojo.date.locale.parse(str2,_372);}else{_374=str2;}if(!_373&&!_374){return 0;}if(!_373){return -1;}if(!_374){return 1;}return dojo.date.compare(_373,_374);};}});(function(){if(com.ibm.btt.dijit.GridComparer.instance==undefined){com.ibm.btt.dijit.GridComparer.instance=new com.ibm.btt.dijit.GridComparer();}})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetSizeMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetSizeMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractWidgetSizeMixin");dojo.declare("com.ibm.btt.dijit.AbstractWidgetSizeMixin",null,{width:"",height:"",_setWidthAttr:function(_375){if(_375!=""){this.width=_375;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_376){if(_376!=""){this.height=_376;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},handleLenUint:function(_377){var _378=function(src,_379){var reg=new RegExp(_379+"$");return reg.test(src);};if(_378(_377,"px")||_378(_377,"%")||_378(_377,"em")){return _377;}else{return _377+"px";}}});}if(!dojo._hasResource["com.ibm.btt.dijit.plugins.Pagination"]){dojo._hasResource["com.ibm.btt.dijit.plugins.Pagination"]=true;dojo.provide("com.ibm.btt.dijit.plugins.Pagination");dojo.declare("com.ibm.btt.dijit.plugins.Pagination",dojox.grid.enhanced._Plugin,{name:"bttpagination",mode:"simple",timeout:500,keepSingleSelection:false,_paginateable:true,init:function(){this._initParams();this._createPaginators(this.option);this._regApis();if(this.initialMode=="client"){if(this.mode=="simple"){this._requestFirstPage();}else{this.gotoPage("initial");}}},_initParams:function(){var _37a=this;var _37b=function(_37c,_37d){return _37a.option[_37c]!=undefined?_37a.option[_37c]:(_37a.grid[_37c]!=undefined?_37a.grid[_37c]:_37d);};var _37e=function(arg,_37f){var tmp=Number(arg);if(isNaN(tmp)){return _37f;}else{return tmp;}};this.mode=_37b("mode",this.mode);this.timeout=_37e(_37b("timeout",this.timeout),this.timeout);this.initialMode=_37b("initialMode","server");this.totalRowNumber=_37b("totalRowNumber",this.totalRowNumber);this.rowsPerPage=_37b("rowsPerPage",this.rowsPerPage);this.bttParams=_37b("bttParams",{});if(this.mode=="simple"){this._setPageSize(this.totalRowNumber);this.defaultRows=_37b("defaultRows",25);this._currentPage=0;this.nls=dojo.i18n.getLocalization("dojox.grid.enhanced","Pagination");}if(this.mode=="nonePageSize"){var _380=function(arg){if(arg=="false"){return false;}else{if(arg=="true"){return true;}else{return arg;}}};this.prevBtnEnabled=_37b("enablePrevious",false);this.prevBtnEnabled=_380(this.prevBtnEnabled);this.nextBtnEnabled=_37b("enableNext",true);this.nextBtnEnabled=_380(this.nextBtnEnabled);}},_setPageSize:function(_381){if(typeof (_381)!="defined"&&_381!=null&&_381!="null"){this.totalRowNumber=_381;this._maxSize=this.totalRowNumber;this.pageSize=this.rowsPerPage;this.totalPageSize=Math.ceil(this.totalRowNumber/this.rowsPerPage);}},_createPaginators:function(_382){this.paginators=[];if(this.mode=="simple"){if(_382.position==="both"){this.paginators=[new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_382,{position:"bottom",plugin:this})),new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_382,{position:"top",plugin:this}))];}else{this.paginators=[new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_382,{plugin:this}))];}}else{if(this.mode=="nonePageSize"){if(_382.position==="both"){this.paginators=[new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_382,{position:"bottom",plugin:this})),new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_382,{position:"top",plugin:this}))];}else{this.paginators=[new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_382,{plugin:this}))];}}else{console.error("Unsupport pagination mode, please check the parameter definition.");}}dojo.forEach(this.paginators,function(f){f.update();});},_stopEvent:function(_383){try{dojo.stopEvent(_383);}catch(e){}},_regApis:function(){var g=this.grid;g.gotoPage=dojo.hitch(this,this.gotoPage);g.nextPage=dojo.hitch(this,this.nextPage);g.prevPage=dojo.hitch(this,this.prevPage);g.gotoFirstPage=dojo.hitch(this,this.gotoFirstPage);g.gotoLastPage=dojo.hitch(this,this.gotoLastPage);g.getTotalRowCount=dojo.hitch(this,this.getTotalRowCount);},destroy:function(){this.inherited(arguments);var g=this.grid;try{dojo.forEach(this.paginators,function(p){p.destroy();});this.paginators=null;}catch(e){console.warn("Pagination.destroy() error: ",e);}},nextPage:function(e){if(this.mode=="simple"){this.gotoPage(this._currentPage+2);}if(this.mode=="nonePageSize"){this.gotoPage("next");}},prevPage:function(e){if(this.mode=="simple"){this.gotoPage(this._currentPage);}if(this.mode=="nonePageSize"){this.gotoPage("prev");}},gotoFirstPage:function(e){this.gotoPage(1);},gotoLastPage:function(e){this.gotoPage(this.totalPageSize);},gotoPage:function(e){if(this.grid.edit){this.grid.edit.apply();}this.grid.selection.deselectAll();if(this._paginateable==true){if(this.mode=="simple"&&e>=1&&e<=this.totalPageSize&&e!=(this._currentPage+1)){this._requestPageByNum(e);this._paginateable=false;dojo.forEach(this.paginators,function(p){p.disableBtns();});}if(this.mode=="nonePageSize"&&((e=="initial")||(e=="next"&&this.nextBtnEnabled)||(e=="prev"&&this.prevBtnEnabled))&&e!=(this._currentPage+1)){this._fetchData({"pageRequest.pageEvent":e,"mode":this.mode});this._paginateable=false;dojo.forEach(this.paginators,function(p){p.disableBtns();});}}},_requestPageByNum:function(e){this._fetchData({"pageRequest.pageEvent":"page","pageRequest.pageNumber":e,"mode":this.mode});this._currentPage=e-1;},_requestFirstPage:function(){this._fetchData({"pageRequest.pageEvent":"initial","pageRequest.pageNumber":1,"mode":this.mode});this._currentPage=0;},_fetchData:function(arg){console.log(this.bttParams);var data=this.bttParams;if(!data[AjaxUtil.constants.BTT_TIMEZONE]){data[AjaxUtil.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();}AjaxUtil.xhrPost({handleAs:"text",timeout:this.timeout,success:dojo.hitch(this,this._handleResponse),error:dojo.hitch(this,this._handleError)},dojo.mixin(data,arg));},_handleResponse:function(arg){try{var data=dojo.fromJson(arg);if(data.items){this.grid.setStoreData(data.items);if(this.mode=="simple"){this._setPageSize(data.totalRowNumber);}if(this.mode=="nonePageSize"){if(typeof (data.enableNext)!="undefined"){}this.nextBtnEnabled=this._setBtnState(data.enableNext);this.prevBtnEnabled=this._setBtnState(data.enablePrevious);}dojo.forEach(this.paginators,function(p){p.update();});}if(this.grid.selection.mode==="single"&&!this.keepSingleSelection){this.grid.selection.deselectAll();}dijit.focus(this.grid.domNode);if(data&&data.errMsg){this.grid.showErrorIcon(data.errMsg);}this.grid.onAsyncOK(arguments);}catch(e){this.grid.onAsyncError(arguments);this.handleResponseError(arg);}this._paginateable=true;},handleResponseError:function(arg){(new dijit.Dialog({title:"",content:arg})).show();},_setBtnState:function(_384){if(typeof (_384)!="undefined"&&_384!="null"&&_384!=null){if(_384==true||_384=="true"){return true;}else{return false;}}return false;},_handleError:function(arg){console.error("An error occured when loading pagination data from "+AjaxUtil.ajaxOperationUrl);this._paginateable=true;if(arg.dojoType==="timeout"){this.grid.onAsyncTimeOut(arguments);}else{if(arg.status!==undefined){this.grid.onAsyncError(arguments);}}},getTotalRowCount:function(){return this._maxSize;}});dojo.declare("com.ibm.btt.dijit.plugins.SimplePaginator",[dojox.grid.enhanced.plugins._Paginator],{pageSizes:undefined,showAll:true,_updateDescription:function(){},_onKeyDown:function(_385,_386){if(_385.ctrlKey||_385.altKey||_385.metaKey){return;}return this.inherited(arguments);},_onFocusPaginator:function(_387,step){if(this._currentFocusNode){dijit.focus(this._currentFocusNode);this.focusArea="pageStep";this.plugin._stopEvent(_387);return true;}else{return this._onFocusPageStepNode(_387);}},disableBtns:function(){var _388=null,_389=this._getCurrentPageNo(),_38a=this._getPageCount(),_38b=0;var _38c=function(node,_38d,_38e){var _38f=node.value,_390=_38d?"dojoxGrid"+_38f+"Btn":"dojoxGridNumBtnDisabled",_391=_38d?"dojoxGrid"+_38f+"BtnDisable":"dojoxGridNumBtnDisabled";if(_38e){dojo.addClass(node,_391);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_390);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(isNaN(parseInt(node.value,10))){dojo.addClass(node,"dojoxGridWardButton");var _392=node.value=="prevPage"||node.value=="firstPage"?1:_38a;_38c(node,true,true);}else{_388=parseInt(node.value,10);_38c(node,false,true);}},this);}});dojo.declare("com.ibm.btt.dijit.plugins.NonePageSizePaginator",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"paginatorBar\">\r\n\t<table cellpadding=\"0\" cellspacing=\"0\"  class=\"dojoxGridPaginator\">\r\n\t\t<tr>\r\n\t\t\t<td dojoAttachPoint=\"descriptionTd\" class=\"dojoxGridDescriptionTd\">\r\n\t\t\t\t<div dojoAttachPoint=\"descriptionDiv\" class=\"dojoxGridDescription\" />\r\n\t\t\t</td>\r\n\t\t\t<td dojoAttachPoint=\"sizeSwitchTd\"></td>\r\n\t\t\t<td dojoAttachPoint=\"pageStepperTd\" class=\"dojoxGridPaginatorFastStep\">\r\n\t\t\t\t<div dojoAttachPoint=\"pageStepperDiv\" class=\"dojoxGridPaginatorStep\"></div>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</table>\r\n</div>\r\n",position:"bottom",_maxItemSize:10,description:true,pageStepper:"30em",constructor:function(_393){dojo.mixin(this,_393);this.grid=this.plugin.grid;},postCreate:function(){this.inherited(arguments);this._setWidthValue();var self=this;var g=this.grid;this.plugin.connect(g,"_resize",dojo.hitch(this,"_resetGridHeight"));this._originalResize=dojo.hitch(g,"resize");g.resize=function(_394,_395){self._changeSize=g._pendingChangeSize=_394;self._resultSize=g._pendingResultSize=_395;g.sizeChange();};this._placeSelf();},destroy:function(){this.inherited(arguments);this.grid.focus.removeArea("pagination"+this.position.toLowerCase());this.grid.resize=this._originalResize;this.pageSizes=null;},update:function(){this.nextBtnEnabled=this.plugin.nextBtnEnabled?this.plugin.nextBtnEnabled:this.grid.nextBtnEnabled;this.prevBtnEnabled=this.plugin.prevBtnEnabled?this.plugin.prevBtnEnabled:this.grid.prevBtnEnabled;this._updatePageStepper();},disableBtns:function(){var _396=function(node,_397,_398){var _399=node.value,_39a=_397?"dojoxGrid"+_399+"Btn":"dojoxGridInactived",_39b=_397?"dojoxGrid"+_399+"BtnDisable":"dojoxGridActived";if(_398){dojo.addClass(node,_39b);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_39a);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(node.value=="prevPage"){dojo.addClass(node,"dojoxGridWardButton");_396(node,true,true);}if(node.value=="nextPage"){dojo.addClass(node,"dojoxGridWardButton");_396(node,true,true);}},this);},_setWidthValue:function(){var type=["description","sizeSwitch","pageStepper"];var _39c=function(str1,str2){var reg=new RegExp(str2+"$");return reg.test(str1);};dojo.forEach(type,function(t){var _39d,flag=this[t];if(flag===undefined||typeof flag=="boolean"){return;}if(dojo.isString(flag)){_39d=_39c(flag,"px")||_39c(flag,"%")||_39c(flag,"em")?flag:parseInt(flag,10)>0?parseInt(flag,10)+"px":null;}else{if(typeof flag==="number"&&flag>0){_39d=flag+"px";}}this[t]=_39d?true:false;this[t+"Width"]=_39d;},this);},_regFocusMgr:function(_39e){this.grid.focus.addArea({name:"pagination"+_39e,onFocus:dojo.hitch(this,this._onFocusPaginator),onBlur:dojo.hitch(this,this._onBlurPaginator),onMove:dojo.hitch(this,this._moveFocus),onKeyDown:dojo.hitch(this,this._onKeyDown)});switch(_39e){case "top":this.grid.focus.placeArea("pagination"+_39e,"before","header");break;case "bottom":default:this.grid.focus.placeArea("pagination"+_39e,"after","content");break;}},_placeSelf:function(){var g=this.grid;var _39f=dojo.trim(this.position.toLowerCase());switch(_39f){case "top":this.placeAt(g.viewsHeaderNode,"before");this._regFocusMgr("top");break;case "bottom":default:this.placeAt(g.viewsNode,"after");this._regFocusMgr("bottom");break;}},_resetGridHeight:function(_3a0,_3a1){var g=this.grid;_3a0=_3a0||this._changeSize;_3a1=_3a1||this._resultSize;delete this._changeSize;delete this._resultSize;if(g._autoHeight){return;}var _3a2=g._getPadBorder().h;if(!this.plugin.gh){this.plugin.gh=(g.domNode.clientHeight||dojo.style(g.domNode,"height"))+2*_3a2;}if(_3a1){_3a0=_3a1;}if(_3a0){this.plugin.gh=dojo.contentBox(g.domNode).h+2*_3a2;}var gh=this.plugin.gh,hh=g._getHeaderHeight(),ph=dojo.marginBox(this.domNode).h;ph=this.plugin.paginators[1]?ph*2:ph;if(typeof g.autoHeight=="number"){var cgh=gh+ph-_3a2;dojo.style(g.domNode,"height",cgh+"px");dojo.style(g.viewsNode,"height",(cgh-ph-hh)+"px");this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,cgh-ph-hh);}else{var h=gh-ph-hh-_3a2;dojo.style(g.viewsNode,"height",h+"px");var _3a3=dojo.some(g.views.views,function(v){return v.hasHScrollbar();});dojo.forEach(g.viewsNode.childNodes,function(c,idx){dojo.style(c,"height",h+"px");});dojo.forEach(g.views.views,function(v,idx){if(v.scrollboxNode){if(!v.hasHScrollbar()&&_3a3){dojo.style(v.scrollboxNode,"height",(h-dojox.html.metrics.getScrollbar().h)+"px");}else{dojo.style(v.scrollboxNode,"height",h+"px");}}});this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,h);}},_styleMsgNode:function(top,_3a4,_3a5){var _3a6=this.grid.messagesNode;dojo.style(_3a6,{"position":"absolute","top":top+"px","width":_3a4+"px","height":_3a5+"px","z-Index":"100"});},_updateDescription:function(){},_updatePageStepper:function(){if(!this.pageStepperTd){return;}if(this.pageStepperDiv.childNodes.length<1){this._createWardBtns();}this._updatePageStepNodeClass();},_createWardBtns:function(){var self=this;var _3a7={prevPage:"&#60;",firstPage:"&#171;",nextPage:"&#62;",lastPage:"&#187;"};var _3a8=function(_3a9,_3aa,_3ab){_3aa=I18nUtil.getI18nString(_3aa);var node=dojo.create("div",{value:_3a9,title:_3aa,tabindex:1},self.pageStepperDiv,_3ab);self.plugin.connect(node,"onclick",dojo.hitch(self,"_onPageStep"));dijit.setWaiState(node,"label",_3aa);var _3ac=dojo.create("span",{value:_3a9,title:_3aa,innerHTML:_3a7[_3a9]},node,_3ab);dojo.addClass(_3ac,"dojoxGridWardButtonInner");};_3a8("prevPage","%com.ibm.btt.dijit.Grid/prevPageBtn","first");_3a8("nextPage","%com.ibm.btt.dijit.Grid/nextPageBtn","last");},_updatePageStepNodeClass:function(){var _3ad=function(node,_3ae,_3af){var _3b0=node.value,_3b1=_3ae?"dojoxGrid"+_3b0+"Btn":"dojoxGridInactived",_3b2=_3ae?"dojoxGrid"+_3b0+"BtnDisable":"dojoxGridActived";if(_3af){dojo.addClass(node,_3b2);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_3b1);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(node.value=="prevPage"){dojo.addClass(node,"dojoxGridWardButton");if(this.prevBtnEnabled){_3ad(node,true,false);}else{_3ad(node,true,true);}}if(node.value=="nextPage"){dojo.addClass(node,"dojoxGridWardButton");if(this.nextBtnEnabled){_3ad(node,true,false);}else{_3ad(node,true,true);}}},this);},_onFocusPaginator:function(_3b3,step){if(!this._currentFocusNode){if(step!=0){return this._onFocusPageStepNode(_3b3);}else{return false;}}else{return false;}},_onFocusPageStepNode:function(_3b4){var _3b5=this._getPageStepActivableNodes();if(_3b4&&_3b4.type!=="click"){if(_3b5[0]){dijit.focus(_3b5[0]);this._currentFocusNode=_3b5[0];this.focusArea="pageStep";this.plugin._stopEvent(_3b4);return true;}else{return false;}}if(_3b4&&_3b4.type=="click"){if(dojo.indexOf(this._getPageStepActivableNodes(),_3b4.target)>-1){this.focusArea="pageStep";this.plugin._stopEvent(_3b4);return true;}}return false;},_onBlurPaginator:function(_3b6,step){var _3b7=this._getPageStepActivableNodes();if(step>0&&this.focusArea==="pageSize"&&(_3b7.length>1||this.gotoButton)){return false;}else{if(step<0&&this.focusArea==="pageStep"){return false;}}this._currentFocusNode=null;this.focusArea=null;return true;},_onKeyDown:function(_3b8,_3b9){if(_3b9){return;}if(_3b8.altKey||_3b8.metaKey){return;}var dk=dojo.keys;if(_3b8.keyCode===dk.ENTER||_3b8.keyCode===dk.SPACE){if(dojo.indexOf(this._getPageStepActivableNodes(),this._currentFocusNode)>-1){this._onPageStep(_3b8);}}this.plugin._stopEvent(_3b8);},_moveFocus:function(_3ba,_3bb,evt){var _3bc;if(this.focusArea=="pageStep"){_3bc=this._getPageStepActivableNodes();if(this.gotoPageDiv){_3bc.push(this.gotoPageDiv);}}if(_3bc.length<1){return;}var _3bd=dojo.indexOf(_3bc,this._currentFocusNode);var _3be=_3bd+_3bb;if(_3be>=0&&_3be<_3bc.length){dijit.focus(_3bc[_3be]);this._currentFocusNode=_3bc[_3be];}this.plugin._stopEvent(evt);},_getPageStepActivableNodes:function(){return (dojo.query("div[tabindex='0']",this.pageStepperDiv));},_getAllPageStepNodes:function(){var _3bf=[];for(var i=0,len=this.pageStepperDiv.childNodes.length;i<len;i++){_3bf.push(this.pageStepperDiv.childNodes[i]);}return _3bf;},_onPageStep:function(e){var g=this.grid;if(!this._currentFocusNode){this.grid.focus.currentArea("pagination"+this.position);}if(this.focusArea!="pageStep"){this.focusArea="pageStep";}switch(e.target.value){case "prevPage":if(e.target.className.indexOf("dojoxGridprevPageBtnDisable")<=0){g.prevPage();}break;case "nextPage":if(e.target.className.indexOf("dojoxGridnextPageBtnDisable")<=0){g.nextPage();}break;}}});dojox.grid.EnhancedGrid.registerPlugin(com.ibm.btt.dijit.plugins.Pagination);}if(!dojo._hasResource["com.ibm.btt.dijit.Dialog"]){dojo._hasResource["com.ibm.btt.dijit.Dialog"]=true;dojo.provide("com.ibm.btt.dijit.Dialog");dojo.declare("com.ibm.btt.dijit.Dialog",[dijit.Dialog,com.ibm.btt.dijit.AbstractWidgetMixin],{closable:false,_setClosableAttr:function(_3c0){this.closable=_3c0;if(this.closable){dojo.style(this.closeButtonNode,"display","");}else{dojo.style(this.closeButtonNode,"display","none");}},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var node=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _3c1=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_3c1){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_3c1){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{while(node){if(node==this.domNode||dojo.hasClass(node,"dijitPopup")){if(evt.charOrCode==dk.ESCAPE&&this.closable){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==dk.TAB){dojo.stopEvent(evt);}else{if(!dojo.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}},_endDrag:function(e){if(e&&e.node&&e.node===this.domNode){var pos=dojo.position(e.node);if(pos.y<0){pos.y=0;dojo.style(this.domNode,{top:pos.y+"px"});}this._relativePosition=pos;}}});}if(!dojo._hasResource["com.ibm.btt.dijit.ScreenCover"]){dojo._hasResource["com.ibm.btt.dijit.ScreenCover"]=true;dojo.provide("com.ibm.btt.dijit.ScreenCover");dojo.declare("com.ibm.btt.dijit.ScreenCover",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<div class='dijitScreenCover' style='display:none;' tabIndex='1'><div dojoAttachPoint='containerNode' class='dijitScreenCoverContainer'><div dojoAttachPoint='imageNode' class='dijitScreenCoverImage'></div><div dojoAttachPoint='textNode' class='dijitScreenCoverText'></div></div></div>",text:"%com.ibm.btt.dijit.ScreenCover/waitingText",postCreate:function(){this.inherited(arguments);dojo.body().appendChild(this.domNode);this.domNode.style.display="none";this._events=[];this._events.push(dojo.connect(dojo.global,"onresize",this,this.layout));this._events.push(dojo.connect(document,"onkeydown",this,this.onKey));},onKey:function(evt){if(evt.keyCode&&this.domNode.style.display==="block"){dojo.stopEvent(evt);return false;}},layout:function(){var _3c2=dojo.window.getBox();var bb=dojo._getBorderBox(this.containerNode);var l=Math.floor(_3c2.l+(_3c2.w-bb.w)/2);var t=Math.floor(_3c2.t+(_3c2.h-bb.h)/2);dojo.style(this.domNode,{top:_3c2.t+"px",left:_3c2.l+"px",width:_3c2.w+"px",height:_3c2.h+"px"});dojo.style(this.containerNode,{left:l+"px",top:t+"px"});},_setTextAttr:function(_3c3){this.text=_3c3;this.textNode.innerHTML=this.getI18NString(_3c3);},show:function(){if(this.domNode.style.display=="block"){return;}this.domNode.style.display="block";this.layout();try{this.domNode.focus();}catch(e){console.error("ScreenCover.show: "+e);console.error("ScreenCover.show.domNode1: "+this.domNode);console.error("ScreenCover.show.domNode2: "+this.domNode.outerHTML);}},hide:function(){this.domNode.style.display="none";},destroy:function(){while(this._events.length>0){dojo.disconnect(this._events.pop());}this._events=undefined;this.inherited(arguments);}});var ScreenCover={};ScreenCover.getInstance=function(){if(!ScreenCover._instance){ScreenCover._instance=new com.ibm.btt.dijit.ScreenCover();}return ScreenCover._instance;};}if(!dojo._hasResource["com.ibm.btt.dijit.Script"]){dojo._hasResource["com.ibm.btt.dijit.Script"]=true;dojo.provide("com.ibm.btt.dijit.Script");dojo.declare("com.ibm.btt.dijit.Script",[dijit._Widget,com.ibm.btt.dijit.AbstractWidgetMixin],{location:"",executeOnLoad:true,content:"",postCreate:function(){this.inherited(arguments);if(this.executeOnLoad==true){this.execute();}else{}},_handleLoadingResponse:function(_3c4){this.content=_3c4;},_handleLoadingError:function(_3c5){console.error("Failed to load script from url, "+_3c5);},_setContentAttr:function(_3c6){this.content=_3c6;},_setLocationAttr:function(_3c7){this.location=_3c7;if(this.content==""){var _3c8={url:this.location,handleAs:"text",sync:true,load:dojo.hitch(this,"_handleLoadingResponse"),error:dojo.hitch(this,"_handleLoadingError")};dojo.xhrGet(_3c8);}},execute:function(){var _3c9=this;var x="";if(arguments.length>0){x+="if(typeof paramTemp != 'undefined') {paramTemp = {'paramTemp':paramTemp};} else {var paramTemp={};}";}for(var i=0;i<arguments.length;i++){x+="if(typeof param"+i+" != 'undefined' ) {paramTemp['param"+i+"'] = param"+i+"; param"+i+" = null; } else {var param"+i+" = null;}";if(typeof arguments[i]=="string"){x+="param"+i+"='"+arguments[i].replace(/\'/g,"\\'").replace(/\"/g,"\\\"")+"';";}else{x+="param"+i+"="+arguments[i]+";";}}x=x+_3c9.content;for(var i=0;i<arguments.length;i++){x+="if(typeof paramTemp['param"+i+"'] != 'undefined'){param"+i+" = paramTemp['param"+i+"'];} else {delete param"+i+";}";}if(arguments.length>0){x+="if(typeof paramTemp != 'undefined' && typeof paramTemp['paramTemp'] != 'undefined') { paramTemp =  paramTemp['paramTemp']} else {delete paramTemp;}";}try{dojo.eval(x);}catch(e){console.error("An error occured while executing the script, "+e);}}});}if(!dojo._hasResource["com.ibm.btt.dijit.MultiSelect"]){dojo._hasResource["com.ibm.btt.dijit.MultiSelect"]=true;dojo.provide("com.ibm.btt.dijit.MultiSelect");dojo.declare("com.ibm.btt.dijit.MultiSelect",[com.ibm.btt.dijit.AbstractWidgetMixin,dijit.form.MultiSelect],{labelFieldForSubmit:"label",valueFieldForSubmit:"value",width:"",baseClass:"bttMultiSelect",buildRendering:function(){this.inherited(arguments);dojo.query("option",this.containerNode).forEach(function(node){if(node){dojo.attr(node,"_disabled",node["disabled"]);}});},postCreate:function(){this.inherited(arguments);if(this.width!=""){dojo.style(this.domNode,"width",this.width);}},_getValueAttr:function(){return this.getSelected().map(dojo.hitch(this,function(n){var _3ca={};_3ca[this.labelFieldForSubmit]=n.label||n.innerText;_3ca[this.valueFieldForSubmit]=n.value;return _3ca;}));},_setDisabledAttr:function(_3cb){var r=this.readOnly;dojo.query("option",this.containerNode).forEach(function(node){if(node){dojo.attr(node,"_disabled",_3cb);node["disabled"]=_3cb||r;}});this.inherited(arguments);dojo.toggleClass(this.domNode,"bttMultiSelectDisabled dijitDisabled",_3cb);this.domNode.disabled=_3cb||this.readOnly;},_setReadOnlyAttr:function(_3cc){var d=this.disabled;dojo.query("option",this.containerNode).forEach(function(node){if(node){dojo.attr(node,"_readOnly",_3cc);node["disabled"]=_3cc||d||dojo.attr(node,"_disabled");}});this.inherited(arguments);dojo.toggleClass(this.domNode,"bttMultiSelectReadOnly dijitReadOnly",_3cc);this.domNode.disabled=_3cc||this.disabled;}});}if(!dojo._hasResource["com.ibm.btt.dijit.CheckedMultiSelect"]){dojo._hasResource["com.ibm.btt.dijit.CheckedMultiSelect"]=true;dojo.provide("com.ibm.btt.dijit.CheckedMultiSelect");dojo.declare("com.ibm.btt.dijit.CheckedMultiSelect",[com.ibm.btt.dijit.AbstractWidgetMixin,dojox.form.CheckedMultiSelect],{labelFieldForSubmit:"label",valueFieldForSubmit:"value",width:"",_lastFocusedOption:null,postCreate:function(){this.inherited(arguments);if(this.width!=""){dojo.style(this.domNode,"width",this.width);}},_setDisabledAttr:function(_3cd){dojo.forEach(this.getOptions(),function(node){if(node){node["disabled"]=_3cd;}});this.inherited(arguments);},_setReadOnlyAttr:function(_3ce){this.inherited(arguments);dojo.toggleClass(this.domNode,"dojoxMultiSelectReadOnly dijitReadOnly",_3ce);},onAfterAddOptionItem:function(item,_3cf){item.set("readOnly",this.readOnly);item.set("disabled",this.disabled);dojo.attr(item.checkBox.focusNode,"tabIndex",this.tabIndex);item.connect(item,"onFocus",dojo.hitch(this,function(){if(this._lastFocusedOption){dojo.style(this._lastFocusedOption,"border","dotted 0px gray");}this._lastFocusedOption=item.labelNode;if(!(this.disabled||this.readOnly)){dojo.style(this._lastFocusedOption,"border","dotted 1px gray");}}));},onBlur:function(){this.inherited(arguments);if(this._lastFocusedOption){dojo.style(this._lastFocusedOption,"border","dotted 0px gray");}},_getValueAttr:function(){var opts=this.getOptions();var _3d0=dojo.filter(opts,function(n){return n.selected;});return dojo.map(_3d0,dojo.hitch(this,function(i){var _3d1={};_3d1[this.labelFieldForSubmit]=i.label||i.innerText;_3d1[this.valueFieldForSubmit]=i.value;return _3d1;}));}});}if(!dojo._hasResource["com.ibm.btt.dijit.EnhancedMultiSelect"]){dojo._hasResource["com.ibm.btt.dijit.EnhancedMultiSelect"]=true;dojo.provide("com.ibm.btt.dijit.EnhancedMultiSelect");dojo.declare("com.ibm.btt.dijit.EnhancedMultiSelect",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:dojo.cache("com.ibm.btt.dijit","templates/Ems.html","<div class=\"enhancedMultiSelect\">\r\n\t\t<div><span dojoAttachPoint=\"labelNode\" class=\"enhancedMultiSelectLabel\">1 of 10 selected</span></div>\r\n\t\t<div dojoAttachPoint=\"buttonNode\" class=\"enhancedMultiSelectButton\"><span class=\"enhancedMultiSelectSelAll\" data-dojo-attach-event=\"ondijitclick:_selectAll\" tabindex=\"${tabIndex}\">Select All</span>\r\n\t\t\t <span class=\"enhancedMultiSelectUnSel\" data-dojo-attach-event=\"ondijitclick:_unselectAll\" tabindex=\"${tabIndex}\">UnSelect All</span>\r\n\t\t\t <span class=\"enhancedMultiSelectInvert\" data-dojo-attach-event=\"ondijitclick:_invertSelection\" tabindex=\"${tabIndex}\">Invert Selection</span></div>\r\n\t\t<div><div multiple=\"true\" name=\"${dataName}\" tabindex=\"${tabIndex}\" labelFieldForSubmit=\"${labelFieldForSubmit}\"  valueFieldForSubmit=\"${valueFieldForSubmit}\" dojoType=\"com.ibm.btt.dijit.CheckedMultiSelect\"  dojoAttachPoint=\"wrapperDiv\"></div></div>\r\n</div>\r\n"),widgetsInTemplate:true,width:"",dataName:"",labelFieldForSubmit:"label",valueFieldForSubmit:"value",disabled:false,readOnly:false,tabIndex:0,buildRendering:function(){this.inherited(arguments);this.wrapperDiv.set("disabled",this.disabled);this.wrapperDiv.set("readOnly",this.readOnly);},postCreate:function(){this.inherited(arguments);this.wrapperDiv.addOption(dojo.map(this.srcNodeRef.options,function(o){return {label:o.text,value:o.value,selected:o.selected,disabled:o.disabled};}));if(this.width!=""){dojo.style(this.domNode,"width",this.width);dojo.style(this.wrapperDiv.domNode,"width",this.width);}this.connect(this.wrapperDiv,"_updateSelection",dojo.hitch(this,function(i){var fil=dojo.filter(this.wrapperDiv.getOptions(),function(item){return item.selected===true;});this.labelNode.innerHTML=fil.length+" of "+this.wrapperDiv.getOptions().length+" selected";}));},_setDisabledAttr:function(_3d2){this.disabled=_3d2;this.wrapperDiv.set("disabled",_3d2);dojo.toggleClass(this.buttonNode,"enhancedMultiSelectButton",!(this.disabled||this.readOnly));dojo.toggleClass(this.buttonNode,"enhancedMultiSelectButtonDisabled",this.disabled||this.readOnly);},_setReadOnlyAttr:function(_3d3){this.readOnly=_3d3;this.wrapperDiv.set("readOnly",_3d3);dojo.toggleClass(this.buttonNode,"enhancedMultiSelectButton",!(this.disabled||this.readOnly));dojo.toggleClass(this.buttonNode,"enhancedMultiSelectButtonDisabled",this.disabled||this.readOnly);},_selectAll:function(){if(!this.disabled&&!this.readOnly){dojo.forEach(this.wrapperDiv.getOptions(),function(_3d4){if(!_3d4.disabled){_3d4.selected=true;}});this.wrapperDiv._updateSelection();}},_unselectAll:function(){if(!this.disabled&&!this.readOnly){dojo.forEach(this.wrapperDiv.getOptions(),function(_3d5){if(!_3d5.disabled){_3d5.selected=false;}});this.wrapperDiv._updateSelection();}},_invertSelection:function(){if(!this.disabled&&!this.readOnly){dojo.forEach(this.wrapperDiv.getOptions(),function(_3d6){if(!_3d6.disabled){_3d6.selected=!_3d6.selected;}});this.wrapperDiv._updateSelection();}}});}if(!dojo._hasResource["com.ibm.btt.util.GlobalConfigurationUtil"]){dojo._hasResource["com.ibm.btt.util.GlobalConfigurationUtil"]=true;dojo.provide("com.ibm.btt.util.GlobalConfigurationUtil");dojo.getObject("com.ibm.btt.util.GlobalConfigurationUtil",true);(function(){com.ibm.btt.util.GlobalConfigurationUtil={getValue:function(key,_3d7){var v=this.values[key];v=(v!==undefined?v:_3d7);return v;},setValue:function(key,_3d8){this.values[key]=_3d8;},values:{}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.WebMessage"]){dojo._hasResource["com.ibm.btt.dijit.WebMessage"]=true;dojo.provide("com.ibm.btt.dijit.WebMessage");if(dojo.getObject("com.ibm.btt.WebMessageEngine")==undefined){dojo.setObject("com.ibm.btt.WebMessageEngine",{defered:false,initWebMsg:function(){if(this.defered){return this.defered;}var gcfg=com.ibm.btt.util.GlobalConfigurationUtil;this.privateTopic=gcfg.getValue("PrivateTopic","/btt/private/");this.broadcastTopic=gcfg.getValue("BroadcastTopic","/btt/broadcast");var _3d9=gcfg.getValue("WebMsgServlet","bttwebmsg");this.defered=dojox.cometd.init(_3d9);console.debug("initWebMsg @ "+_3d9);return this.defered;}});}dojo.declare("com.ibm.btt.dijit.WebMessage",dijit._Widget,{uid:"",isBroadcast:false,topics:[],_subscribedTopics:[],_wme:dojo.getObject("com.ibm.btt.WebMessageEngine"),postCreate:function(){this.inherited(arguments);dojo.style(this.domNode,"display","none");var def=this._wme.initWebMsg();if(this.uid!=""){def=def.then(dojo.hitch(this,this.subscribe,this._wme.privateTopic+this.uid));}if(this.isBroadcast){def=def.then(dojo.hitch(this,this.subscribe,this._wme.broadcastTopic));}for(var i=0;i<this.topics.length;i++){def=def.then(dojo.hitch(this,this.subscribe,this.topics[i]));}},publishMsg:function(_3da,msg){console.debug("WebMessage.publish message["+msg+"] @ topic : "+_3da);return dojox.cometd.publish(_3da,dojo.fromJson(msg));},sendPrivateMsg:function(uid,msg){this.publishMsg(this._wme.privateTopic+uid,msg);},broadcastMsg:function(msg){this.publishMsg(this._wme.broadcastTopic,msg);},subscribe:function(_3db){console.debug("WebMessage.subscribe topic : "+_3db);if(dojo.indexOf(this._subscribedTopics,_3db)<0){this._subscribedTopics.push(_3db);return dojox.cometd.subscribe(_3db,this,this._onWebMessage);}return false;},unsubscribe:function(_3dc){console.debug("WebMessage.unsubscribe topic : "+_3dc);var i=dojo.indexOf(this._subscribedTopics,_3dc);if(i>-1){delete this._subscribedTopics[i];return dojox.cometd.unsubscribe(_3dc,this,this._onWebMessage);}return false;},_onWebMessage:function(_3dd){console.debug("WebMessage._onWebMessage topic : "+_3dd.channel);console.debug("WebMessage._onWebMessage message : "+dojo.toJson(_3dd.data));this.onWebMessage(_3dd);},onWebMessage:function(_3de){},destroy:function(){while(this._subscribedTopics.length>0){dojox.cometd.unsubscribe(this._subscribedTopics.pop(),this,this._onWebMessage);}this._subscribedTopics=undefined;console.debug("WebMessage.destroy : "+this.id);this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.event._AccessKeyMixin"]){dojo._hasResource["com.ibm.btt.event._AccessKeyMixin"]=true;dojo.provide("com.ibm.btt.event._AccessKeyMixin");dojo.declare("com.ibm.btt.event._AccessKeyMixin",null,{_registeredKeyMaps:{},_globalKeyHandler:null,constructor:function(){this._connectKeyEvents();},_debugKeyState:function(evt){if(dojo.config.isDebug){console.debug("keyCode : "+evt.keyCode);console.debug("altKey : "+evt.altKey);console.debug("ctrlKey : "+evt.ctrlKey);console.debug("shiftKey : "+evt.shiftKey);console.debug("metaKey : "+evt.metaKey);}},_connectKeyEvents:function(){_globalKeyHandler=dojo.connect(document,"onkeydown",this,this._onKeyDown);},_onKeyDown:function(evt){var _3df=this._checkKeys(evt);if(_3df&&_3df.onKeyDown){if(_3df.onKeyDown(evt)===false){dojo.stopEvent(evt);if(dojo.isIE<9){try{evt.keyCode=0;}catch(e){}}return 0;}}return evt.keyCode;},_checkKeys:function(evt){for(var _3e0 in this._registeredKeyMaps){var _3e1=this._registeredKeyMaps[_3e0];if(_3e1.keys.keyCode==evt.keyCode&&((undefined==_3e1.keys.ctrlKeymetaKey)||(_3e1.keys.ctrlKeymetaKey==(evt.ctrlKey||evt.metaKey)))&&((undefined==_3e1.keys.altKey)||(_3e1.keys.altKey==evt.altKey))&&((undefined==_3e1.keys.shiftKey)||(_3e1.keys.shiftKey==evt.shiftKey))){return _3e1;}}return null;},registerKeys:function(url){if(url){var _3e2={"url":url,handleAs:"json",sync:true,load:dojo.hitch(this,"_loadKeys"),error:dojo.hitch(this,"_loadKeysError",url)};dojo.xhrGet(_3e2);}else{console.error("The argument can not be null.");}},_loadKeys:function(_3e3){if(_3e3){for(var i=0;i<_3e3.length;i++){var _3e4=_3e3[i];if(_3e4&&_3e4.name&&_3e4.onKeyDown){this._registeredKeyMaps[_3e4.name]=_3e4;}}}},_loadKeysError:function(url,_3e5){console.error("Fail to load the condition from : "+url);console.error("  Error : "+_3e5);},destroy:function(){this.inherited(arguments);if(_globalKeyHandler!=null){dojo.disconnect(_globalKeyHandler);}}});}if(!dojo._hasResource["com.ibm.btt.event._EventMixin"]){dojo._hasResource["com.ibm.btt.event._EventMixin"]=true;dojo.provide("com.ibm.btt.event._EventMixin");dojo.declare("com.ibm.btt.event._EventMixin",null,{_handlers:{},hashPos:0,constructor:function(){window.onhashchange=this.hashChangeHandler;},hashChangeHandler:function(){console.log(">>>>> Hash changed: ",location.hash);var _3e6=Engine.getInstance().parseHash(location.hash);if(Engine.getInstance().hashPos>_3e6){if(Engine.getInstance().backward(window.event)===false){console.log(">>>>> Reject Backward Hash change: ",location.hash);location.hash=Engine.getInstance().hashPos;}else{console.log(">>>>> Allow Backward Hash change: ",location.hash);return;}}else{if(window.engine.hashPos<_3e6){if(Engine.getInstance().forward(window.event)===false){console.log(">>>>> Reject Forward Hash change: ",location.hash);location.hash=Engine.getInstance().hashPos;}else{console.log(">>>>> Allow Forward Hash change: ",location.hash);return;}}}},updateHash:function(hash){console.log(">>>>> Update Hash ",location.hash);window.onhashchange=null;this.hashPos++;location.hash=this.hashPos;window.onhashchange=this.hashChangeHandler;},parseHash:function(hash){if(hash==null||hash==""){console.log(">>>>> Invalid Hash Found, return 0 instead: ",location.hash);return 0;}if(hash.charAt(0)!="#"){alert("Error: unexpected hash: "+hash);return 0;}var pos=parseInt(hash.substring(1),10);if(isNaN(pos)){alert("Error: unexpected hash: "+hash);return 0;}return pos;},registerHandler:function(url){if(url){var _3e7={"url":url,handleAs:"json",sync:true,load:dojo.hitch(this,"_loadHandler"),error:dojo.hitch(this,"_loadHandlerError",url)};dojo.xhrGet(_3e7);}else{console.error("The argument can not be null.");}},_loadHandler:function(_3e8){if(_3e8){for(var i=0;i<_3e8.length;i++){var h=_3e8[i];if(h&&h.name&&h.handler){if(h.name==="forward"){this.forward=dojo.hitch(this,h.handler);}else{if(h.name==="backward"){this.backward=dojo.hitch(this,h.handler);}else{if(h.name==="refresh"){this.refresh=dojo.hitch(this,h.handler);}else{if(h.name==="leave"){this.leave=h.handler;window.onbeforeunload=this.leave;}}}}}}}},_loadHandlerError:function(url,_3e9){console.error("Fail to load the navigation handler on "+url+", error : "+_3e9);},forward:function(evt){},backward:function(evt){},refresh:function(evt){},leave:function(evt){}});}if(!dojo._hasResource["com.ibm.btt.event.ECALoader"]){dojo._hasResource["com.ibm.btt.event.ECALoader"]=true;dojo.provide("com.ibm.btt.event.ECALoader");dojo.declare("com.ibm.btt.event.ECALoader",dijit._Widget,{prefix:"",url:"",_ruleEvents:[],postCreate:function(){this.inherited(arguments);this.loadECA();},loadECA:function(){var THIS=this;dojo.xhrPost({url:this.url,handleAs:"json",load:function(_3ea){dojo.forEach(_3ea,function(rule){if(rule){rule.prefix=THIS.prefix;dojo.forEach(rule.evts,function(_3eb){if(_3eb){_3eb.id=THIS.prefix+"_"+_3eb.id;}if(_3eb.repeatAt){_3eb.repeatAt=THIS.prefix+"_"+_3eb.repeatAt;}});if(rule.repeatCondAt){rule.repeatCondAt=THIS.prefix+"_"+rule.repeatCondAt;}if(rule.repeatActionAt){rule.repeatActionAt=THIS.prefix+"_"+rule.repeatActionAt;}}});dojo.addOnLoad(function(){if(Engine.getInstance() instanceof com.ibm.btt.event.NavigationEngine){Engine.getInstance().registerECARules(_3ea,null,THIS._ruleEvents);}else{Engine.getInstance().registerRules(_3ea,null,THIS._ruleEvents);}});},error:function(_3ec,args){console.error("Can't load ECA from "+args.url);console.error(_3ec);}});},destroy:function(){while(this._ruleEvents.length>0){try{dojo.disconnect(this._ruleEvents.pop());}catch(e){console.error("exception @ Engine.clearRules :"+e);}}this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.event._ConditionMixin"]){dojo._hasResource["com.ibm.btt.event._ConditionMixin"]=true;dojo.provide("com.ibm.btt.event._ConditionMixin");dojo.declare("com.ibm.btt.event._ConditionMixin",null,{_conditionMap:{},registerCond:function(url){if(url){var _3ed={"url":url,handleAs:"json",sync:true,load:dojo.hitch(this,"_loadCond"),error:dojo.hitch(this,"_loadCondError",url)};dojo.xhrGet(_3ed);}else{console.error("The argument can not be null.");}},_loadCond:function(cond){if(cond){for(var name in cond){if(name&&cond[name]&&typeof (cond[name])=="function"){this._conditionMap[name]=cond[name];}}}},_loadCondError:function(url,_3ee){console.error("Fail to load the condition on "+url+", error : "+_3ee);},executeCond:function(){var name=arguments[0];var args=[];var _3ef=Number(arguments.length);var i=1;while(i<_3ef){args.push(arguments[i]);i++;}try{if(this._conditionMap[name]){return this._conditionMap[name].apply(this,args);}else{console.error("Condition with specified name is not found. condition="+name);}}catch(e){console.error("An error occured while executing the condition "+name+", error "+e);}},executeDeprecatedCond:function(){var name=arguments[0];console.warn("The condition ["+name+"] is deprecated.");this.executeCond(arguments);}});}if(!dojo._hasResource["com.ibm.btt.event.Engine"]){dojo._hasResource["com.ibm.btt.event.Engine"]=true;dojo.provide("com.ibm.btt.event.Engine");dojo.declare("com.ibm.btt.event.Engine",[com.ibm.btt.event._ConditionMixin,com.ibm.btt.event._AccessKeyMixin,com.ibm.btt.event._EventMixin],{monitor:null,_ruleEvents:{},_ruleMaps:{},setMonitor:function(_3f0){this.monitor=_3f0;},registerRules:function(_3f1,_3f2,_3f3){this._formOnLoaded=[];for(var i=0;i<_3f1.length;i++){if(_3f1[i].evts){for(var j=0;j<_3f1[i].evts.length;j++){this._registerEvent(_3f1[i],_3f1[i].evts[j],_3f2,_3f3);}}if(_3f1[i].type&&_3f1[i].type=="AG"){this._ruleMaps[_3f1[i].name]=_3f1[i];}}for(var i=0;i<this._formOnLoaded.length;i++){if(this._formOnLoaded[i].onLoaded){this._formOnLoaded[i].onLoaded();}}delete this._formOnLoaded;this._formOnLoaded=undefined;},_getWidget:function(id){if(id.lastIndexOf(".")==-1){return dijit.byId(id);}else{var _3f4=id.substring(0,id.indexOf("."));var _3f5=id.substring(id.indexOf(".")+1,id.length);obj=dijit.byId(_3f4);if(obj&&obj.getWidget){return obj.getWidget(_3f5);}else{return null;}}},_registerEvent:function(rule,_3f6,_3f7,_3f8){var size=_3f6.repeatAt?dijit.byId(_3f6.repeatAt).get("size"):1;for(var i=0;i<size;i++){if(_3f6.id.lastIndexOf(".")==-1){var _3f9=_3f6.id+(_3f6.repeatAt?"_"+i:"");}else{var _3fa=_3f6.id.substring(0,_3f6.id.indexOf("."));var _3fb=_3f6.id.substring(_3f6.id.indexOf("."),_3f6.id.length);var _3f9=_3fa+(_3f6.repeatAt?"_"+i:"")+_3fb;}var obj=this._getWidget(_3f9);if(!obj){obj=dojo.byId(_3f9);}if(!obj){console.error("Failed to register event[name="+rule.name+"] because cannot find widget[id="+_3f9+"]");console.warn("  parent widget must provide getWidget(id) to support subwidget function.");return;}var _3fc=dojo.connect(obj,_3f6.e,this,(function(_3fd){return function(evt){this.idxPostfix=_3f6.repeatAt?"_"+_3fd:null;if(_3f6.repeatAt){dijit.byId(_3f6.repeatAt).setCurrentPanelIndex(_3fd);}if(this.monitor!=null){this.monitor.monitorStartRule(_3f6,rule);}var _3fe=!_3f6.repeatAt&&rule.repeatCondAt?dijit.byId(rule.repeatCondAt).get("size"):1;for(var j=0;j<_3fe;j++){if(!_3f6.repeatAt&&rule.repeatCondAt){this.idxPostfix="_"+j;dijit.byId(rule.repeatCondAt).setCurrentPanelIndex(j);}var _3ff=this._executeCondition(rule,evt);if(this.monitor!=null){this.monitor.monitorCondition(_3f6,rule,_3ff);}var _400=!_3f6.repeatAt&&!rule.repeatCondAt&&rule.repeatActionAt?dijit.byId(rule.repeatActionAt).get("size"):1;for(var m=0;m<_400;m++){if(!_3f6.repeatAt&&!rule.repeatCondAt&&rule.repeatActionAt){this.idxPostfix="_"+m;dijit.byId(rule.repeatActionAt).setCurrentPanelIndex(m);}this._executeAction(_3ff,rule,evt);}}if(this.monitor!=null){this.monitor.monitorEndRule(_3f6,rule);}};})(i));if(_3f6.e==="onLoaded"){var i;for(i=0;i<this._formOnLoaded.length;i++){if(this._formOnLoaded[i]==obj){break;}}if(i==this._formOnLoaded.length){this._formOnLoaded.push(obj);}}}if(!_3f7){_3f7="pageDefaultDivId";}if(!this._ruleEvents[_3f7]){this._ruleEvents[_3f7]=[];}if(_3f8){_3f8.push(_3fc);}else{this._ruleEvents[_3f7].push(_3fc);}},_executeCondition:function(rule,evt){var _401=true;if(rule&&rule.cond){try{_401=rule.cond.call(this,evt,rule);if(_401){_401=true;}else{_401=false;}}catch(e){_401=undefined;console.error("An error occured while testing the ECA condition. Terminate this ECA."+e.toString());}}return _401;},_executeAction:function(_402,rule,evt){if(_402===true){if(rule.onTrue){try{rule.onTrue.call(this,evt,rule);}catch(e){console.error("An error occured while ECA on true state excuting."+e.toString());}}}else{if(_402===false){if(rule.onFalse){try{rule.onFalse.call(this,evt,rule);}catch(e){console.error("An error occured while ECA on false state excuting."+e.toString());}}}}},executeAG:function(name,evt){if(name){var rule=this._ruleMaps[name];if(rule){var _403=!!this.idxPostfix;if(this.monitor&&this.monitor.monitorStartAG){this.monitor.monitorStartAG(rule);}var _404=!_403&&rule.repeatCondAt?dijit.byId(rule.repeatCondAt).get("size"):1;for(var j=0;j<_404;j++){if(!_403&&rule.repeatCondAt){this.idxPostfix="_"+j;dijit.byId(rule.repeatCondAt).setCurrentPanelIndex(j);}var _405=this._executeCondition(rule,evt);if(this.monitor&&this.monitor.monitorAGCondition){this.monitor.monitorAGCondition(rule,_405);}var _406=!_403&&!rule.repeatCondAt&&rule.repeatActionAt?dijit.byId(rule.repeatActionAt).get("size"):1;for(var m=0;m<_406;m++){if(!_403&&!rule.repeatCondAt&&rule.repeatActionAt){this.idxPostfix="_"+m;dijit.byId(rule.repeatActionAt).setCurrentPanelIndex(m);}this._executeAction(_405,rule,evt);}}if(this.monitor&&this.monitor.monitorEndAG){this.monitor.monitorEndAG(rule);}}else{console.error("can not find corresponding action group with given name '"+name+"'");}}else{console.error("Input argument name to execute an action group can not be null or undefined or empty.");}},clearRules:function(_407){if(!(_407&&this._ruleEvents[_407])){return;}var _408=this._ruleEvents[_407];while(_408.length>0){try{dojo.disconnect(_408.pop());}catch(e){console.error("exception @ Engine.clearRules :"+e);}}},clearAllRules:function(){for(var name in this._ruleEvents){if(name&&this._ruleEvents[name]){while(this._ruleEvents[name].length>0){try{dojo.disconnect(this._ruleEvents[name].pop());}catch(e){console.error("exception @ Engine.clearRules :"+e);}}this._ruleEvents[name]=undefined;}}this._ruleEvents={};this._ruleMaps={};},setPW:function(id,_409,_40a){if(this.monitor!=null){this.monitor.monitorSetPropertyAction(id,_409,_40a);}var obj=this._getWidget(id);if("xValidations"==_409&&obj&&typeof obj.idxPostfix!="undefined"){var _40b=[];for(var m=0;m<_40a.length;m++){if(_40a[m].repeatCondAt&&this.idxPostfix==null){var _40c=dijit.byId(_40a[m].repeatCondAt);for(var j=0;j<_40c.get("size");j++){var _40d={};_40d.name=_40a[m].name+"_"+j;_40d.cond=(function(_40e,_40f){return function(){this.idxPostfix=_40e;return _40f.call(this);};})("_"+j,_40a[m].cond);_40d.widgets=[];for(var i=0;i<_40a[m].widgets.length;i++){if(dojo.isArray(_40a[m].widgets[i])){var _410=_40a[m].widgets[i][0];if(_410.lastIndexOf(".")==-1){var _411=_410+"_"+j;}else{var _412=_410.substring(0,_410.indexOf("."));var _413=_410.substring(_410.indexOf("."),_410.length);var _411=_412+"_"+j+_413;}_40d.widgets.push(_411);}else{_40d.widgets.push(_40a[m].widgets[i]);}}_40d.hint=_40a[m].hint;_40d.repeatCondAt=_40a[m].repeatCondAt;_40b.push(_40d);}}else{if(_40a[m].repeatCondAt&&this.idxPostfix){obj.idxPostfix=this.idxPostfix;_40b.push(_40a[m]);}else{_40b.push(_40a[m]);}}}for(var z=0;z<_40b.length;z++){_40a[z]=_40b[z];}}var dn=undefined;if(!obj){dn=dojo.byId(id);}if(!obj&&!dn){console.error("Failed to set property["+_409+"] because cannot find the widget[id="+id+"]");return undefined;}if(obj){return obj.set(_409,_40a);}else{if(dn){return dojo.attr(dn,_409,_40a);}}},getPW:function(id,_414){var obj=this._getWidget(id);var dn=undefined;if(!obj){dn=dojo.byId(id);}if(!obj&&!dn){if(this.monitor!=null){this.monitor.monitorGetPropertyAction(id,_414,"ERROR[widget=null]");}console.error("Failed to get property["+_414+"] because cannot find the widget[id="+id+"]");return undefined;}var _415=undefined;if(obj){_415=obj.get(_414);}else{if(dn){_415=dojo.attr(dn,_414);}}if(this.monitor!=null){this.monitor.monitorGetPropertyAction(id,_414,_415);}return _415;},getW:function(id){var obj=this._getWidget(id);if(!obj){console.error("Failed to find widget[id="+id+"]");return undefined;}return obj;},runWF:function(id,_416,_417){var _418=this._getWidget(id);if(!_418){if(this.monitor!=null){this.monitor.monitorCallFunctionAction(id,_416,args,"ERROR[widget=null]");}console.error("Failed to run function["+_416+"] because cannot find the widget[id="+id+"]");return undefined;}var args=[];for(var i=2;i<arguments.length;i++){args[i-2]=arguments[i];}var _419=undefined;var er=null;try{_419=_418[_416].apply(_418,args);}catch(e){er="An error occured while running function["+_416+"]. "+e.toString();}if(this.monitor!=null){this.monitor.monitorCallFunctionAction(id,_416,args,er?"ERROR[exception]":_419);}if(er){console.error(er);}return _419;},runFunction:function(obj,func,args){return func.apply(obj,args);},runInlineScript:function(obj,func){var _41a;try{_41a=this.runFunction(obj,func,[]);}catch(e){_41a=undefined;console.error("exception @ Engine.runInlineScript:"+e);}return _41a;},stopEvent:function(evt){dojo.stopEvent(evt);return false;},destroy:function(){this.clearRules();this._ruleEvents=undefined;this.monitor=undefined;this._ruleMaps=undefined;}});(function(){function _41b(node){var nl=node.children;for(var i=0;i<nl.length;i++){_41b(nl.item(i));}if(node.tagName!="DIV"){return;}if(dojo.hasClass(node,"BTTCellStyle")){return _41c(node);}if(dojo.hasClass(node,"BTTRowStyle")){return _41d(node);}if(dojo.hasClass(node,"BTTTableStyle")){return _41e(node);}};function _41e(node){var _41f=node.attributes;var nat=[];for(var i=0;i<_41f.length;i++){var ar=_41f[i];if(ar.specified){nat[ar.nodeName]=ar.nodeValue;}}var _420=dojo.create("table",nat);_420.style.cssText=node.style.cssText;var _421=dojo.doc.createElement("tbody");while(node.firstChild){_421.appendChild(node.firstChild);}_420.appendChild(_421);node.replaceNode(_420);};function _41d(node){_422(node,"tr");};function _41c(node){_422(node,"td");};function _422(node,_423){var _424=node.attributes;var nat=[];for(var i=0;i<_424.length;i++){var ar=_424[i];if(ar.specified){nat[ar.nodeName]=ar.nodeValue;}}var nn=dojo.create(_423,nat);nn.style.cssText=node.style.cssText;while(node.firstChild){nn.appendChild(node.firstChild);}node.replaceNode(nn);};if(dojo.isIE&&dojo.isIE<8){dojo.parser.fp_dojo_parser_parse=dojo.parser.parse;dojo.parser.parse=function(_425,args){var root=(_425&&_425.rootNode)?_425.rootNode:_425;if(root==undefined){root=dojo.body();}_41b(root);return this.fp_dojo_parser_parse(_425,args);};}})();}if(!dojo._hasResource["com.ibm.btt.event.NavigationEngine"]){dojo._hasResource["com.ibm.btt.event.NavigationEngine"]=true;dojo.provide("com.ibm.btt.event.NavigationEngine");dojo.declare("com.ibm.btt.event.NavigationEngine",[com.ibm.btt.event.Engine],{url:"Request",_commandMap:{},_containerNode:null,_sessionId:"",_dialog:null,constructor:function(){var _426=this;if(dojo._postLoad){this.postCreate();this.onLoad();}else{dojo.addOnLoad(function(){_426.postCreate();_426.onLoad();});}},postCreate:function(){var head=document.getElementsByTagName("head")[0].innerHTML;var _427=head.match(/<title>(.*)<\/title>/i);if(_427){var _428=StringUtil.escapeEnterWrap(I18nUtil.getI18nString(_427[1]));document.title=_428;}this.registerCommand("render_page",dojo.hitch(this,this.renderPageHandler));this.registerCommand("popup_page",dojo.hitch(this,this.popupPageHandler));this.registerCommand("redirect",dojo.hitch(this,this.redirectPage));this.registerCommand("remote_flow",dojo.hitch(this,this.remoteFlowHandler));this.registerCommand("print",dojo.hitch(this,this.printHandler));this.registerCommand("render_sub_page",dojo.hitch(this,this.renderSubPageHandler));this.registerCommand("do_nothing",function(){console.info("do nothing is returned from server side.");});dojo.addOnLoad(dojo.hitch(this,function(){this.onLoad();}));},setRootContainer:function(_429){var _42a=this._getNodeByContainerId(_429);if(_42a){this._containerNode=_42a;}},launchNewFlow:function(_42b,_42c){if(!_42b){return;}if(!this._sessionId){this.sessionId=this._findSessionId();if(!this._sessionId){return;}}var _42d={"dse_sessionId":this._sessionId};if(_42b){_42d["dse_operationName"]=_42b;}_42d["dse_nextEventName"]="start";if(this._requestData&&this._requestData.data["dse_pageId"]){_42d["dse_pageId"]=this._requestData.data["dse_pageId"];}else{_42d["dse_pageId"]="-1";}_42d["dse_applicationId"]="-1";this._submitData(_42d,this._getNodeByContainerId(_42c));},registerRules:function(_42e,_42f){},registerECARules:function(_430,_431,_432){return com.ibm.btt.event.Engine.prototype.registerRules.call(this,_430,_431,_432);},_findSessionId:function(){var form=dojo.query("form[widgetId]",dojo.body()).map(dijit.byNode)[0];if(!form){return undefined;}var _433=dojo.fromJson(form.bttParams);return _433["dse_sessionId"];},changeFlowEvent:function(_434,_435){if(!_434){return;}var node=this._getNodeByContainerId(_435);if(!node){node=this._containerNode;}var form=dojo.query("form[widgetId]",node).map(dijit.byNode)[0];if(!form){return;}var _436=dojo.fromJson(form.bttParams);_436["dse_nextEventName"]=_434;var data=form.get("value");this._submitData(dojo.mixin(data,_436),node);},_getNodeByContainerId:function(_437){var node=null;if(_437){var _438=dijit.byId(_437);if(_438&&_438.containerNode){node=_438.containerNode;}else{_438=dojo.byId(_437);if(_438){node=_438;}}}return node;},onLoad:function(e,node){this._delegateAllFormSubmit(node);dojo.forEach(dojo.filter(dojo.query("form"),function(form){return form.title&&form.title!="";}),function(form){eval(form.title);});this._getCover().hide();},setUrl:function(_439){this.url=_439;},registerCommand:function(type,_43a){this._commandMap[type]=_43a;},_queryAllWidgets:function(node){if(!node){node=dojo.body();}return dojo.query("[widgetId]",node).map(dijit.byNode);},_disposeAllWidgets:function(_43b){var node;var _43c=this._getNodeByContainerId(_43b);if(_43c){node=_43c;}else{node=this._containerNode;}if(node){this._destroyDialog();dojo.forEach(this._queryAllWidgets(node),function(_43d){if(window[_43d.id]){window[_43d.id]=undefined;}try{_43d.destroy();}catch(e){console.debug("An error occured while destroying the widget[id="+_43d.id+"]. Error:"+e);}});dojo.empty(node);}else{this._destroyDialog();this._destroyCover();dojo.forEach(this._queryAllWidgets(),function(_43e){if(window[_43e.id]){window[_43e.id]=undefined;}try{_43e.destroy();}catch(e){console.error("An error occured, while destroying the widget. Error:"+e);}});dojo.empty(dojo.body());dijit._masterTT=undefined;this._containerNode=dojo.create("div",null,dojo.body(),"last");}if(com.ibm.btt.dijit.keyboards.instances){var _43f=com.ibm.btt.dijit.keyboards.instances;for(var i=0;i<_43f.length;i++){if(_43f[i]&&_43f[i].destroy){_43f[i].destroy();}}}},_unregisterEvents:function(arg,flag){if(flag){while(arg.length>0){dojo.disconnect(arg.pop());}}else{dojo.disconnect(arg);}},_delegateAllFormSubmit:function(node){var _440=this;dojo.forEach(this._queryAllWidgets(node),function(_441){if(_441.type!="undefined"&&(_441.type=="save"||_441.type=="cancel")){if(!_441.hasEventBundle){var _442=_441._onButtonClick;_441._onButtonClick=dojo.hitch(_440,_440._onButtonClick,_441,_442);}}if(_441.domNode.nodeName==="A"){if(!_441.hasEventBundle){var _443=_441.onClick;_441.onClick=dojo.hitch(_440,_440._onLinkClick,_441,_443);}}if(_441.domNode.nodeName==="FORM"){_441.onSubmit=dojo.hitch(_441,function(e){if(e){if(e.preventDefault){e.preventDefault();}dojo.stopEvent(e);}if(_441.validateOnSubmit){if(!_441.isValid()||!_441.xValid){return false;}}var _444=_441._querySubmitButton(e);dojo.forEach(_441.getDescendants(),function(_445){if(_445.onFormSubmit){try{_445.launchNew=false;if(_445 instanceof com.ibm.btt.dijit.Grid){var _446=dojo.fromJson(_445.bttParam4Link);var _447;if(_444!=undefined){if(_444.bttParams["dse_operationName"]!=undefined){_447=_444.bttParams;}else{_447=dojo.fromJson(_444.bttParams);}if(_446["dse_operationName"]!=_447["dse_operationName"]){_445.launchNew=true;}}}_445.onFormSubmit();}catch(e){console.error("Error occured while excuting the onFormSubmit events before form submitted.");}}});if(_441.onFormSubmit){_441.onFormSubmit();}_440._submitFormData(_441,_444);return false;});}});},_checkNewLaunch:function(form,_448){dojo.forEach(form.getDescendants(),function(_449){if(_449.onFormSubmit){if(_449 instanceof com.ibm.btt.dijit.Grid){_449.launchNew=false;var _44a=typeof _449.bttParam4Link=="string"?dojo.fromJson(_449.bttParam4Link):_449.bttParam4Link;var _44b=typeof _448.bttParams=="string"?dojo.fromJson(_448.bttParams):_448.bttParams;if(_44a["dse_operationName"]!=_44b["dse_operationName"]){_449.launchNew=true;}}}});},_onLinkClick:function(link,_44c,e){if(link.bttParams){dojo.stopEvent(e);if(link.get("target")!=="_blank"){var node=this._checkParentContainer(link.domNode);this._submitData(typeof link.bttParams=="string"?dojo.fromJson(link.bttParams):link.bttParams,node);}else{window.open(link.domNode.href);}return false;}else{if(link.action=="#"||!link.action){_44c.apply(link,[e]);}}},_onButtonClick:function(_44d,_44e,e){if(_44d.get("disabled")==false&&(_44d.type=="submit"||_44d.type=="cancel"||_44d.type=="save")){var form=_44d._getParentForm();if(form){form._clickedButton=_44d;}}else{var form=_44d._getParentForm();if(form){form._clickedButton=null;}}if(_44d.type=="save"&&_44d.get("disabled")==false){_44d._onClick(e);e.preventDefault();var form=_44d._getParentForm();this._checkNewLaunch(form,_44d);if(form&&_44d.bttParams){if(form.onFormSubmit){form.onFormSubmit();}var node=this._checkParentContainer(_44d.domNode);this._submitData(dojo.mixin(form.get("validValue"),typeof _44d.bttParams=="string"?dojo.fromJson(_44d.bttParams):_44d.bttParams),node);}}else{if(_44d.type=="cancel"&&_44d.get("disabled")==false){_44d._onClick(e);e.preventDefault();if(_44d.bttParams){var node=this._checkParentContainer(_44d.domNode);this._submitData(typeof _44d.bttParams=="string"?dojo.fromJson(_44d.bttParams):_44d.bttParams,node);}}else{_44e.apply(_44d,[e]);}}},_checkParentContainer:function(node){var _44f=node;var _450=null;while(_44f){if(dojo.hasClass(_44f,"divFlowContainer")){_450=_44f;break;}_44f=_44f.parentNode;}return _450;},_submitFormData:function(form,_451){if(_451&&_451.bttParams){var x=dojo.mixin(form.get("value"),typeof _451.bttParams=="string"?dojo.fromJson(_451.bttParams):_451.bttParams);x.dse_errorPage=form.bttErrorPage?form.bttErrorPage:null;if(x["dse_nextEventName"]){x[AjaxUtil.constants.BTT_SUBMITFORMID]=form.get("id");}var node=this._checkParentContainer(_451.domNode);this._submitData(x,node);}else{if(form.bttParams){var x=dojo.mixin(form.get("value"),typeof form.bttParams=="string"?dojo.fromJson(form.bttParams):form.bttParams);x.dse_errorPage=form.bttErrorPage?form.bttErrorPage:null;if(x["dse_nextEventName"]){x[AjaxUtil.constants.BTT_SUBMITFORMID]=form.get("id");}var node;if(_451){node=this._checkParentContainer(_451.domNode);}else{node=this._checkParentContainer(form.domNode);}this._submitData(x,node);}else{console.log("Do not find default BTT Params on form for user press enter operation.");}}},_submitData:function(data,node){if(!data[AjaxUtil.constants.BTT_TIMEZONE]){data[AjaxUtil.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();}AjaxUtil.xhrPost({headers:{"requesttype":"ajax"},url:this.url,handleAs:"json",success:dojo.hitch(this,this._handleFormResponse,node),error:dojo.hitch(this,this._handleError)},data);this._getCover().show();},_handleError:function(e,xhr){var _452;if(xhr){var _453=xhr.xhr.responseText;if(_453&&_453!=""){try{_453=dojo.fromJson(_453);if(_453["page"]){_452=_453["page"];}}catch(e){_452=_453;}}}if(!_452){if(e.message){_452=e.message;}else{_452="An error occured. Messsage : "+e;}}this._disposeAllWidgets();dojo.body().innerHTML=_452;this._getCover().hide();},_handleFormResponse:function(node,e){var _454;if(this._commandMap[e["command"]]){try{_454=this._commandMap[e["command"]](e,node);}catch(ee){this._handleError("An error occured while excuting the handler:"+e["command"]+" error:"+ee);}}else{this._handleError("Can not find corresponding command handler for command type='"+e["command"]+"'");}if(_454!==false){this._getCover().hide();}},createDialog:function(_455){var _456=new com.ibm.btt.dijit.Dialog(dojo.mixin({"title":"","closable":false},_455));return _456;},_adjustDialogPosition:function(data){var _457=dojo.window.getBox();var top=0;var left=0;var bb=dojo._getBorderBox(this._dialog.domNode);if(data.prop==undefined||data.prop.top==undefined){top=Math.floor(_457.t+(_457.h-bb.h)/2);}else{top=data.prop.top;}if(top<0){top=0;}if(data.prop==undefined||data.prop.left==undefined){left=Math.floor(_457.l+(_457.w-bb.w)/2);}else{left=data.prop.left;}if(left<0){left=0;}dojo.style(this._dialog.domNode,{left:left+"px",top:top+"px"});},_getDialog:function(data){if(!this._dialog){this._dialog=this.createDialog();this._dialog._position=function(){};this._dialog.eng=this;this._dialog.connect(this._dialog,"onCancel",function(){if(this.bttParams){this.eng._submitData(this.bttParams);}});this._dialog.startup();}var _458="auto";var _459="auto";var _45a="";var _45b=false;var _45c=undefined;if(typeof (data.prop)!="undefined"){if(data.prop.height&&data.prop.height>50){_458=data.prop.height+"px";}if(data.prop.width&&data.prop.width>100){_459=data.prop.width+"px";}if(data.prop.title!=undefined){_45a=data.prop.title;}_45b=data.prop.closable?true:false;if(_45b&&data.prop.bttParams!=undefined){_45c=data.prop.bttParams;}}data=undefined;dojo.style(this._dialog.containerNode,{"overflow":"auto","height":_458,"width":_459});if((_459+_458).indexOf("px")>0){this._dialog._size=function(){};}this._dialog.set("title",StringUtil.escapeEnterWrap(I18nUtil.getI18nString(_45a)));this._dialog.set("closable",_45b);this._dialog.bttParams=_45c;return this._dialog;},_destroyDialog:function(){if(this._dialog){delete this._dialog.eng;this._dialog.eng=undefined;delete this._dialog.bttParams;this._dialog.bttParams=undefined;try{this._dialog.destroyDescendants();this._dialog.destroy();}catch(e){console.debug("exception @ _destroyDialog: "+e);}this._dialog=undefined;}},_getCover:function(){return ScreenCover.getInstance();},_destroyCover:function(){if(ScreenCover._instance){ScreenCover._instance.destroy();ScreenCover._instance=undefined;}},isECARuleFile:function(src,_45d){var _45e=function(src,_45f){var reg=new RegExp(_45f+"$");return reg.test(src);};return _45e(src,_45d+".js");},_afterPageLoaded:function(data,_460){if(data["page_name"]){dojo.query("script",_460.domNode).forEach(dojo.hitch(this,function(_461){this._initWidgetsLite(_461,_460.domNode);if(_461.src&&this.isECARuleFile(_461.src,data["page_name"])){this._registerECAEvent(data["page_name"],_461.src);}}));}this.onLoad(data,_460.domNode);},_WCONFIGP:/^\s*window\["dse_widgetsConfig"\]/,_initWidgetsLite:function(_462,_463){if(this._WCONFIGP.test(_462.innerHTML)){dojo.eval(_462.innerHTML);if(window.dse_widgetsConfig){for(var idx=window.dse_widgetsConfig.length-1;idx>=0;idx--){var _464=window.dse_widgetsConfig[idx];if(_464.id){try{var node=dojo.byId(_464.id);if(node){for(var p in _464){if(p&&p!="id"){node.setAttribute(p,_464[p]);}}}}catch(e){console.error(e);}}}window.dse_widgetsConfig=undefined;dojo.parser.parse(_463?_463:dojo.body());}}},_registerECAEvent:function(name,url,_465){var _466={url:url,handleAs:"text",load:dojo.hitch(this,function(e){dojo.eval(e);if(window[name]){this.registerECARules(window[name],_465);try{delete window[name];}catch(e){}}})};dojo.xhrGet(_466);},_parsenextPageUrl:function(e){var data=dojo.fromJson(e.data);var url=["Request?dse_applicationId="+data["dse_applicationId"]];url.push("dse_processorId="+data["dse_processorId"]);url.push("dse_sessionId="+data["dse_sessionId"]);url.push("dse_processorState="+data["dse_processorState"]);url.push("dse_nextEventName="+data["dse_nextEventName"]);url.push("dse_operationName="+data["dse_operationName"]);url.push("dse_pageId="+data["dse_pageId"]);return url.join("&");},redirectPage:function(e){location.href=this._parsenextPageUrl(e);},popupPageHandler:function(data){if(dijit._masterTT_BTT&&dijit._masterTT_BTT.aroundNode){dijit.hiddenBTTTooltip(dijit._masterTT_BTT.aroundNode);}this._getCover().show();this.clearRules();this._destroyDialog();if(dojo.isOpera){dojo.query("*").attr("tabIndex",-1);}var page=dojo.isFF<4?data["page"].replace("src=\"js/dojo/dojo_BTT.js\"",""):data["page"];var test=page.match(/locale:'(.*)'/);if(test){var _467=test[1];if(_467.length>=2){if(djConfig.locale!=_467||dojo.locale!=_467){var old1=djConfig.locale;var old2=dojo.locale;if(!this._loadedLocales){this._loadedLocales=[];}if(old1!=old2){this._loadedLocales.push(old1);this._loadedLocales.push(old2);}else{this._loadedLocales.push(old1);}djConfig.locale=_467;dojo.locale=_467;console.debug("djConfig.locale : "+old1);console.debug("dojo.locale : "+old2);console.debug("new locale : "+_467);for(var _468 in dojo._loadedModules){var _469=""+_468;var ms=_469.split(".nls.");if(ms&&ms.length>=2){if(!this._containsLocale(ms[1])&&_467!="ROOT"){try{dojo.requireLocalization(ms[0],ms[1],_467,"","", "");}catch(e){console.debug("Fail to load : "+_469+" "+_467);}}}}}}}var _46a=this._getDialog(data);_46a.set("content",page).then(dojo.hitch(this,this._afterPageLoaded,data,_46a)).then(dojo.hitch(this,function(){_46a.show();this._adjustDialogPosition(data);}));return _46a;},renderPageHandler:function(data,node){if(dijit._masterTT_BTT&&dijit._masterTT_BTT.aroundNode){dijit.hiddenBTTTooltip(dijit._masterTT_BTT.aroundNode);}this._getCover().show();var _46b;if(node){this.clearRules(node.id);this._disposeAllWidgets(node);_46b=node;}else{this.clearAllRules();this._disposeAllWidgets();_46b=this._containerNode;}var page=dojo.isFF<4?data["page"].replace("src=\"js/dojo/dojo_BTT.js\"",""):data["page"];var test=page.match(/locale:'(.*)'/);if(test){var _46c=test[1];if(_46c&&_46c.length>1){if(djConfig.locale!=_46c||dojo.locale!=_46c){var old1=djConfig.locale;var old2=dojo.locale;if(!this._loadedLocales){this._loadedLocales=[];}if(old1!=old2){this._loadedLocales.push(old1);this._loadedLocales.push(old2);}else{this._loadedLocales.push(old1);}djConfig.locale=_46c;dojo.locale=_46c;console.debug("djConfig.locale : "+old1);console.debug("dojo.locale : "+old2);console.debug("new locale : "+_46c);for(var _46d in dojo._loadedModules){var _46e=""+_46d;var ms=_46e.split(".nls.");if(ms&&ms.length>=2){if(!this._containsLocale(ms[1])&&_46c!="ROOT"){try{dojo.requireLocalization(ms[0],ms[1],_46c,"","", "");}catch(e){console.debug("Fail to load : "+_46e+" "+_46c);}}}}}var _46f=_46c.split("-");if(_46f&&_46f[0]){var _470=_46f[0];var _471=document.getElementsByTagName("html")[0];if(_471.getAttribute("lang")){_471.setAttribute("lang",_470);}if(_471.getAttribute("xml:lang")){_471.setAttribute("xml:lang",_470);}}}}var _472=page.match(/<title>(.*)<\/title>/i);if(_472){var _473=StringUtil.escapeEnterWrap(I18nUtil.getI18nString(_472[1]));console.debug("New page title is "+_473);document.title=_473;}_46b.innerHTML=page;dojo.parser.parse(_46b);this.updateHash();if(data["page_name"]){dojo.query("script",_46b).forEach(dojo.hitch(this,function(_474){this._initWidgetsLite(_474,this._containerNode);if(_474.src&&this.isECARuleFile(_474.src,data["page_name"])){this._registerECAEvent(data["page_name"],_474.src);}}));}this.onLoad(data,_46b);},_containsLocale:function(_475){if(this._loadedLocales){for(var i=0;i<this._loadedLocales.length;i++){var p1=dojo.i18n.normalizeLocale(this._loadedLocales[i]);var p2=p1.replace(/\-/g,"_");var p3=p2.substring(0,2);var p4="ROOT";if(_475.indexOf(p1)!==-1||_475.indexOf(p2)!==-1||_475.indexOf(p3)!==-1||_475.indexOf(p4)!==-1){return true;}}return false;}return false;},remoteFlowHandler:function(data){if(dijit._masterTT_BTT&&dijit._masterTT_BTT.aroundNode){dijit.hiddenBTTTooltip(dijit._masterTT_BTT.aroundNode);}this._getCover().show();var _476=dojo.fromJson(data["data"]);console.info("############ remoteFlowHandler : ",_476);if(_476.dse_remoteFlowID){this.url=_476.dse_RemoteRequest_URL;AjaxUtil.ajaxOperationUrl=_476.dse_RemoteAjaxOp_URL;}else{this.url=_476.dse_RemoteSubFlow_URL;AjaxUtil.ajaxOperationUrl=_476.dse_remote_parent_AjaxURL;}if(!_476[AjaxUtil.constants.BTT_TIMEZONE]){_476[AjaxUtil.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();}AjaxUtil.xhrPost({headers:{"requesttype":"ajax"},url:_476.dse_RemoteSubFlow_URL,handleAs:"json",success:dojo.hitch(this,this._handleFormResponse),error:dojo.hitch(this,this._handleError)},_476);return false;},renderSubPageHandler:function(data){if(dijit._masterTT_BTT&&dijit._masterTT_BTT.aroundNode){dijit.hiddenBTTTooltip(dijit._masterTT_BTT.aroundNode);}this._getCover().show();for(var i=0;i<data.data.length;i++){var _477=data.data[i].divId;var node=this._getNodeByContainerId(data.data[i].divId);if(!node){return;}this.clearRules(data.data[i].divId);this._disposeAllWidgets(node);node.innerHTML=data.data[i].page;dojo.parser.parse(node);if(data.data[i]["page_name"]){dojo.query("script",node).forEach(dojo.hitch(this,function(_478){if(_478.src&&this.isECARuleFile(_478.src,data.data[i]["page_name"])){this._registerECAEvent(data.data[i]["page_name"],_478.src,data.data[i].divId);}}));}this.onLoad(data,node);}},printHandler:function(data){var _479=dojo.fromJson(data.page);var _47a=dojo.fromJson(_479.bttParams);delete _479.bttParams;var _47b=document.printApplet.printToDevice(dojo.toJson(_479));if(_47b===true||_47b==="true"){_47a["dse_nextEventName"]="success";}else{_47a["dse_nextEventName"]="error";}this._submitData(_47a);},destroy:function(){this.inherited(arguments);this._commandMap=undefined;this._disposeAllWidgets();this._destroyCover();}});var Engine={};Engine.getInstance=function(){if(!Engine._instance){Engine._instance=new com.ibm.btt.event.NavigationEngine();}return Engine._instance;};Engine.setInstance=function(_47c){Engine._instance=_47c;};}if(!dojo._hasResource["com.ibm.btt.event.BaseMonitor"]){dojo._hasResource["com.ibm.btt.event.BaseMonitor"]=true;dojo.provide("com.ibm.btt.event.BaseMonitor");dojo.declare("com.ibm.btt.event.BaseMonitor",null,{oldEvent:null,monitorEvent:function(_47d,rule){},monitorStartRule:function(_47e,rule){},monitorEndRule:function(_47f,rule){},monitorCondition:function(_480,rule,_481){},monitorStartAG:function(rule){},monitorEndAG:function(rule){},monitorAGCondition:function(rule,_482){},monitorCallFunctionAction:function(id,_483,_484){},monitorGetPropertyAction:function(id,_485,_486){},monitorSetPropertyAction:function(id,_487,_488){}});}if(!dojo._hasResource["com.ibm.btt.event.ConsoleMonitor"]){dojo._hasResource["com.ibm.btt.event.ConsoleMonitor"]=true;dojo.provide("com.ibm.btt.event.ConsoleMonitor");dojo.declare("com.ibm.btt.event.ConsoleMonitor",com.ibm.btt.event.BaseMonitor,{monitorStartRule:function(_489,rule){console.debug("Start Rule : "+(rule.name?"["+rule.name+"]":""),rule,"  for event ",_489.id+"."+_489.e);},monitorEndRule:function(_48a,rule){console.debug("End Rule : "+(rule.name?"["+rule.name+"]":""),rule,"  for event ",_48a.id+"."+_48a.e);},monitorCondition:function(_48b,rule,_48c){console.debug("    Evaluated Condition : Condition =",rule.cond,",  Result="+_48c);},monitorStartAG:function(rule){console.debug("Start Action Group : "+rule.name,rule);},monitorEndAG:function(rule){console.debug("End Action Group : "+rule.name,rule);},monitorAGCondition:function(rule,_48d){console.debug("    Evaluated Condition : Condition =",rule.cond,",  Result="+_48d);},monitorCallFunctionAction:function(id,_48e,args,_48f){if(typeof (_48f)!="undefined"&&_48f!=null){console.debug("    CallFunction Action : ",id+"."+_48e," , args=",args,", result=",_48f);}else{console.debug("    CallFunction Action : ",id+"."+_48e," , args=",args);}},monitorGetPropertyAction:function(id,_490,_491){console.debug("    GetProperty Action : ",id+"."+_490+"=="+_491);},monitorSetPropertyAction:function(id,_492,_493){console.debug("    SetProperty Action : ",id+"."+_492+"="+_493);}});}if(!dojo._hasResource["com.ibm.btt.util.GlobalFunctions"]){dojo._hasResource["com.ibm.btt.util.GlobalFunctions"]=true;dojo.provide("com.ibm.btt.util.GlobalFunctions");(function(){function _494(obj){return typeof (obj)=="undefined"||obj==null?true:false;};function _495(obj){if((obj.constructor===Number&&!isFinite(obj)&&!isNaN(obj))||/^[-+]?\d+$|^[-+]?\d+\.\d+$/.test(obj)){return true;}else{return false;}};function _496(obj){if(obj.constructor===Number){return obj;}else{return Number(obj);}};function _497(obj){if(obj.constructor===Date){return true;}else{return false;}};var _498={getI18NString:function(arg){return I18nUtil.getI18nString(arg);},length:function(str){return _494(str)?undefined:str.toString().length;},subString:function(str,_499,end){if(!_494(str)&&_495(_499)&&_495(end)){_499=_496(_499);end=_496(end);if(_499>end||_499<0||end>str.toString().length){return undefined;}else{return str.toString().substring(_499,end);}}else{return undefined;}},indexOf:function(str,_49a){return _494(str)||_494(_49a)?undefined:str.toString().indexOf(_49a.toString());},lastIndexOf:function(str,_49b){return _494(str)||_494(_49b)?undefined:str.toString().lastIndexOf(_49b.toString());},contains:function(str,str2){if(_494(str)||_494(str2)){return false;}else{return this.indexOf(str.toString(),str2.toString())>-1?true:false;}},replace:function(_49c,str1,str2){return !_494(_49c)&&!_494(str1)&&!_494(str1)?_49c.toString().replace(new RegExp(str1.toString(),"g"),str2.toString()):_49c;},trim:function(str){return _494(str)?undefined:str.toString().replace(/^(\s|\u00A0)+/,"").replace(/(\s|\u00A0)+$/,"");},concat:function(str1,str2){if(_494(str1)&&_494(str2)){return undefined;}else{if(_494(str1)){return str2.toString();}else{if(_494(str2)){return str1.toString();}else{return str1.toString().concat(str2.toString());}}}},upperCase:function(str){return _494(str)?undefined:str.toString().toUpperCase();},lowerCase:function(str){return _494(str)?undefined:str.toString().toLowerCase();},compare:function(str1,str2){if(_494(str1)||_494(str2)){return undefined;}if(str1.toString()>str2.toString()){return 1;}else{if(str1.toString()<str2.toString()){return -1;}else{return 0;}}},compareIgnoreCase:function(str1,str2){return _494(str1)||_494(str2)?undefined:str1.toString().toUpperCase().localeCompare(str2.toString().toUpperCase());}};var _49d={today:function(){return new Date();},after:function(date,days,_49e,_49f){if(_494(date)||!_497(date)){return undefined;}if(!_494(days)&&_495(days)){date.setDate(date.getDate()+_496(days));}if(!_494(_49e)&&_495(_49e)){date.setMonth(date.getMonth()+_496(_49e));}if(!_494(_49f)&&_495(_49f)){date.setFullYear(date.getFullYear()+_496(_49f));}return date;},before:function(date,days,_4a0,_4a1){if(_494(date)||!_497(date)){return undefined;}if(!_494(days)&&_495(days)){date.setDate(date.getDate()-_496(days));}if(!_494(_4a0)&&_495(_4a0)){date.setMonth(date.getMonth()-_496(_4a0));}if(!_494(_4a1)&&_495(_4a1)){date.setFullYear(date.getFullYear()-_496(_4a1));}return date;},daysBetween:function(_4a2,_4a3){if(_494(_4a2)||_494(_4a3)||!_497(_4a2)||!_497(_4a3)){return undefined;}var _4a4=Date.UTC(_4a2.getFullYear(),_4a2.getMonth(),_4a2.getDate(),_4a2.getHours(),_4a2.getMinutes(),_4a2.getSeconds(),_4a2.getMilliseconds())-Date.UTC(_4a3.getFullYear(),_4a3.getMonth(),_4a3.getDate(),_4a3.getHours(),_4a3.getMinutes(),_4a3.getSeconds(),_4a3.getMilliseconds());return _4a4/(1000*60*60*24);},naturalDaysBetween:function(_4a5,_4a6){if(_494(_4a5)||_494(_4a6)||!_497(_4a5)||!_497(_4a6)){return undefined;}var _4a7=Date.UTC(_4a5.getFullYear(),_4a5.getMonth(),_4a5.getDate(),0,0,0,0)-Date.UTC(_4a6.getFullYear(),_4a6.getMonth(),_4a6.getDate(),0,0,0,0);return _4a7/(1000*60*60*24);},dayOfWeek:function(date){if(_494(date)||!_497(date)){return undefined;}return date.getDay();},year:function(date){if(_494(date)||!_497(date)){return undefined;}return date.getFullYear();},month:function(date){if(_494(date)||!_497(date)){return undefined;}return date.getMonth();},day:function(date){if(_494(date)||!_497(date)){return undefined;}return date.getDate();},parseDate:function(obj,_4a8){if(_4a8){var _4a9={};_4a9.formatLength="long";_4a9.datePattern=_4a8;_4a9.selector="date";try{var _4aa=dojo.date.locale.parse(obj,_4a9);if(_4aa!=null){return _4aa;}else{return undefined;}}catch(ee){return undefined;}}else{if(_494(obj)||!(/^\d{4}-\d{2}-\d{2}$/.test(obj.toString()))){return undefined;}return new Date(obj);}},toString:function(obj){if(_494(obj)||!_497(obj)){return undefined;}var _4ab=obj.getMonth()+1;if(_4ab<10){_4ab="0"+_4ab;}var day=obj.getDate();if(day<10){day="0"+day;}return obj.getFullYear()+"-"+_4ab+"-"+day;}};var _4ac={round:function(num){if(_494(num)||!_495(num)){return undefined;}return Math.round(num);},truncate:function(num,flag){if(_494(num)||!_495(num)){return undefined;}if(flag){return Math.ceil(num);}else{return Math.floor(num);}},absolute:function(num){if(_494(num)||!_495(num)){return undefined;}return Math.abs(num);}};var _4ad={addClass:function(id,_4ae){var node=id;var wt=dijit.byId(id);if(wt){node=wt.domNode;}dojo.addClass(node,_4ae);},removeClass:function(id,_4af){var node=id;var wt=dijit.byId(id);if(wt){node=wt.domNode;}dojo.removeClass(node,_4af);},setVisibility:function(id,_4b0){var node=id;var wt=dijit.byId(id);if(wt){if(wt._setVisibilityAttr){return wt._setVisibilityAttr(_4b0);}node=wt.domNode;}var d="";var v="inherit";switch(_4b0){case "gone":d="none";v="inherit";break;case "hidden":d="";v="hidden";break;default:d="";v="inherit";}dojo.style(node,"display",d);dojo.style(node,"visibility",v);}};var _4b1={equals:function(arg1,arg2){if(arg1&&arg2&&arg1 instanceof Date&&arg2 instanceof Date){return dojo.date.compare(arg1,arg2,"date")==0;}else{return arg1==arg2;}}};window.BTTStringFunctions=_498;window.BTTDateFunctions=_49d;window.BTTNumberFunctions=_4ac;window.BTTDomFunctions=_4ad;window.BTTUtil=_4b1;})();}if(!dojo._hasResource["com.ibm.btt.dijit.RepetitivePanel"]){dojo._hasResource["com.ibm.btt.dijit.RepetitivePanel"]=true;dojo.provide("com.ibm.btt.dijit.RepetitivePanel");dojo.declare("com.ibm.btt.dijit.RepetitivePanel",[dijit._Widget,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractWidgetSizeMixin],{_panelDomList:null,_visibilityList:null,_currentPanelIndex:-1,dataNameForRow:"",selectionMode:"none",selectionRowIndex:-1,postCreate:function(){this._panelDomList=[];this._visibilityList=[];var _4b2=this;dojo.query("> div.innerPane",this.domNode).forEach(function(node){dojo.connect(node,"onclick",dojo.hitch(_4b2,_4b2._onRowClick,node));dojo.connect(node,"onkeydown",dojo.hitch(_4b2,_4b2._onRowKeyDown,node));_4b2._visibilityList.push("inherit");var _4b3=dojo.query("> table",node);if(_4b3.length>0){_4b2._panelDomList.push(_4b3[0]);}else{var _4b4=dojo.query("> div.BTTTableStyle",node);if(_4b4.length>0){_4b2._panelDomList.push(_4b4[0]);}}});},_getSizeAttr:function(){return this._panelDomList.length;},setVisibility:function(idx,vis){if(this._panelDomList.length<=idx){console.errer("Out of size of the repetitive panel");}var d="";var v="inherit";switch(vis){case "gone":d="none";v="inherit";break;case "hidden":d="";v="hidden";break;default:vis="inherit";d="";v="inherit";}this._visibilityList[idx]=vis;dojo.style(this._panelDomList[idx],"display",d);dojo.style(this._panelDomList[idx],"visibility",v);},getVisibility:function(idx){if(this._panelDomList.length<=idx){console.errer("Out of size of the repetitive panel");}var v=this._visibilityList[idx];if(v=="inherit"){var node=this._panelDomList[idx];if(node.offsetWidth<1||node.offsetHeight<1){v="gone";}else{v=dojo.style(node,"visibility")=="hidden"?"hidden":"visible";}}return v;},setStyleClass:function(idx,cls){if(this._panelDomList.length<=idx){console.errer("Out of size of the repetitive panel");}dojo.removeClass(this._panelDomList[idx]);dojo.addClass(this._panelDomList[idx],cls);},hasStyleClass:function(idx,cls){if(this._panelDomList.length<=idx){console.errer("Out of size of the repetitive panel");}return dojo.hasClass(this._panelDomList[idx],cls);},getCurrentPanelIndex:function(){return this._currentPanelIndex;},setCurrentPanelIndex:function(_4b5){this._currentPanelIndex=_4b5;},_onRowClick:function(node,e){if(this.selectionMode=="single"){this._updateSelection(node);}},_onRowKeyDown:function(node,e){if(this.selectionMode=="single"&&e.keyCode==dojo.keys.SPACE){this._updateSelection(node);}},_updateSelection:function(node){var _4b6=this.selectionRowIndex;var _4b7=dojo.query("~ div.innerPane",node);this.selectionRowIndex=this._panelDomList.length-_4b7.length-1;if(_4b6!=-1&&this.selectionRowIndex!=_4b6){var _4b8=dojo.query("> div.innerPane",this.domNode);if(_4b6<=_4b8.length){dojo.removeClass(_4b8[_4b6],"BTTRepetitiveSelectedRow");}}if(this.selectionRowIndex!=_4b6){dojo.addClass(node,"BTTRepetitiveSelectedRow");}},onFormSubmit:function(){if(this.dataNameForRow&&this.selectionMode=="single"){this._tmpInput=com.ibm.btt.dijit.Hidden({name:this.dataNameForRow,value:this.selectionRowIndex});dojo.place(this._tmpInput.domNode,this.domNode,"after");}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Keyboard"]){dojo._hasResource["com.ibm.btt.dijit.Keyboard"]=true;dojo.provide("com.ibm.btt.dijit.Keyboard");dojo.getObject("com.ibm.btt.dijit.keyboards",true);dojo.declare("com.ibm.btt.dijit.Keyboard",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:dojo.cache("com.ibm.btt.dijit","templates/Keyboard.html","<table class=\"dijit keyboard\" style=\"display:none;\" cellspacing=\"5\" cellpadding=\"0\">\r\n\t<tr>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key0\">7</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key1\">8</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key2\">9</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key3\">+</div></td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key4\">4</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key5\">5</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key6\">6</div></td>\r\n\t\t<td><div class=\"cell \" dojoAttachPoint=\"key7\">-</div></td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td><div class=\"cell\" class=\"cell\" dojoAttachPoint=\"key8\">1</div></td>\r\n\t\t<td><div class=\"cell\" class=\"cell\" dojoAttachPoint=\"key9\">2</div></td>\r\n\t\t<td><div class=\"cell\" class=\"cell\" dojoAttachPoint=\"key10\">3</div></td>\r\n\t\t<td><div class=\"cell\" class=\"cell\" dojoAttachPoint=\"key11\">Back</div></td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key12\">*</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key13\">0</div></td>\r\n\t\t<td><div class=\"cell\" dojoAttachPoint=\"key14\">.</div></td>\r\n\t\t<td><div class=\"cell enterKey\" dojoAttachPoint=\"key15\">Enter</div></td>\r\n\t</tr>\r\n</table>\r\n"),_keys:null,_evts:[],dynamicKeys:false,postCreate:function(){this._initKeys();if(!com.ibm.btt.dijit.keyboards.instances){com.ibm.btt.dijit.keyboards.instances=[];}com.ibm.btt.dijit.keyboards.instances.push(this);},refWidget:"",_getRefWidgetAttr:function(_4b9){this.refWidget=_4b9;},_initKeys:function(){this._keys=["7","8","9","+","4","5","6","-","1","2","3","*","0","."];for(var i=0;i<16;i++){this._evts.push(dojo.connect(this["key"+i],"onmousedown",this,dojo.hitch(this,this._onMouseDown,this["key"+i])));this._evts.push(dojo.connect(this["key"+i],"onmouseup",this,dojo.hitch(this,this._onMouseUp,this["key"+i])));this._evts.push(dojo.connect(this["key"+i],"onmouseover",this,dojo.hitch(this,this._onMouseOver,this["key"+i])));this._evts.push(dojo.connect(this["key"+i],"onmouseout",this,dojo.hitch(this,this._onMouseOut,this["key"+i])));}for(var i=0;i<15;i++){if(i==11){continue;}var num;if(this.dynamicKeys){num=parseInt(Math.random()*this._keys.length);}else{num=0;}this["key"+i].innerHTML=this._keys[num];this._evts.push(dojo.connect(this["key"+i],"onclick",this,dojo.hitch(this,this._onCellClick,this._keys[num],this["key"+i])));this._keys.splice(num,1);}this._evts.push(dojo.connect(this["key11"],"onclick",this,dojo.hitch(this,this._onBackClicked,this["key"+i])));this._evts.push(dojo.connect(this["key15"],"onclick",this,dojo.hitch(this,this._onEnterClicked,this["key"+i])));this._evts.push(dojo.connect(this.domNode,"onclick",this,this._onKeyboardClicked));},_onCellClick:function(key,node){if(this.refWidget){var _4ba=dijit.byId(this.refWidget);_4ba.set("value",_4ba.get("value")+key);}},_onBackClicked:function(node){if(this.refWidget){var _4bb=dijit.byId(this.refWidget);var _4bc=_4bb.get("value").toString();_4bb.set("value",_4bc.substr(0,_4bc.length-1));}},_onEnterClicked:function(node){this.hide();},show:function(){if(!this.refWidget){return;}var _4bd=dijit.byId(this.refWidget);var _4be=_4bd.domNode;var pos=dijit.placeOnScreenAroundElement(this.domNode,_4be,dijit.getPopupAroundAlignment(dijit.Tooltip.defaultPosition));dojo.style(this.domNode,"display","");this._focusRefWidget();},hide:function(){dojo.style(this.domNode,"display","none");this._focusRefWidget();},_onKeyboardClicked:function(){this._focusRefWidget();},_focusRefWidget:function(){if(this.refWidget){var _4bf=dijit.byId(this.refWidget);_4bf.focus();}},_onMouseDown:function(node){dojo.addClass(node,"active");},_onMouseUp:function(node){dojo.removeClass(node,"active");},_onMouseOver:function(node){if(!dojo.hasClass(node,"hovered")){dojo.addClass(node,"hovered");}},_onMouseOut:function(node){dojo.removeClass(node,"hovered");}});}if(!dojo._hasResource["com.ibm.btt.dijit.TitlePane"]){dojo._hasResource["com.ibm.btt.dijit.TitlePane"]=true;dojo.provide("com.ibm.btt.dijit.TitlePane");dojo.declare("com.ibm.btt.dijit.TitlePane",[dijit.TitlePane,com.ibm.btt.dijit.AbstractWidgetMixin],{});}
